<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Tutorial: Galaxy Installation and Administration - Galaxy Community Hub</title><meta name="gridsome:hash" content="91d4a83f9855c194893a1f5e294057505b0cd33d"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="All about Galaxy and its community."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.7d4a227415c9d9b704d56a079d49a3e1.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.7d4a227415c9d9b704d56a079d49a3e1.png"><link rel="preload" href="/assets/css/0.styles.e1e25242.css" as="style"><link rel="preload" href="/assets/js/app.0690a31c.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--vue-article-vue.d9a0c32e.js" as="script"><link rel="preload" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--admin-walkthrough--index-md.244e6bc0.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.9b913011.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-vue.c32e3571.js"><link rel="prefetch" href="/assets/js/page--src--pages--careers-vue.85d2fb31.js"><link rel="prefetch" href="/assets/js/page--src--pages--data-explorer-vue.8aa3e295.js"><link rel="prefetch" href="/assets/js/page--src--pages--events--archive-vue.1426fe7f.js"><link rel="prefetch" href="/assets/js/page--src--pages--events--cofests--papercuts-vue.ab928745.js"><link rel="prefetch" href="/assets/js/page--src--pages--events--cofests-vue.1e8420fc.js"><link rel="prefetch" href="/assets/js/page--src--pages--events--webinars-vue.5d6fb146.js"><link rel="prefetch" href="/assets/js/page--src--pages--events-vue.cd4ed3c8.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.a143f0a2.js"><link rel="prefetch" href="/assets/js/page--src--pages--news-vue.2f002266.js"><link rel="prefetch" href="/assets/js/page--src--pages--search-vue.23e742ea.js"><link rel="prefetch" href="/assets/js/page--src--pages--tests-vue.3b995c11.js"><link rel="prefetch" href="/assets/js/page--src--pages--use-vue.7c5b8683.js"><link rel="prefetch" href="/assets/js/page--src--templates--article-vue.6d736ff4.js"><link rel="prefetch" href="/assets/js/page--src--templates--platform-vue.91145b17.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--careers-vue~page--src--pages--use-vue~page--src--templates--article-vue~pa~efade918.92a3a9c1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--index-md.b8e1f92a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--md--imgtests--imgdir--index-md.5311083e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--partials--index-md.b6884022.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--imgtests--imgdir--index-md.1ee4281c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--imgtests--index-md.fe03c46f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--index-md.05d8aec6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--syntaxtests--index-md.e7b48256.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--syntaxtests--reldir--index-md.4093d68b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--capacity-planning--index-md.8813525b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--config--index-md.aafe943e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--config--performance--cluster--legacy--index-md.3da8719f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--datatypes--index-md.9b672175.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--disk-quotas--index-md.44f752e9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--faq--index-md.3851dd50.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--internals--data-model--index-md.6d581759.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--internals--galaxy-ops--index-md.a3b0d0af.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--ten-simple-steps-galaxy-as-a-service--index-md.699b2e0d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--tools--tool-config-syntax--index-md.208f876a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--tools--writing-tests--index-md.b2caa913.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--allocation--index-md.de3e7728.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--faq--index-md.ac3b79f2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--index-md.328857f9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--ssh--index-md.d92fc074.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--troubleshooting--index-md.7c074dc2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--aws--capacity-planning--index-md.01a397fa.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--aws--getting-started--index-md.acdcb61b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--aws--index-md.824830b5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--building--index-md.10fb8489.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--capacity-planning--index-md.e2d98e61.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--cluster-types--index-md.df053139.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--customizing--index-md.fb1f931d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--faq--index-md.b2fab4e5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--getting-started--index-md.d71b41b2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--getting-started--pre-201703--index-md.f5a4c4d0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--hadoop--index-md.d7a6d969.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--ht-condor--index-md.31bcf5d4.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--index-md.b7b22e1d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--openstack--index-md.d78cb425.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--services--index-md.f2027d09.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--sharing--index-md.cd3d2d6f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--troubleshooting--index-md.fc1a0be3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--userdata--index-md.e4d95203.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--future--index-md.e75566ea.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--index-md.a767ff80.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2012-07-09--index-md.66c1654b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2012-07-27--index-md.c6d537c1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2012-09-19--index-md.544a522a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2012-11-14--index-md.4746a5d0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2013-01-16--index-md.d1551883.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2013-03-20--index-md.5094871c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2013-05-15--index-md.1897abfc.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2013-11-20--index-md.c4d4ced5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-02-19--index-md.311ef2ba.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-04-16--index-md.0b281218.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-06-18--index-md.7c255863.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-08-20--index-md.43ba73c2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-10-15--index-md.bc11b58b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2016-02-18--index-md.1a182ba1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2016-04-21--index-md.5e9eea61.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2016-06-16--index-md.b1295236.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2016-08-18--index-md.d8fbe7ba.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--index-md.43055631.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--webinar-tech--index-md.a44b91e1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--surveys--2012--index-md.c7a0a096.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--surveys--2014--index-md.46c5bc59.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--surveys--index-md.34247339.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--data--index-md.46e24851.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--datafiles--index-md.77545970.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--architecture--index-md.55f07291.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--bitbucket--index-md.718bcb6c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--css--index-md.281229bf.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--getting-started--index-md.497082a2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--index-md.392b2e76.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--jsa--index-md.ba998e94.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--mercurial--index-md.14a2dad8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--security-tool-tips--index-md.17796bc0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--galaxy-project--index-md.0de41023.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--index-md.d89e2857.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--papers--index-md.4bdf7b3e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--posters--index-md.7e825096.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--presentations--index-md.084c96b9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--videos--index-md.c984f7ce.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--advanced-session--index-md.191fe1da.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--basics-session--index-md.35c32703.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--index-md.8acf4593.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--logistics--index-md.37d0ac9b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--publicity--index-md.7f2eec38.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--registration--index-md.d22dcedd.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--abstracts--index-md.bbbf6ae8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--index-md.cb62d683.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--key-dates--index-md.07f8d6b1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--lightning-talks--index-md.72ab128d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--logistics--index-md.c3eeb3dd.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--organizing-committee--index-md.f7a53fcd.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--photos--index-md.d5102197.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--breakouts--automation-strategies--index-md.6972b31d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--breakouts--bioinformatics-training--index-md.648f14ff.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--breakouts--end-users--index-md.ff776d4f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--breakouts--workflows-and-api--index-md.540ad6ba.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--index-md.d233185c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--promotion--index-md.212eb34b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--register--index-md.b4c4f57b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--sponsorships--index-md.d0539386.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--training-day--index-md.2ee4bcd3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--abstracts--index-md.1aa46f9f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--abstracts--posters--index-md.a8b0ee54.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--abstracts--talks--index-md.b3ee75dc.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--clinical-use-hpc-file-systems--index-md.3fc5e2ed.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--galaxy-admins--index-md.2f878aaa.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--galaxy-blast--index-md.5305db66.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--galaxy-professionals--index-md.dcbf6370.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--index-md.3abd720e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--proteomics--index-md.f4d7daaf.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--public-galaxy-servers--index-md.b346729f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--tool-developers--index-md.4365e2e3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--index-md.d58334f2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--key-dates--index-md.a3f7c6b8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--lightning--index-md.180bd3c7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--logistics--index-md.c889273c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--organizers--index-md.2f551bcb.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--photos--index-md.38ee0e51.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--program--index-md.f2c70270.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--promotion--index-md.1e5aadf9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--register--index-md.99382e6b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--sponsorships--index-md.1e82df1d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--advance-tool-data--index-md.02e350f8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--api--index-md.23e9c64f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--index-md.7b6606de.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--intro-tool-data--index-md.1893d923.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--vms--index-md.eb7d2783.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--abstracts--index-md.19ebb120.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--abstracts--posters--index-md.19e77da9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--abstracts--talks--index-md.69b1844f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--branch-release-merge--index-md.e83f529b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--galaxy-admins--index-md.4c5b1df3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--galaxy-end-users--index-md.6b3ff393.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--galaxy-training-network--index-md.85db1b6f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--heterogeneous--index-md.26797010.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--index-md.ab231746.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--using-galaxy-ui-overview--index-md.3f0318f2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--hackathon--index-md.f1b7f383.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--index-md.894a1ae1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--key-dates--index-md.d3d9965a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--lightning--index-md.268064be.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--logistics--index-md.033eda0f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--organizers--index-md.73259cdb.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--photos--index-md.3ee7fbac.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--program--index-md.79995b28.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--promotion--index-md.59d9587a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--register--index-md.6cf374d9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--sponsor-exhibit--index-md.2aa46fae.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--api--index-md.3aefd41a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--data-managers--index-md.ea9c133f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--index-md.1c4f2cb1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--vms--index-md.3a12839f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--cwl--index-md.29f1b923.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--data-management-challenges--index-md.5d4d1ee7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--data-splitting-and-parallelism--index-md.31c7354c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--elixir--index-md.e49743fc.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--extended-workflow--index-md.ca7910bb.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--fots--index-md.eea6d2b7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--galaxy-admins--index-md.8df0d322.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--galaxy-community-uk--index-md.69eb15c2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--galaxy-scientists--index-md.3dd577a5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--galaxy-training-network--index-md.d54633c6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--index-md.d03261e3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--data-hack-roundup--index-md.581fdf4b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--header--index-md.72afdfea.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--index-md.adc3dfb6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2016--bofs--index-md.e539350a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--abstracts--index-md.7322e906.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--childcare--index-md.416182d5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--cofest--index-md.ab0c9286.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--conduct--index-md.e979f793.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--faq--index-md.e8fa4530.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--index-md.876ea583.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--organizers--index-md.23f78b02.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--promotion--index-md.85444af0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--registration--index-md.5ed4fbf8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--sponsors--index-md.482f848f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--training--index-md.0709a7f7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--venue--index-md.238012f6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--abstracts--index-md.dc64d26a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--childcare--index-md.234bf37e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--code-of-conduct--index-md.3a181b70.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--collaboration--index-md.003698d8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--faq--index-md.6b9a5e1b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--icebreaker--index-md.bd0460e3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--index-md.139334ac.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--keynotes--index-md.add6f018.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--organizers--index-md.8f9602b8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--promotion--index-md.55ce8ac1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--register--index-md.0b3372c2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--sponsors--index-md.4546b9bb.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--training--index-md.9dbe3953.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--venue--index-md.1408cfc7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--germany-2014--index-md.4533e9c6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--germany-2016--index-md.da0aae7f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--sg-2014--index-md.38dcd568.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--sg-2016--index-md.80c32555.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--switzerland-2014--index-md.176fc9a2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--switzerland-2014--trainingday--index-md.774b7249.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--switzerland-2016--index-md.c5ea9a89.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--example--vue-remark--index-md.9e4f4358.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--faqs--index-md.a910449f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--galaxy-updates--2013-06--index-md.3a1cff95.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--galaxy-updates--2013-07--index-md.bb5876b9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--icons--index-md.9a000132.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--index-md.3b38f73f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--logos--index-md.aa44aae7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--news-graphics--index-md.05ad5cba.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--photos--index-md.1d8f64ab.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--screenshots--index-md.a201402f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--basic-editing--index-md.d08ab1a3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--basic-editing--workflow-editor-unannotated--index-md.e72b5147.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--extract--index-md.c7671571.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--tool-panel--index-md.ac20782a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--variables--index-md.3e2afdd3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--faq--index-md.09b46d8e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--galaxy-pages--index-md.ff01861b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--interval-operations--index-md.e1c040b2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--main--faq--index-md.0e15bbd0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--tools--requirements--index-md.d2018317.js"><link rel="stylesheet" href="/assets/css/0.styles.e1e25242.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout" data-v-5377d35c><header id="masthead"><nav class="navbar container justify-content-center navbar-dark bg-transparent navbar-expand-lg"><a href="/" target="_self" class="navbar-brand router-link-active"><img id="masthead-logo" src="/images/galaxy_logo_hub_white.svg" alt="Galaxy Community Hub" height="30"></a><button type="button" aria-label="Toggle navigation" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button><div id="nav-collapse" class="navbar-collapse collapse" style="display:none;"><ul class="navbar-nav"><li class="nav-item"><a href="/use/" target="_self" class="nav-link">Use</a></li><li class="nav-item b-nav-dropdown dropdown"><a role="button" aria-haspopup="true" aria-expanded="false" href="#" target="_self" class="nav-link dropdown-toggle"><span>Learn</span></a><ul tabindex="-1" class="dropdown-menu"><li role="presentation"><a href="/learn/" role="menuitem" target="_self" class="dropdown-item">How to use Galaxy</a></li><li role="presentation"><a role="menuitem" href="https://training.galaxyproject.org/" target="_self" class="dropdown-item">Teach with Galaxy</a></li></ul></li><li class="nav-item b-nav-dropdown dropdown"><a role="button" aria-haspopup="true" aria-expanded="false" href="#" target="_self" class="nav-link dropdown-toggle"><span>Community</span></a><ul tabindex="-1" class="dropdown-menu"><li role="presentation"><a href="/community/" role="menuitem" target="_self" class="dropdown-item">About</a></li><li role="presentation"><a href="/events/" role="menuitem" target="_self" class="dropdown-item router-link-active">Events</a></li><li role="presentation"><a href="/news/" role="menuitem" target="_self" class="dropdown-item">News</a></li><li role="presentation"><a href="/blog/" role="menuitem" target="_self" class="dropdown-item">Blog</a></li><li role="presentation"><a href="/publication-library/" role="menuitem" target="_self" class="dropdown-item">Publications</a></li><li role="presentation"><a href="/galaxy-project/statistics/" role="menuitem" target="_self" class="dropdown-item">Stats</a></li><li role="presentation"><a href="/careers/" role="menuitem" target="_self" class="dropdown-item">Careers</a></li></ul></li><li class="nav-item b-nav-dropdown dropdown"><a role="button" aria-haspopup="true" aria-expanded="false" href="#" target="_self" class="nav-link dropdown-toggle"><span>Deploy &amp; Develop</span></a><ul tabindex="-1" class="dropdown-menu"><li role="presentation"><a href="/admin/get-galaxy/" role="menuitem" target="_self" class="dropdown-item">Install Galaxy</a></li><li role="presentation"><a href="/admin/" role="menuitem" target="_self" class="dropdown-item">Server administration</a></li><li role="presentation"><a href="/tools/" role="menuitem" target="_self" class="dropdown-item">Tools</a></li><li role="presentation"><a href="/develop/api/" role="menuitem" target="_self" class="dropdown-item">Working with the API</a></li><li role="presentation"><a href="/develop/" role="menuitem" target="_self" class="dropdown-item">Contributing</a></li><li role="presentation"><a href="/docs/" role="menuitem" target="_self" class="dropdown-item">Code documentation</a></li></ul></li><li class="nav-item b-nav-dropdown dropdown"><a role="button" aria-haspopup="true" aria-expanded="false" href="#" target="_self" class="nav-link dropdown-toggle"><span>Support</span></a><ul tabindex="-1" class="dropdown-menu"><li role="presentation"><a href="/support/" role="menuitem" target="_self" class="dropdown-item">FAQ</a></li><li role="presentation"><a role="menuitem" href="https://help.galaxyproject.org/" target="_self" class="dropdown-item">Galaxy Help Forum</a></li></ul></li><li class="nav-item"><a href="/jxtx/" target="_self" class="nav-link">@jxtx</a></li></ul><ul class="navbar-nav ml-auto"><li class="form-inline"><form action="/search/" method="get" class="form-inline"><input id="search-input" name="q" type="text" placeholder="Search Galaxy" value="" class="mr-sm-2 form-control form-control-sm"><button type="submit" class="btn my-2 my-sm-0 btn-secondary btn-sm"><span class="fa fa-search"></span></button></form></li></ul></div></nav></header><section id="maincontainer" class="container"><header data-v-1944b8d1 data-v-5377d35c><a href="/" class="link active" data-v-1944b8d1>← Back to Home</a><!----><h1 class="title" data-v-1944b8d1>Tutorial: Galaxy Installation and Administration</h1><!----><section class="metadata freetext" data-v-1944b8d1><!----><!----><!----></section><!----><!----></header><article class="content markdown" data-v-5377d35c><div data-v-5377d35c><div class="toc-wrapper col-md-3"><ul><li><p><a href="#setting-up-a-local-galaxy-tutorial-part-i">Setting up a Local Galaxy Tutorial (Part I)</a></p><ul><li><p><a href="#clone-download-galaxy">Clone (download) Galaxy</a></p><ul><li><a href="#references">References</a></li></ul></li><li><p><a href="#update-to-the-stable-branch">Update to the stable branch</a></p></li><li><p><a href="#start-galaxy">Start Galaxy</a></p></li><li><p><a href="#installing-tools-from-the-tool-shed">Installing tools from the Tool Shed</a></p><ul><li><a href="#topics-for-this-section">Topics for this section</a></li><li><a href="#galaxy-configuration-for-tool-shed-installs">Galaxy configuration for Tool Shed installs</a></li><li><a href="#install-a-tool-from-the-tool-shed">Install a tool from the Tool Shed</a></li><li><a href="#references-1">References</a></li></ul></li><li><p><a href="#managing-local-data">Managing local data</a></p><ul><li><a href="#topics-for-this-section-1">Topics for this section</a></li><li><a href="#adding-local-data-with-a-galaxy-data-manager">Adding local data with a Galaxy Data Manager</a></li><li><a href="#references-2">References</a></li></ul></li></ul></li><li><p><a href="#setting-up-a-local-galaxy-tutorial-part-ii">Setting up a Local Galaxy Tutorial (Part II)</a></p><ul><li><p><a href="#install-and-configure-postgresql">Install and configure PostgreSQL</a></p></li><li><p><a href="#create-a-new-user-for-galaxy">Create a new user for Galaxy</a></p></li><li><p><a href="#create-a-python-virtual-environment">Create a Python virtual environment</a></p></li><li><p><a href="#clone-download-galaxy-1">Clone (download) Galaxy</a></p></li><li><p><a href="#configure-galaxy">Configure Galaxy</a></p></li><li><p><a href="#start-a-galaxy-server-to-complete-first-run-setup">Start a Galaxy server to complete first run setup</a></p></li><li><p><a href="#install-ansible-and-nginx">Install Ansible and nginx</a></p><ul><li><a href="#ansible">Ansible</a></li><li><a href="#build-nginx">Build nginx</a></li><li><a href="#install-nginx">Install nginx</a></li></ul></li><li><p><a href="#install-uwsgi-and-supervisord">Install uWSGI and supervisord</a></p></li><li><p><a href="#configure-nginx">Configure nginx</a></p></li><li><p><a href="#configure-supervisord">Configure supervisord</a></p></li><li><p><a href="#start-galaxy-and-nginx">Start Galaxy and nginx</a></p></li><li><p><a href="#references-3">References</a></p></li><li><p><a href="#load-external-data-in-a-data-library">Load external data in a data library</a></p></li></ul></li><li><p><a href="#extra-activities-time-and-interest-permitting">Extra Activities (Time and Interest Permitting)</a></p><ul><li><p><a href="#using-slurm-or-torquepbs">Using Slurm or Torque/PBS</a></p></li><li><p><a href="#shipping-jobs-to-remote-resources-with-pulsar">Shipping Jobs to Remote Resources with Pulsar</a></p><ul><li><a href="#installing-pulsar-with-ansible">Installing Pulsar with Ansible</a></li></ul></li><li><p><a href="#additional-topic-candidates">Additional topic candidates</a></p></li></ul></li><li><p><a href="#transcripts">Transcripts</a></p><ul><li><a href="#adding-local-data-by-hand">Adding local data by hand</a></li></ul></li></ul></div><div class="body-wrapper col-md-9"><p class="markdown" data-v-5377d35c><div class="text-center trim-p">
<p><a href="/events/gcc2014/"><img src="/images/logos/GCC2014LogoWide600.png" alt="2014 Galaxy Community Conference (GCC2014), Baltimore Maryland, United States, June 30 - July 2 2014"></a></p>
<p><br /><br /></p>
<p><span style="font-size: larger;"> <a href="/events/gcc2014/abstracts/">Slides, posters, and videos are now available</a>;  <em>and</em> <a href="https://gccbosc2018.sched.com/" target="_blank" rel="noopener noreferrer">GCC2018</a> is coming! </span></p>
</div></p><p><br><br></p><p class="markdown" data-v-5377d35c><div class="alert alert-info float-right text-center">
<p><a href="/events/gcc2014/"><strong>GCC2014</strong></a><br>
<a href="/events/gcc2014/training-day">Training</a><br>
<a href="/events/gcc2014/program">Program</a><br>
<a href="/events/gcc2014/abstracts">Abstracts</a><br>
<a href="/events/gcc2014/bofs">BoFs</a><br>
<a href="/events/gcc2014/lightning">Lightning</a><br>
<a href="/events/gcc2014/logistics">Logistics</a><br>
<a href="/events/gcc2014/sponsor-exhibit">Sponsors</a><br>
<a href="/events/gcc2014/hackathon">Hackathon</a><br>
<a href="/events/gcc2014/promotion">Promotion</a><br>
<a href="/events/gcc2014/register">Registration</a><br>
<a href="/events/gcc2014/key-dates">Key Dates</a><br>
<a href="/events/gcc2014/organizers">Organizers</a></p>
</div></p><div class="right"><a href="/events/gcc2014/training-day/"><img src="/images/logos/GCC2014TrainingDayLogoSquare.png" alt="GCC2014 Training Day" width="100"></a></div><p><a href="/people/nate/">Nate Coraor</a> and <a href="/people/john-chilton/">John Chilton</a></p><br><p><img src="https://dev.twitter.com/sites/default/files/images_documentation/bird_blue_16.png"> #usegalaxy</p><p>This this follow-along page assumes you have already installed and started a <a href="https://wiki.galaxyproject.org/Events/GCC2014/TrainingDay/VMs" target="_blank" rel="noopener noreferrer">Training Day VM</a> - please do this before arriving.</p><p><strong>This tool assumes you are using Firefox bundled with the VM.</strong> Galaxy is compatible with all modern versions of Firefox, Chrome, Safari, and Internet Explorer. However, for the purposes of this tutorial it will help us when assisting people encountering problems if they are only using Firefox.</p><p>You will most likely want to copy and paste between this wiki page and the VM. To allow this, after launching the VM, click the <strong>Devices</strong> menu, then <strong>Shared Clipboard</strong> → <strong>Bidirectional</strong>. The key combination <strong>Shift+Ctrl+V</strong> in the VM will paste the contents of the clipboard.</p><p>If your host system has enough memory, we suggest increasing the memory allocated to the VM to 2 GB.</p><h1 id="setting-up-a-local-galaxy-tutorial-part-i"><a href="#setting-up-a-local-galaxy-tutorial-part-i" aria-hidden="true"><span class="icon icon-link"></span></a>Setting up a Local Galaxy Tutorial (Part I)</h1><h2 id="clone-download-galaxy"><a href="#clone-download-galaxy" aria-hidden="true"><span class="icon icon-link"></span></a>Clone (download) Galaxy</h2><p>The Galaxy distribution is found at <a href="https://bitbucket.org/galaxy/galaxy-dist/" target="_blank" rel="noopener noreferrer">https://bitbucket.org/galaxy/galaxy-dist/</a>, but for the purposes of this tutorial, we'll use a local copy already on the VM to save time.</p><pre><code class="language-console">galaxy@gcc2014:~$ hg clone /home/galaxy/galaxy-central galaxy-dist
requesting all changes
adding changesets
adding manifests
adding file changes
added 8 changesets with 3443 changes to 3443 files
updating to branch default
3443 files updated, 0 files merged, 0 files removed, 0 files unresolved
galaxy@gcc2014:~$
</code></pre><p>(One can launch a terminal in the VM by clicking the little mouse icon in the upper left corner and then clicking the &quot;Terminal Emulator&quot; icon in the pop-up menu.)</p><h3 id="references"><a href="#references" aria-hidden="true"><span class="icon icon-link"></span></a>References</h3><ul><li><a href="http://getgalaxy.org" target="_blank" rel="noopener noreferrer">getgalaxy.org</a></li><li><a href="https://wiki.galaxyproject.org" target="_blank" rel="noopener noreferrer">Galaxy Wiki/documentation</a></li></ul><h2 id="update-to-the-stable-branch"><a href="#update-to-the-stable-branch" aria-hidden="true"><span class="icon icon-link"></span></a>Update to the stable branch</h2><pre><code class="language-console">galaxy@gcc2014:~$ cd galaxy-dist
galaxy@gcc2014:~/galaxy-dist$ hg update stable
264 files updated, 0 files merged, 144 files removed, 0 files unresolved
galaxy@gcc2014:~/galaxy-dist$
</code></pre><h2 id="start-galaxy"><a href="#start-galaxy" aria-hidden="true"><span class="icon icon-link"></span></a>Start Galaxy</h2><pre><code>galaxy@gcc2014:~/galaxy-dist$ cp -r ../galaxy-central/eggs eggs  # cache dependencies to speed up deploy (optional)
galaxy@gcc2014:~/galaxy-dist$ sh run.sh
Initializing datatypes_conf.xml from datatypes_conf.xml.sample
  ...
Some eggs are out of date, attempting to fetch...
Fetched http://eggs.galaxyproject.org/amqp/amqp-1.4.3-py2.7.egg
  ...
Fetch successful.
python path is: /home/ubuntu/galaxy-dist/eggs/mercurial-2...
  ...
Starting server in PID 3091.
serving on http://127.0.0.1:8080
</code></pre><h2 id="installing-tools-from-the-tool-shed"><a href="#installing-tools-from-the-tool-shed" aria-hidden="true"><span class="icon icon-link"></span></a>Installing tools from the Tool Shed</h2><h3 id="topics-for-this-section"><a href="#topics-for-this-section" aria-hidden="true"><span class="icon icon-link"></span></a>Topics for this section</h3><ul><li>What is a Galaxy tool?<ul><li>Basic: An XML description of the tool's interface, allowing Galaxy to render a UI (tool form), as well as the command line to execute.</li><li>Complex: XML + wrapper scripts and interfaces to external dependencies</li></ul></li><li>Exploring preinstalled tools and filesystem layout<ul><li><code>galaxy-dist/tool_conf.xml</code></li><li><code>galaxy-dist/tools/</code></li><li>Example simple tool: <code>galaxy-dist/tools/filters/sorter.xml</code> (tool xml), <code>galaxy-dist/tools/filters/sorter.py</code> (tool code)</li><li>Example tool with unmet dependencies: <code>galaxy-dist/tools/sr_mapping/mosaik.xml</code></li></ul></li><li>The Tool Shed<ul><li>Installing tools from the Tool Shed</li><li>Exploring the filesystem layout of tools installed from the Tool Shed</li></ul></li></ul><h3 id="galaxy-configuration-for-tool-shed-installs"><a href="#galaxy-configuration-for-tool-shed-installs" aria-hidden="true"><span class="icon icon-link"></span></a>Galaxy configuration for Tool Shed installs</h3><p>Stop Galaxy by hitting <code>CTRL-c</code>:</p><pre><code class="language-console">serving on http://127.0.0.1:8080
^Cgalaxy.jobs.handler INFO 2014-04-23 13:27:59,203 sending stop signal to worker thread
galaxy.jobs.handler INFO 2014-04-23 13:27:59,204 job handler queue stopped
galaxy.jobs.runners INFO 2014-04-23 13:27:59,204 LWRRunner: Sending stop signal to monitor thread
galaxy.jobs.runners INFO 2014-04-23 13:27:59,204 LWRRunner: Sending stop signal to 3 worker threads
galaxy.jobs.runners INFO 2014-04-23 13:27:59,204 LocalRunner: Sending stop signal to 5 worker threads
galaxy.jobs.handler INFO 2014-04-23 13:27:59,205 sending stop signal to worker thread
galaxy.jobs.handler INFO 2014-04-23 13:27:59,205 job handler stop queue stopped
galaxy@gcc2014:~/galaxy-dist$
</code></pre><p>There may be some additional interruption exceptions reported - these are not important.</p><p>Edit the primary Galaxy configuration file, <code>universe_wsgi.ini</code>. If you are not familiar with <code>vi</code>, consider using <code>nano</code> instead.</p><pre><code class="language-console">galaxy@gcc2014:~/galaxy-dist$ vi universe_wsgi.ini
</code></pre><p>We need to set two options. The file is large and it's easiest to search for these (<code>/&lt;pattern&gt;</code> in vi, <code>CTRL-w</code><code>&lt;pattern&gt;</code> in nano):</p><pre><code class="language-ini">[app:main]
admin_users = nate@bx.psu.edu
tool_dependency_dir = /home/galaxy/tool_deps
</code></pre><p>Then save and quit (<code>CTRL-x</code><code>y</code><code>ENTER</code> in nano). Start Galaxy again:</p><pre><code class="language-console">galaxy@gcc2014:~/galaxy-dist$ sh run.sh
...
Starting server in PID 3298.
serving on 127.0.0.1:8080 view at http://127.0.0.1:8080
</code></pre><h3 id="install-a-tool-from-the-tool-shed"><a href="#install-a-tool-from-the-tool-shed" aria-hidden="true"><span class="icon icon-link"></span></a>Install a tool from the Tool Shed</h3><ul><li>Register an account that matches the address you set in <code>admin_users</code></li><li>Follow the <a href="/admin/tools/add-tool-from-toolshed-tutorial/">tutorial on installing tools from the Tool Shed</a>. In brief:<ul><li>Click <strong>Admin</strong> from the masthead</li><li>Click <strong>Search and browse tool sheds</strong> from the left panel</li><li>Click the popup icon for <strong>Galaxy main tool shed</strong> and select <strong>Search for valid tools</strong></li><li>Search for <strong>Tool name</strong>s that contain the name <code>bwa</code></li><li>Click the popup icon for <strong>bwa_wrappers</strong> owned by <strong>devteam</strong> and select <strong>Install to Galaxy</strong></li><li>Select the <strong>NGS: Mapping</strong> section and click <strong>Install to Galaxy</strong></li></ul></li><li>Tools (XML, wrapper scripts) are installed in <code>/home/galaxy/shed_tools</code></li><li>Tool dependencies (binaries) are installed in <code>/home/galaxy/tool_deps</code></li></ul><h3 id="references-1"><a href="#references-1" aria-hidden="true"><span class="icon icon-link"></span></a>References</h3><ul><li><a href="/tools/">Tools hub page</a></li><li><a href="/admin/tools/add-tool-tutorial/">Tutorial on adding custom tools</a></li><li><a href="/admin/tools/add-tool-from-toolshed-tutorial/">Tutorial on installing tools from the Tool Shed</a></li><li><a href="https://bitbucket.org/galaxy/galaxy-central/src/3b42725359224832317a066d95dff596f93ab33f/tools?at=stable" target="_blank" rel="noopener noreferrer">Current tools/ directory</a></li><li><a href="/toolshed/">Tool Shed hub page</a></li><li><a href="/toolshed/tour/">Tool Shed tour</a></li><li><a href="http://toolshed.g2.bx.psu.edu/" target="_blank" rel="noopener noreferrer">Galaxy Main Tool Shed</a></li></ul><h2 id="managing-local-data"><a href="#managing-local-data" aria-hidden="true"><span class="icon icon-link"></span></a>Managing local data</h2><h3 id="topics-for-this-section-1"><a href="#topics-for-this-section-1" aria-hidden="true"><span class="icon icon-link"></span></a>Topics for this section</h3><ul><li>What is local data?</li><li>Manual data inclusion<ul><li>Building indexes on the command line</li><li><code>.loc</code> files</li><li><code>tool_data_table_conf.xml</code></li><li>Example of the above with bwa and S. cerevisiae (sacCer2) <a href="/events/gcc2014/training-day/admin-walkthrough/#adding-local-data-by-hand">transcript</a></li></ul></li><li>Galaxy Data Managers</li></ul><h3 id="adding-local-data-with-a-galaxy-data-manager"><a href="#adding-local-data-with-a-galaxy-data-manager" aria-hidden="true"><span class="icon icon-link"></span></a>Adding local data with a Galaxy Data Manager</h3><p>Install data managers for fetching the reference genome and building BWA indexes:</p><ul><li>Click <strong>Admin</strong> from the masthead</li><li>Click <strong>Search and browse tool sheds</strong> from the left panel</li><li>Click the popup icon for <strong>Galaxy main tool shed</strong> and select <strong>Search for valid tools</strong></li><li>Search for <strong>Tool id</strong>s that contain the name <code>manager</code></li><li>Check <strong>data_manager_fetch_genome_all_fasta</strong> and <strong>data_manager_bwa_index_builder</strong>, then click <strong>Install to Galaxy</strong> (at the bottom of the page)</li><li>Click <strong>Install</strong></li></ul><p>Fetch reference genome (fasta):</p><ul><li>Click <strong>Manage local data (beta)</strong> from the left panel</li><li>Click <strong>Reference Genome - fetching</strong></li><li>In the <strong>DBKEY to assign to data:</strong> field, type <code>sacCer2</code></li><li>In the <strong>UCSC's DBKEY for source FASTA:</strong> field, type <code>sacCer2</code></li><li>Click <strong>Execute</strong></li></ul><p>Build BWA indexes:</p><ul><li>Click <strong>Manage local data (beta)</strong> from the left panel</li><li>Click <strong>BWA index - builder</strong></li><li>Click <strong>Execute</strong></li></ul><p>Upon completion:</p><ul><li><code>galaxy-dist/tool-data/sacCer2/seq/sacCer2.fa</code> has been created from chromosome fastas fetched from UCSC</li><li><code>galaxy-dist/tool-data/sacCer2/bwa_index/sacCer2.fa.*</code> indexes have been generated with <code>bwa index</code></li><li><code>galaxy-dist/tool-data/toolshed.g2.bx.psu.edu/repos/devteam/data_manager_fetch_genome_all_fasta/2ebc856bce29/all_fasta.loc</code> contains a reference to the newly created <code>sacCer2.fa</code></li><li><code>galaxy-dist/tool-data/toolshed.g2.bx.psu.edu/repos/devteam/data_manager_bwa_index_builder/367878cb3698/bwa_index.loc</code> contains a reference to the newly built bwa indexes</li><li><code>galaxy-dist/shed_tool_data_table_conf.xml</code> includes entries for the <code>all_fasta</code> and <code>bwa_indexes</code> data tables</li></ul><h3 id="references-2"><a href="#references-2" aria-hidden="true"><span class="icon icon-link"></span></a>References</h3><ul><li><a href="/admin/data-preparation/">(Manual) index building</a></li><li><a href="/admin/data-integration/">(Manual) data integration</a></li><li><a href="/admin/tools/data-managers/">Automated data management with Data Managers</a></li></ul><h1 id="setting-up-a-local-galaxy-tutorial-part-ii"><a href="#setting-up-a-local-galaxy-tutorial-part-ii" aria-hidden="true"><span class="icon icon-link"></span></a>Setting up a Local Galaxy Tutorial (Part II)</h1><p>Documentation for the features used in this section can be found at <a href="https://usegalaxy.org/production" target="_blank" rel="noopener noreferrer">usegalaxy.org/production</a> (forwards to <a href="/admin/config/performance/production-server/">Admin/Config/Performance/ProductionServer</a>)</p><h2 id="install-and-configure-postgresql"><a href="#install-and-configure-postgresql" aria-hidden="true"><span class="icon icon-link"></span></a>Install and configure PostgreSQL</h2><pre><code class="language-hightlight">galaxy@gcc2014:~/galaxy-dist$ sudo apt-get install postgresql
[sudo] password for galaxy:
Reading package lists... Done
Building dependency tree
Reading state information... Done
postgresql is already the newest version.
...
galaxy@gcc2014:~/galaxy-dist$ sudo -u postgres createuser gxprod
galaxy@gcc2014:~/galaxy-dist$ sudo -u postgres createdb -O gxprod gxprod
</code></pre><h2 id="create-a-new-user-for-galaxy"><a href="#create-a-new-user-for-galaxy" aria-hidden="true"><span class="icon icon-link"></span></a>Create a new user for Galaxy</h2><pre><code class="language-console">galaxy@gcc2014:~/galaxy-dist$ sudo useradd -m -s /bin/bash gxprod
galaxy@gcc2014:~/galaxy-dist$
</code></pre><h2 id="create-a-python-virtual-environment"><a href="#create-a-python-virtual-environment" aria-hidden="true"><span class="icon icon-link"></span></a>Create a Python virtual environment</h2><pre><code class="language-console">galaxy@gcc2014:~/galaxy-dist$ sudo apt-get install python-virtualenv
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
  ...
Do you want to continue? [Y/n]
  ...
Get:1 http://us.archive.ubuntu.com/ubuntu/ trusty/main libasan0 amd64 4.8.2-19ubuntu1 [63.0 kB]
  ...
Processing triggers for libc-bin (2.19-0ubuntu6) ...
galaxy@gcc2014:~/galaxy-dist$ sudo -iu gxprod
gxprod@gcc2014:~$ virtualenv venv
New python executable in venv/bin/python
Installing setuptools, pip...done.
gxprod@gcc2014:~$ source ./venv/bin/activate
(venv)gxprod@gcc2014:~$
</code></pre><h2 id="clone-download-galaxy-1"><a href="#clone-download-galaxy-1" aria-hidden="true"><span class="icon icon-link"></span></a>Clone (download) Galaxy</h2><pre><code class="language-console">gxprod@gcc2014:~$ hg clone ~galaxy/galaxy-central galaxy-dist
not trusting file /home/galaxy/galaxy-central/.hg/hgrc from untrusted user galaxy, group galaxy
requesting all changes
adding changesets
adding manifests
adding file changes
added 13944 changesets with 47333 changes to 8458 files
updating to branch default
3658 files updated, 0 files merged, 0 files removed, 0 files unresolved
gxprod@gcc2014:~$ cd galaxy-dist
gxprod@gcc2014:~/galaxy-dist$ hg update stable
264 files updated, 0 files merged, 144 files removed, 0 files unresolved
gxprod@gcc2014:~/galaxy-dist$ cp -r ~galaxy/galaxy-central/eggs .
0 files updated, 0 files merged, 0 files removed, 0 files unresolved
gxprod@gcc2014:~/galaxy-dist$
</code></pre><h2 id="configure-galaxy"><a href="#configure-galaxy" aria-hidden="true"><span class="icon icon-link"></span></a>Configure Galaxy</h2><pre><code class="language-console">gxprod@gcc2014:~/galaxy-dist$ cp universe_wsgi.ini.sample universe_wsgi.ini
gxprod@gcc2014:~/galaxy-dist$ vi universe_wsgi.ini
</code></pre><p>Add the following section for uWSGI's configuration and the job handler processes</p><pre><code class="language-ini">[uwsgi]
socket = 127.0.0.1:4001
stats = 127.0.0.1:9191
processes = 2
threads = 4
master = True
logto = /home/gxprod/uwsgi.log
pythonpath = lib

[server:handler0]
use = egg:Paste#http
port = 9010
use_threadpool = True
threadpool_workers = 10

[server:handler1]
use = egg:Paste#http
port = 9011
use_threadpool = True
threadpool_workers = 10
</code></pre><p>Set the following settings in the <code>[app:main]</code> section <strong>at the bottom of the file</strong>:</p><pre><code class="language-ini">database_connection = postgresql:///gxprod?host=/var/run/postgresql
database_engine_option_server_side_cursors = True
tool_dependency_dir = /home/gxprod/tool_deps
static_enabled = False
nginx_x_accel_redirect_base = /_x_accel_redirect
nginx_upload_store = /home/gxprod/uploads
nginx_upload_path = /_upload
log_events = False
log_actions = False
debug = False
use_interactive = False
id_secret = &lt;random text&gt;
admin_users = nate@bx.psu.edu
library_import_dir = /home/gxprod/library
allow_library_path_paste = True
</code></pre><p>Explanations of these options:</p><ul><li><code>database_connection = postgresql:///gxprod?host=/var/run/postgresql</code> - Use a PostgreSQL database via a local UNIX domain socket (the socket is in <code>/var/run/postgresql</code>). <a href="https://docs.galaxyproject.org/en/latest/admin/production.html#switching-to-postgresql-database-server" target="_blank" rel="noopener noreferrer">documentation</a></li><li><code>database_engine_option_server_side_cursors = True</code> - Keep large SQL query results on the PostgreSQL server, rather the transferring the entire result set to the Galaxy processes.</li><li><code>tool_dependency_dir = /home/gxprod/tool_deps</code> - The directory that will house tool dependencies</li><li><code>static_enabled = False</code> - Static content will be served by the proxy server</li><li><code>nginx_x_accel_redirect_base = /_x_accel_redirect</code> - Delegate dataset downloads to nginx</li><li><code>nginx_upload_store = /home/gxprod/uploads</code> - Delegate uploads to nginx, set temporary directory</li><li><code>nginx_upload_path = /_upload</code> - Special path configured in nginx where uploads will be POSTed</li><li><code>log_events = False</code> - Don't log events in the database (faster)</li><li><code>log_actions = False</code> - Don't log actions in the database (faster)</li><li><code>debug = False</code> - Disables debugging middleware that loads server responses in to memory (can crash the server when handling large files)</li><li><code>use_interactive = False</code> - Disables live client browser debugging (insecure).</li><li><code>id_secret = &lt;random text&gt;</code> - Ensures that the encoded IDs used by Galaxy (especially session IDs) are unique.  One simple way to generate a value for this is with a shell command like <code>$ date | md5sum</code></li><li><code>admin_users = nate@bx.psu.edu</code> - Make nate@example.org an administrator. Galaxy's Admin UI is only accessible if you define administrators here!</li><li><code>library_import_dir = /home/gxprod/library</code> - Administrators can directly import datasets from this directory on the server to Data Libraries.  This includes an option that allows an effective &quot;symlink&quot; to the data, rather than copying it in to Galaxy's <code>file_path</code> directory. <a href="/admin/data-libraries/#user-folder">documentation</a></li><li><code>allow_library_path_paste = True</code> - Administrators can import datasets from anywhere on the server's filesystem(s) by entering their paths in to a text box</li></ul><p>Honorable mentions for features we won't use today but that are common in big setups:</p><ul><li><code>ftp_upload_dir</code> and <code>ftp_upload_site</code> - Allow users to upload data to the server using FTP</li><li><code>use_remote_user</code> and <code>remote_user_maildomain</code> - Use your institution's existing authentication system to log in to Galaxy. <a href="/admin/config/external-user-databases/">Apache documentation</a> or <a href="https://galaxyproject.org/admin/config/nginx-external-user-auth/" target="_blank" rel="noopener noreferrer">nginx documentation</a></li><li><code>allow_user_impersonation</code> - Users configured as administrators (with <code>admin_users</code>) can &quot;become&quot; other users to view Galaxy exactly as the impersonated user does. Useful for providing support.</li><li><code>user_library_import_dir</code> - Non-administrators can directly import datasets from this directory on this server to Data Libraries from which they have been given write permission. <a href="/data-libraries/#user-folder">documentation</a></li><li><code>object_store_config_file</code> - Configure Galaxy's &quot;object storage&quot; layer to store data in multiple filesystems, Amazon S3, iRODS, etc.</li><li><code>error_email_to</code> (with <code>smtp_server</code>) - Allow users to send bug reports directly to you</li><li><code>user_activation_on</code> and related options - Require new users to verify their email address</li><li><code>allow_user_dataset_purge = True</code> - Allow users to forcibly remove their datasets from disk (note that the data is only actually removed if all versions of a shared dataset are purged by all users who are sharing the dataset). By default, Galaxy does not remove data, as this is done at a later time by the dataset cleanup scripts.</li><li><code>enable_quotas = True</code> - Enable Galaxy's quota system. Quotas are configured by administrators in the Galaxy Admin UI</li></ul><p>Create a job system configuration:</p><pre><code class="language-console">gxprod@gcc2014:~/galaxy-dist$ vi job_conf.xml
</code></pre><p>In the editor, paste:</p><pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;job_conf&gt;
    &lt;plugins workers=&quot;2&quot;&gt;
        &lt;plugin id=&quot;gridengine&quot; type=&quot;runner&quot; load=&quot;galaxy.jobs.runners.drmaa:DRMAAJobRunner&quot;&gt;
            &lt;param id=&quot;drmaa_library_path&quot;&gt;/usr/lib/gridengine-drmaa/lib/libdrmaa.so&lt;/param&gt;
        &lt;/plugin&gt;
        &lt;!--
        &lt;plugin id=&quot;torque&quot; type=&quot;runner&quot; load=&quot;galaxy.jobs.runners.drmaa:DRMAAJobRunner&quot;&gt;
            &lt;param id=&quot;drmaa_library_path&quot;&gt;/usr/lib/pbs-drmaa/lib/libdrmaa.so&lt;/param&gt;
        &lt;/plugin&gt;
        &lt;plugin id=&quot;slurm&quot; type=&quot;runner&quot; load=&quot;galaxy.jobs.runners.slurm:SlurmJobRunner&quot;&gt;
            &lt;param id=&quot;drmaa_library_path&quot;&gt;/usr/lib/slurm-drmaa/lib/libdrmaa.so&lt;/param&gt;
        &lt;/plugin&gt;
        --&gt;
    &lt;/plugins&gt;
    &lt;handlers default=&quot;handlers&quot;&gt;
        &lt;handler id=&quot;handler0&quot; tags=&quot;handlers&quot;/&gt;
        &lt;handler id=&quot;handler1&quot; tags=&quot;handlers&quot;/&gt;
    &lt;/handlers&gt;
    &lt;destinations default=&quot;cluster&quot;&gt;
        &lt;destination id=&quot;cluster&quot; runner=&quot;gridengine&quot;/&gt;
        &lt;!--
        &lt;destination id=&quot;cluster&quot; runner=&quot;torque&quot;/&gt;
        &lt;destination id=&quot;cluster&quot; runner=&quot;slurm&quot;/&gt;
        --&gt;
    &lt;/destinations&gt;
    &lt;limits&gt;
        &lt;limit type=&quot;registered_user_concurrent_jobs&quot;&gt;2&lt;/limit&gt;
        &lt;limit type=&quot;unregistered_user_concurrent_jobs&quot;&gt;1&lt;/limit&gt;
        &lt;limit type=&quot;job_walltime&quot;&gt;24:00:00&lt;/limit&gt;
    &lt;/limits&gt;
&lt;/job_conf&gt;
</code></pre><p>This VM comes preconfigured with Torque, Grid Engine, and SLURM - Galaxy can submit jobs to any of these as well as LSF, Condor, etc... but the above configuration will just target the VM's default - Grid Engine.</p><h2 id="start-a-galaxy-server-to-complete-first-run-setup"><a href="#start-a-galaxy-server-to-complete-first-run-setup" aria-hidden="true"><span class="icon icon-link"></span></a>Start a Galaxy server to complete first run setup</h2><pre><code class="language-console">gxprod@gcc2014:~/galaxy-dist$ sh run.sh
Initializing datatypes_conf.xml from datatypes_conf.xml.sample
  ...
serving on http://127.0.0.1:8080
^C
  ...
gxprod@gcc2014:~/galaxy-dist$ logout
galaxy@gcc2014:~$
</code></pre><h2 id="install-ansible-and-nginx"><a href="#install-ansible-and-nginx" aria-hidden="true"><span class="icon icon-link"></span></a>Install Ansible and nginx</h2><p>We would like to add a 3rd party module not available in Ubuntu's nginx packages (<code>nginx_upload_module</code>), which means recompiling nginx. However, we have already created an Ansible Play for compiling and packaging nginx. Ansible is an automation, configuration management and application deployment tool rapidly growing in popularity (it is similar to older projects such as Puppet and Chef).</p><h3 id="ansible"><a href="#ansible" aria-hidden="true"><span class="icon icon-link"></span></a>Ansible</h3><p>Create a new virtualenv and install Ansible:</p><pre><code class="language-console">galaxy@gcc2014:~$ virtualenv ansible
New python executable in ansible/bin/python
Installing setuptools, pip...done.
galaxy@gcc2014:~$ . ansible/bin/activate
(ansible)galaxy@gcc2014:~$ pip install ansible
Downloading/unpacking ansible
  Downloading ansible-1.6.5.tar.gz (651kB): 651kB downloaded
  Running setup.py (path:/home/galaxy/ansible/build/ansible/setup.py) egg_info for package ansible
  ...
Successfully installed ansible paramiko jinja2 PyYAML pycrypto ecdsa markupsafe
Cleaning up...
(ansible)galaxy@gcc2014:~$
</code></pre><p>Fetch the <a href="https://bitbucket.org/natefoo/galaxy-ansible/src/e21adb25a3d585ab476e83f599028d73bf8d408c/build/nginx.yml" target="_blank" rel="noopener noreferrer">nginx build playbook</a>:</p><pre><code class="language-console">(ansible)galaxy@gcc2014:~$ wget https://bitbucket.org/natefoo/galaxy-ansible/raw/e21adb25a3d585ab476e83f599028d73bf8d408c/build/nginx.yml
--2014-06-28 12:07:26--  https://bitbucket.org/natefoo/galaxy-ansible/raw/e21adb25a3d585ab476e83f599028d73bf8d408c/build/nginx.yml
Resolving bitbucket.org (bitbucket.org)... 131.103.20.168, 131.103.20.167
Connecting to bitbucket.org (bitbucket.org)|131.103.20.168|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 6521 (6.4K) [text/plain]
Saving to: ‘nginx.yml’

100%[=========================================&gt;] 6,521       --.-K/s   in 0s

2014-06-28 12:07:26 (974 MB/s) - ‘nginx.yml’ saved [6521/6521]

(ansible)galaxy@gcc2014:~$
</code></pre><h3 id="build-nginx"><a href="#build-nginx" aria-hidden="true"><span class="icon icon-link"></span></a>Build nginx</h3><p>Run the playbook to generate an nginx package:</p><pre><code class="language-console">(ansible)galaxy@gcc2014:~$ ansible-playbook -i localhost, nginx.yml --ask-sudo-pass --extra-vars work_dir=/home/galaxy/nginx-build
sudo password:

PLAY [localhost] **************************************************************

GATHERING FACTS ***************************************************************
ok: [localhost]

  ...

TASK: [Create deb] ************************************************************
changed: [localhost]

PLAY RECAP ********************************************************************
localhost                  : ok=12   changed=3    unreachable=0    failed=0

(ansible)galaxy@gcc2014:~$ deactivate
galaxy@gcc2014:~$
</code></pre><h3 id="install-nginx"><a href="#install-nginx" aria-hidden="true"><span class="icon icon-link"></span></a>Install nginx</h3><p>Uninstall conflicting nginx packages:</p><pre><code class="language-console">galaxy@gcc2014:~$ sudo apt-get remove nginx nginx-core nginx-common
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following packages were automatically installed and are no longer required:
  libcurses-perl libslurmdb-perl libslurmdb26
Use 'apt-get autoremove' to remove them.
The following packages will be REMOVED:
  nginx nginx-common nginx-core
0 upgraded, 0 newly installed, 3 to remove and 12 not upgraded.
After this operation, 1,295 kB disk space will be freed.
Do you want to continue? [Y/n]
(Reading database ... 244985 files and directories currently installed.)
Removing nginx (1.4.6-1ubuntu3) ...
Removing nginx-core (1.4.6-1ubuntu3) ...
Removing nginx-common (1.4.6-1ubuntu3) ...
Processing triggers for man-db (2.6.7.1-1) ...
galaxy@gcc2014:~$
</code></pre><p>Install the new nginx package:</p><pre><code class="language-console">galaxy@gcc2014:~$ sudo dpkg -i /home/galaxy/nginx-build/nginx-galaxy_1.4.7-gxydev+trusty_amd64.deb
Selecting previously unselected package nginx-galaxy.
(Reading database ... 244964 files and directories currently installed.)
Preparing to unpack .../nginx-galaxy_1.4.7-gxydev+trusty_amd64.deb ...
Unpacking nginx-galaxy (1.4.7-gxydev+trusty) ...
Setting up nginx-galaxy (1.4.7-gxydev+trusty) ...
galaxy@gcc2014:~$ sudo mkdir /var/opt/nginx
galaxy@gcc2014:~$
</code></pre><h2 id="install-uwsgi-and-supervisord"><a href="#install-uwsgi-and-supervisord" aria-hidden="true"><span class="icon icon-link"></span></a>Install uWSGI and supervisord</h2><pre><code class="language-console">galaxy@gcc2014:~/galaxy-dist$ sudo apt-get install uwsgi uwsgi-plugin-python supervisor
  ...
After this operation, 4,497 kB of additional disk space will be used.
Do you want to continue? [Y/n]
  ...
galaxy@gcc2014:~/galaxy-dist$ sudo update-rc.d -f uwsgi remove
 Removing any system startup links for /etc/init.d/uwsgi ...
   /etc/rc0.d/K20uwsgi
   /etc/rc1.d/K20uwsgi
   /etc/rc2.d/S20uwsgi
   /etc/rc3.d/S20uwsgi
   /etc/rc4.d/S20uwsgi
   /etc/rc5.d/S20uwsgi
   /etc/rc6.d/K20uwsgi
galaxy@gcc2014:~/galaxy-dist$
</code></pre><h2 id="configure-nginx"><a href="#configure-nginx" aria-hidden="true"><span class="icon icon-link"></span></a>Configure nginx</h2><pre><code class="language-console">galaxy@gcc2014:/opt/nginx/conf$ sudo vi /opt/nginx/conf/nginx.conf
</code></pre><p>Replace the entire contents of the file with:</p><pre><code class="language-nginx">user  gxprod;
worker_processes  1;
daemon off;


events {
    worker_connections  1024;
}


http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;

    keepalive_timeout  65;

    gzip  on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_buffers 16 8k;
    gzip_http_version 1.1;
    gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    client_max_body_size 50g;
    uwsgi_read_timeout 300;

    server {
        listen 80 default_server;
        server_name  localhost;

        # pass to uWSGI by default
        location / {
            uwsgi_pass 127.0.0.1:4001;
            include uwsgi_params;
        }

        # serve static content
        location /static {
            alias /home/gxprod/galaxy-dist/static;
            gzip on;
            gzip_types text/plain text/xml text/javascript text/css application/x-javascript;
            expires 24h;
        }
        location /static/style {
            alias /home/gxprod/galaxy-dist/static/style/blue;
            gzip on;
            gzip_types text/plain text/xml text/javascript text/css application/x-javascript;
            expires 24h;
        }
        location /static/scripts {
            alias /home/gxprod/galaxy-dist/static/scripts/packed;
            gzip on;
            gzip_types text/plain text/javascript application/x-javascript;
            expires 24h;
        }
        location ~ ^/plugins/visualizations/(?&lt;vis_name&gt;.+?)/static/(?&lt;static_file&gt;.*?)$ {
            alias /home/gxprod/galaxy-dist/config/plugins/visualizations/$vis_name/static/$static_file;
        }

        # delegated downloads
        location /_x_accel_redirect {
            internal;
            alias /;
        }

        # delegated uploads
        location /_upload {
            upload_store /home/gxprod/uploads;
            upload_store_access user:rw;
            upload_pass_form_field &quot;&quot;;
            upload_set_form_field &quot;__${upload_field_name}__is_composite&quot; &quot;true&quot;;
            upload_set_form_field &quot;__${upload_field_name}__keys&quot; &quot;name path&quot;;
            upload_set_form_field &quot;${upload_field_name}_name&quot; &quot;$upload_file_name&quot;;
            upload_set_form_field &quot;${upload_field_name}_path&quot; &quot;$upload_tmp_path&quot;;
            upload_pass_args on;
            upload_pass /_upload_done;
        }
        location /_upload_done {
            set $dst /api/tools;
            if ($args ~ nginx_redir=([^&amp;]+)) {
                set $dst $1;
            }
            rewrite &quot;&quot; $dst;
        }
    }
}
</code></pre><h2 id="configure-supervisord"><a href="#configure-supervisord" aria-hidden="true"><span class="icon icon-link"></span></a>Configure supervisord</h2><pre><code class="language-console">galaxy@gcc2014:/opt/nginx/conf$ cd /etc/supervisor/conf.d
galaxy@gcc2014:/etc/supervisor/conf.d$ sudo vi galaxy.conf
</code></pre><p>In the editor, paste:</p><pre><code class="language-ini">[program:nginx]
command     = /opt/nginx/sbin/nginx
directory   = /
umask       = 022
autostart   = true
autorestart = unexpected
startsecs   = 5
exitcodes   = 0
user        = root

[program:galaxy_uwsgi]
command         = /usr/bin/uwsgi --plugin python --ini-paste /home/gxprod/galaxy-dist/universe_wsgi.ini
directory       = /home/gxprod/galaxy-dist
umask           = 022
autostart       = true
autorestart     = true
startsecs       = 10
user            = gxprod
environment     = PATH=/home/gxprod/venv:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin,PYTHON_EGG_CACHE=/home/gxprod/.python-eggs,PYTHONPATH=/home/gxprod/galaxy-dist/eggs/PasteDeploy-1.5.0-py2.7.egg
numprocs        = 1
stopsignal      = INT

[program:handler]
command         = /home/gxprod/venv/bin/python ./scripts/paster.py serve universe_wsgi.ini --server-name=handler%(process_num)s --pid-file=/home/gxprod/handler%(process_num)s.pid --log-file=/home/gxprod/handler%(process_num)s.log
directory       = /home/gxprod/galaxy-dist
process_name    = handler%(process_num)s
numprocs        = 2
umask           = 022
autostart       = true
autorestart     = true
startsecs       = 15
user            = gxprod
environment     = PYTHON_EGG_CACHE=/home/gxprod/.python-eggs,SGE_ROOT=/var/lib/gridengine

[group:galaxy]
programs = handler
</code></pre><h2 id="start-galaxy-and-nginx"><a href="#start-galaxy-and-nginx" aria-hidden="true"><span class="icon icon-link"></span></a>Start Galaxy and nginx</h2><pre><code class="language-console">galaxy@gcc2014:/etc/supervisor/conf.d$ sudo supervisorctl update
galaxy_uwsgi: added process group
handler: added process group
nginx: added process group
galaxy@gcc2014:/etc/supervisor/conf.d$ sudo supervisorctl status
galaxy:handler0                  STARTING
galaxy:handler1                  STARTING
galaxy_uwsgi                     STARTING
nginx                            STARTING
</code></pre><p>You can now visit your Galaxy server at - <a href="http://localhost/" target="_blank" rel="noopener noreferrer">http://localhost/</a>.</p><h2 id="references-3"><a href="#references-3" aria-hidden="true"><span class="icon icon-link"></span></a>References</h2><ul><li><a href="http://uwsgi-docs.readthedocs.org/en/latest/" target="_blank" rel="noopener noreferrer">uWSGI</a></li><li><a href="http://supervisord.org/" target="_blank" rel="noopener noreferrer">Supervisor</a></li></ul><h2 id="load-external-data-in-a-data-library"><a href="#load-external-data-in-a-data-library" aria-hidden="true"><span class="icon icon-link"></span></a>Load external data in a data library</h2><p>First, place some data in the import directory:</p><pre><code class="language-console">galaxy@gcc2014:~$ sudo -iu gxprod
gxprod@gcc2014:~$ mkdir library/run1
gxprod@gcc2014:~/library/run1$ cp galaxy-dist/test-data
</code></pre><p>Next, import the data in the Galaxy UI:</p><ul><li>Register an account that matches the address you set in <code>admin_users</code></li><li>Click <strong>Admin</strong> from the masthead</li><li>Click <strong>Manage data libraries</strong> from the left panel</li><li>Click <strong>Create new data library</strong></li><li>Enter a Name and Description (and optionally a Synopsis) and click <strong>Create</strong></li><li>Click <strong>Add datasets</strong>:</li><li>On the upload form:<ul><li>From the <strong>Upload option:</strong> menu, select <strong>Upload directory of files</strong></li><li>In the <strong>File Format:</strong> field, enter <strong>fastqsanger</strong></li><li>From <strong>Server Directory</strong>, select <strong>run1</strong></li><li>From the <strong>Copy data into Galaxy?</strong> menu, select <strong>Link to files without copying into Galaxy</strong></li><li>Click <strong>Upload to library</strong></li></ul></li><li>Click the <strong>Shared Data</strong> menu in the masthead and select <strong>Data Libraries</strong></li><li>Click on the library you created</li><li>Select some datasets, then click <strong>Go</strong> to import them to your history</li></ul><p>Galaxy will use the data in its original location, and does not make additional copies for each user who imports the data. Access controls can be set on libraries and their contacts to limit them to certain users or groups.</p><h1 id="extra-activities-time-and-interest-permitting"><a href="#extra-activities-time-and-interest-permitting" aria-hidden="true"><span class="icon icon-link"></span></a>Extra Activities (Time and Interest Permitting)</h1><h2 id="using-slurm-or-torquepbs"><a href="#using-slurm-or-torquepbs" aria-hidden="true"><span class="icon icon-link"></span></a>Using Slurm or Torque/PBS</h2><p>The job configuration in <code>job_conf.xml</code> we used above included commented-out configurations for using Torque and Slurm. To use one of these other resource managers:</p><pre><code class="language-console">galaxy@gcc2014:~$ sudo -u gxprod vi ~gxprod/galaxy-dist/job_conf.xml
  ... modify XML comments ...
galaxy@gcc2014:~$ sudo supervisorctl restart galaxy:*
</code></pre><h2 id="shipping-jobs-to-remote-resources-with-pulsar"><a href="#shipping-jobs-to-remote-resources-with-pulsar" aria-hidden="true"><span class="icon icon-link"></span></a>Shipping Jobs to Remote Resources with Pulsar</h2><p>Pulsar (formerly called the LWR) allows Galaxy jobs to be staged to remote clusters without shared disk.</p><p>We only have one VM for this workshop - so we are going to simulate this by shipping <code>gxprod</code> jobs in the Galaxy instance we just configured back to a Pulsar server running as the <code>galaxy</code> user.</p><h3 id="installing-pulsar-with-ansible"><a href="#installing-pulsar-with-ansible" aria-hidden="true"><span class="icon icon-link"></span></a>Installing Pulsar with Ansible</h3><pre><code>galaxy@gcc2014:~$ . ansible/bin/activate
(ansible)galaxy@gcc2014:~$ hg clone https://bitbucket.org/natefoo/galaxy-ansible
(ansible)galaxy@gcc2014:~$ cd galaxy-ansible
(ansible)galaxy@gcc2014:~/galaxy-ansible$ ansible-playbook -i localhost, local.yml -e &quot;pulsar_server_dir=/home/galaxy/pulsar pulsar_configure_galaxy=False galaxy_server_dir=/home/galaxy/galaxy-dist pulsar_private_token=puls0rt0ken&quot; --tags pulsar
(ansible)galaxy@gcc2014:~/galaxy-ansible$ deactivate
galaxy@gcc2014:~/galaxy-ansible$ cd ~/pulsar
galaxy@gcc2014:~/pulsar$ ./run.sh -m paster --daemon
Entering daemon mode
galaxy@gcc2014:~/pulsar$
</code></pre><p>Next up we will configure Galaxy to submit some jobs to this Pulsar server. Pulsar isn't available in Galaxy's <code>stable</code> branch yet however so we are going to checkout the <code>default</code> branch. (Older versions of Galaxy can target an LWR server for similar functionality - but we would encourage everyone to use Pulsar going forward.)</p><pre><code class="language-console">galaxy@gcc2014:~$ sudo -iu gxprod
gxprod@gcc2014:~$ cd galaxy-dist/
gxprod@gcc2014:~/galaxy-dist$ hg checkout default
350 files updated, 0 files merged, 58 files removed, 0 files unresolved
gxprod@gcc2014:~/galaxy-dist$ vi job_conf.xml
</code></pre><p>Copy the following contents - it routes one tool's jobs to the Pulsar server setup above.</p><pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;job_conf&gt;
    &lt;plugins workers=&quot;2&quot;&gt;
        &lt;plugin id=&quot;gridengine&quot; type=&quot;runner&quot; load=&quot;galaxy.jobs.runners.drmaa:DRMAAJobRunner&quot;/&gt;
    &lt;plugin id=&quot;pulsar_rest&quot; type=&quot;runner&quot; load=&quot;galaxy.jobs.runners.pulsar:PulsarRESTJobRunner&quot; /&gt;
    &lt;/plugins&gt;
    &lt;handlers default=&quot;handlers&quot;&gt;
        &lt;handler id=&quot;handler0&quot; tags=&quot;handlers&quot;/&gt;
        &lt;handler id=&quot;handler1&quot; tags=&quot;handlers&quot;/&gt;
    &lt;/handlers&gt;
    &lt;destinations default=&quot;gridengine&quot;&gt;
        &lt;destination id=&quot;gridengine&quot; runner=&quot;gridengine&quot;/&gt;
    &lt;destination id=&quot;local_pulsar&quot; runner=&quot;pulsar_rest&quot;&gt;
      &lt;param id=&quot;url&quot;&gt;http://localhost:8913/&lt;/param&gt;
      &lt;param id=&quot;private_token&quot;&gt;puls0rt0ken&lt;/param&gt;
    &lt;/destination&gt;
    &lt;/destinations&gt;
    &lt;limits&gt;
        &lt;limit type=&quot;registered_user_concurrent_jobs&quot;&gt;2&lt;/limit&gt;
        &lt;limit type=&quot;unregistered_user_concurrent_jobs&quot;&gt;1&lt;/limit&gt;
        &lt;limit type=&quot;job_walltime&quot;&gt;24:00:00&lt;/limit&gt;
    &lt;/limits&gt;
    &lt;tools&gt;
      &lt;tool id=&quot;cat1&quot; destination=&quot;local_pulsar&quot; /&gt;
    &lt;/tools&gt;
&lt;/job_conf&gt;
</code></pre><p>Now as the <code>galaxy</code> user restart the job handlers</p><pre><code class="language-console">gxprod@gcc2014:~/galaxy-dist$ exit
galaxy@gcc2014:~$ sudo supervisorctl restart galaxy:*
[sudo] password for galaxy:
handler0: stopped
handler1: stopped
handler0: started
handler1: started
</code></pre><p>Open Galaxy, upload a file, and use the &quot;Concatenate Datasets&quot; tool on it to test Pulsar.</p><h2 id="additional-topic-candidates"><a href="#additional-topic-candidates" aria-hidden="true"><span class="icon icon-link"></span></a>Additional topic candidates</h2><ul><li>Dynamic job resource assignment</li></ul><h1 id="transcripts"><a href="#transcripts" aria-hidden="true"><span class="icon icon-link"></span></a>Transcripts</h1><h2 id="adding-local-data-by-hand"><a href="#adding-local-data-by-hand" aria-hidden="true"><span class="icon icon-link"></span></a>Adding local data by hand</h2><pre><code class="language-console">galaxy@gcc2014:~$ mkdir -p local_data/sacCer2/seq/work
galaxy@gcc2014:~$ cd local_data/sacCer2/seq/work
galaxy@gcc2014:~/local_data/sacCer2/seq/work$ wget http://hgdownload.cse.ucsc.edu/goldenPath/sacCer2/bigZips/chromFa.tar.gz
--2014-06-29 14:09:25--  http://hgdownload.cse.ucsc.edu/goldenPath/sacCer2/bigZips/chromFa.tar.gz
Resolving hgdownload.cse.ucsc.edu (hgdownload.cse.ucsc.edu)... 128.114.119.163
Connecting to hgdownload.cse.ucsc.edu (hgdownload.cse.ucsc.edu)|128.114.119.163|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3823174 (3.6M) [application/x-gzip]
Saving to: ‘chromFa.tar.gz’

100%[==================================================&gt;] 3,823,174   1.01MB/s   in 4.3s

2014-06-29 14:09:29 (859 KB/s) - ‘chromFa.tar.gz’ saved [3823174/3823174]

galaxy@gcc2014:~/local_data/sacCer2/seq/work$ tar zxvf chromFa.tar.gz
2micron.fa
chrI.fa
chrII.fa
chrIII.fa
chrIV.fa
chrIX.fa
chrM.fa
chrV.fa
chrVI.fa
chrVII.fa
chrVIII.fa
chrX.fa
chrXI.fa
chrXII.fa
chrXIII.fa
chrXIV.fa
chrXV.fa
chrXVI.fa
galaxy@gcc2014:~/local_data/sacCer2/seq/work$ cat *.fa &gt;../sacCer2.fa
galaxy@gcc2014:~/local_data/sacCer2/seq/work$ cd ../..
galaxy@gcc2014:~/local_data/sacCer2$ mkdir bwa_index
galaxy@gcc2014:~/local_data/sacCer2$ cd bwa_index
galaxy@gcc2014:~/local_data/sacCer2/bwa_index$ ln -s ../seq/sacCer2.fa
galaxy@gcc2014:~/local_data/sacCer2/bwa_index$ ~/tool_deps/bwa/0.5.9/devteam/package_bwa_0_5_9/ec2595e4d313/bin/bwa index -a bwtsw sacCer2.fa
[bwa_index] Pack FASTA... 0.18 sec
[bwa_index] Reverse the packed sequence... 0.06 sec
[bwa_index] Construct BWT for the packed sequence...
[BWTIncConstructFromPacked] 10 iterations done. 2968163 characters processed.
[BWTIncConstructFromPacked] 20 iterations done. 5189523 characters processed.
[BWTIncConstructFromPacked] 30 iterations done. 6938035 characters processed.
[BWTIncConstructFromPacked] 40 iterations done. 8313523 characters processed.
[BWTIncConstructFromPacked] 50 iterations done. 9394739 characters processed.
[BWTIncConstructFromPacked] 60 iterations done. 10243827 characters processed.
[BWTIncConstructFromPacked] 70 iterations done. 10909811 characters processed.
[BWTIncConstructFromPacked] 80 iterations done. 11431331 characters processed.
[BWTIncConstructFromPacked] 90 iterations done. 11838867 characters processed.
[BWTIncConstructFromPacked] 100 iterations done. 12156547 characters processed.
[bwt_gen] Finished constructing BWT in 101 iterations.
[bwa_index] 3.30 seconds elapse.
[bwa_index] Construct BWT for the reverse packed sequence...
[BWTIncConstructFromPacked] 10 iterations done. 2968163 characters processed.
[BWTIncConstructFromPacked] 20 iterations done. 5189523 characters processed.
[BWTIncConstructFromPacked] 30 iterations done. 6938035 characters processed.
[BWTIncConstructFromPacked] 40 iterations done. 8313523 characters processed.
[BWTIncConstructFromPacked] 50 iterations done. 9394739 characters processed.
[BWTIncConstructFromPacked] 60 iterations done. 10243827 characters processed.
[BWTIncConstructFromPacked] 70 iterations done. 10909811 characters processed.
[BWTIncConstructFromPacked] 80 iterations done. 11431331 characters processed.
[BWTIncConstructFromPacked] 90 iterations done. 11838867 characters processed.
[BWTIncConstructFromPacked] 100 iterations done. 12156547 characters processed.
[bwt_gen] Finished constructing BWT in 101 iterations.
[bwa_index] 3.41 seconds elapse.
[bwa_index] Update BWT... 0.08 sec
[bwa_index] Update reverse BWT... 0.07 sec
[bwa_index] Construct SA from BWT and Occ... 1.03 sec
[bwa_index] Construct SA from reverse BWT and Occ... 1.02 sec
galaxy@gcc2014:~/local_data/sacCer2/bwa_index$ cd ~/galaxy-dist/tool-data
galaxy@gcc2014:~/galaxy-dist/tool-data$ vi bwa_index.loc
  ...
  sacCer2byhand   sacCer2 S. cerevisiae June 2008 (index by hand) /home/galaxy/local_data/sacCer2/bwa_index/sacCer2.fa
  ...
galaxy@gcc2014:~/galaxy-dist/tool-data$ cd ..
galaxy@gcc2014:~/galaxy-dist$ vi tool_data_table_conf.xml
  ...
  &lt;table name=&quot;bwa_indexes&quot; comment_char=&quot;#&quot;&gt;
      &lt;columns&gt;value, dbkey, name, path&lt;/columns&gt;
      &lt;file path=&quot;tool-data/bwa_index.loc&quot; /&gt;
  &lt;/table&gt;
  ...
galaxy@gcc2014:~/galaxy-dist$ sh run.sh
  ...
</code></pre></div></div></article><footer data-v-4b3455de data-v-5377d35c><!----></footer><footer class="static-footer markdown"><p>The Galaxy Project is supported in part by NSF, NHGRI, The Huck Institutes of the Life Sciences, The Institute for CyberScience at Penn State, and Johns Hopkins University.</p>
</footer></section></div>
    <script src="/assets/js/app.0690a31c.js" defer></script><script src="/assets/js/page--src--templates--vue-article-vue.d9a0c32e.js" defer></script><script src="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--admin-walkthrough--index-md.244e6bc0.js" defer></script>
  </body>
</html>
