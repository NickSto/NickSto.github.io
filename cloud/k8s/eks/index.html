<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Deploy an Instance of Galaxy on Amazon Elastic Kubernetes Service - Galaxy Community Hub</title><meta name="gridsome:hash" content="91d4a83f9855c194893a1f5e294057505b0cd33d"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="All about Galaxy and its community."><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.7d4a227415c9d9b704d56a079d49a3e1.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.7d4a227415c9d9b704d56a079d49a3e1.png"><link rel="preload" href="/assets/css/0.styles.e1e25242.css" as="style"><link rel="preload" href="/assets/js/app.0690a31c.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--article-vue.6d736ff4.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.9b913011.js"><link rel="prefetch" href="/assets/js/page--src--pages--blog-vue.c32e3571.js"><link rel="prefetch" href="/assets/js/page--src--pages--careers-vue.85d2fb31.js"><link rel="prefetch" href="/assets/js/page--src--pages--data-explorer-vue.8aa3e295.js"><link rel="prefetch" href="/assets/js/page--src--pages--events--archive-vue.1426fe7f.js"><link rel="prefetch" href="/assets/js/page--src--pages--events--cofests--papercuts-vue.ab928745.js"><link rel="prefetch" href="/assets/js/page--src--pages--events--cofests-vue.1e8420fc.js"><link rel="prefetch" href="/assets/js/page--src--pages--events--webinars-vue.5d6fb146.js"><link rel="prefetch" href="/assets/js/page--src--pages--events-vue.cd4ed3c8.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.a143f0a2.js"><link rel="prefetch" href="/assets/js/page--src--pages--news-vue.2f002266.js"><link rel="prefetch" href="/assets/js/page--src--pages--search-vue.23e742ea.js"><link rel="prefetch" href="/assets/js/page--src--pages--tests-vue.3b995c11.js"><link rel="prefetch" href="/assets/js/page--src--pages--use-vue.7c5b8683.js"><link rel="prefetch" href="/assets/js/page--src--templates--platform-vue.91145b17.js"><link rel="prefetch" href="/assets/js/page--src--templates--vue-article-vue.d9a0c32e.js"><link rel="prefetch" href="/assets/js/vendors~page--src--pages--careers-vue~page--src--pages--use-vue~page--src--templates--article-vue~pa~efade918.92a3a9c1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--index-md.b8e1f92a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--md--imgtests--imgdir--index-md.5311083e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--partials--index-md.b6884022.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--imgtests--imgdir--index-md.1ee4281c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--imgtests--index-md.fe03c46f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--index-md.05d8aec6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--syntaxtests--index-md.e7b48256.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--0-tests--vue-remark--syntaxtests--reldir--index-md.4093d68b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--capacity-planning--index-md.8813525b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--config--index-md.aafe943e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--config--performance--cluster--legacy--index-md.3da8719f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--datatypes--index-md.9b672175.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--disk-quotas--index-md.44f752e9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--faq--index-md.3851dd50.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--internals--data-model--index-md.6d581759.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--internals--galaxy-ops--index-md.a3b0d0af.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--ten-simple-steps-galaxy-as-a-service--index-md.699b2e0d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--tools--tool-config-syntax--index-md.208f876a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--admin--tools--writing-tests--index-md.b2caa913.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--allocation--index-md.de3e7728.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--faq--index-md.ac3b79f2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--index-md.328857f9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--ssh--index-md.d92fc074.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloud--jetstream--troubleshooting--index-md.7c074dc2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--aws--capacity-planning--index-md.01a397fa.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--aws--getting-started--index-md.acdcb61b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--aws--index-md.824830b5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--building--index-md.10fb8489.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--capacity-planning--index-md.e2d98e61.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--cluster-types--index-md.df053139.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--customizing--index-md.fb1f931d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--faq--index-md.b2fab4e5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--getting-started--index-md.d71b41b2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--getting-started--pre-201703--index-md.f5a4c4d0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--hadoop--index-md.d7a6d969.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--ht-condor--index-md.31bcf5d4.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--index-md.b7b22e1d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--openstack--index-md.d78cb425.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--services--index-md.f2027d09.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--sharing--index-md.cd3d2d6f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--troubleshooting--index-md.fc1a0be3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--cloudman--userdata--index-md.e4d95203.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--future--index-md.e75566ea.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--index-md.a767ff80.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2012-07-09--index-md.66c1654b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2012-07-27--index-md.c6d537c1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2012-09-19--index-md.544a522a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2012-11-14--index-md.4746a5d0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2013-01-16--index-md.d1551883.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2013-03-20--index-md.5094871c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2013-05-15--index-md.1897abfc.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2013-11-20--index-md.c4d4ced5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-02-19--index-md.311ef2ba.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-04-16--index-md.0b281218.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-06-18--index-md.7c255863.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-08-20--index-md.43ba73c2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2015-10-15--index-md.bc11b58b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2016-02-18--index-md.1a182ba1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2016-04-21--index-md.5e9eea61.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2016-06-16--index-md.b1295236.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--2016-08-18--index-md.d8fbe7ba.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--index-md.43055631.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--meetups--webinar-tech--index-md.a44b91e1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--surveys--2012--index-md.c7a0a096.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--surveys--2014--index-md.46c5bc59.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--community--galaxy-admins--surveys--index-md.34247339.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--data--index-md.46e24851.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--datafiles--index-md.77545970.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--architecture--index-md.55f07291.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--bitbucket--index-md.718bcb6c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--css--index-md.281229bf.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--getting-started--index-md.497082a2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--index-md.392b2e76.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--jsa--index-md.ba998e94.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--mercurial--index-md.14a2dad8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--develop--security-tool-tips--index-md.17796bc0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--galaxy-project--index-md.0de41023.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--index-md.d89e2857.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--papers--index-md.4bdf7b3e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--posters--index-md.7e825096.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--presentations--index-md.084c96b9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--documents--videos--index-md.c984f7ce.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--advanced-session--index-md.191fe1da.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--basics-session--index-md.35c32703.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--index-md.8acf4593.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--logistics--index-md.37d0ac9b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--publicity--index-md.7f2eec38.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--admin-training-2016--registration--index-md.d22dcedd.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--abstracts--index-md.bbbf6ae8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--index-md.cb62d683.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--key-dates--index-md.07f8d6b1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--lightning-talks--index-md.72ab128d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--logistics--index-md.c3eeb3dd.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--organizing-committee--index-md.f7a53fcd.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--photos--index-md.d5102197.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--breakouts--automation-strategies--index-md.6972b31d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--breakouts--bioinformatics-training--index-md.648f14ff.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--breakouts--end-users--index-md.ff776d4f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--breakouts--workflows-and-api--index-md.540ad6ba.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--program--index-md.d233185c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--promotion--index-md.212eb34b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--register--index-md.b4c4f57b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--sponsorships--index-md.d0539386.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2012--training-day--index-md.2ee4bcd3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--abstracts--index-md.1aa46f9f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--abstracts--posters--index-md.a8b0ee54.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--abstracts--talks--index-md.b3ee75dc.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--clinical-use-hpc-file-systems--index-md.3fc5e2ed.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--galaxy-admins--index-md.2f878aaa.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--galaxy-blast--index-md.5305db66.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--galaxy-professionals--index-md.dcbf6370.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--index-md.3abd720e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--proteomics--index-md.f4d7daaf.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--public-galaxy-servers--index-md.b346729f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--bof--tool-developers--index-md.4365e2e3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--index-md.d58334f2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--key-dates--index-md.a3f7c6b8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--lightning--index-md.180bd3c7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--logistics--index-md.c889273c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--organizers--index-md.2f551bcb.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--photos--index-md.38ee0e51.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--program--index-md.f2c70270.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--promotion--index-md.1e5aadf9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--register--index-md.99382e6b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--sponsorships--index-md.1e82df1d.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--advance-tool-data--index-md.02e350f8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--api--index-md.23e9c64f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--index-md.7b6606de.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--intro-tool-data--index-md.1893d923.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2013--training-day--vms--index-md.eb7d2783.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--abstracts--index-md.19ebb120.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--abstracts--posters--index-md.19e77da9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--abstracts--talks--index-md.69b1844f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--branch-release-merge--index-md.e83f529b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--galaxy-admins--index-md.4c5b1df3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--galaxy-end-users--index-md.6b3ff393.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--galaxy-training-network--index-md.85db1b6f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--heterogeneous--index-md.26797010.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--index-md.ab231746.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--bofs--using-galaxy-ui-overview--index-md.3f0318f2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--hackathon--index-md.f1b7f383.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--index-md.894a1ae1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--key-dates--index-md.d3d9965a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--lightning--index-md.268064be.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--logistics--index-md.033eda0f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--organizers--index-md.73259cdb.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--photos--index-md.3ee7fbac.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--program--index-md.79995b28.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--promotion--index-md.59d9587a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--register--index-md.6cf374d9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--sponsor-exhibit--index-md.2aa46fae.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--admin-walkthrough--index-md.244e6bc0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--api--index-md.3aefd41a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--data-managers--index-md.ea9c133f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--index-md.1c4f2cb1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2014--training-day--vms--index-md.3a12839f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--cwl--index-md.29f1b923.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--data-management-challenges--index-md.5d4d1ee7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--data-splitting-and-parallelism--index-md.31c7354c.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--elixir--index-md.e49743fc.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--extended-workflow--index-md.ca7910bb.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--fots--index-md.eea6d2b7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--galaxy-admins--index-md.8df0d322.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--galaxy-community-uk--index-md.69eb15c2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--galaxy-scientists--index-md.3dd577a5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--galaxy-training-network--index-md.d54633c6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--bofs--index-md.d03261e3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--data-hack-roundup--index-md.581fdf4b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--header--index-md.72afdfea.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2015--index-md.adc3dfb6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2016--bofs--index-md.e539350a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--abstracts--index-md.7322e906.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--childcare--index-md.416182d5.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--cofest--index-md.ab0c9286.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--conduct--index-md.e979f793.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--faq--index-md.e8fa4530.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--index-md.876ea583.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--organizers--index-md.23f78b02.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--promotion--index-md.85444af0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--registration--index-md.5ed4fbf8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--sponsors--index-md.482f848f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--training--index-md.0709a7f7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gcc-2019--venue--index-md.238012f6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--abstracts--index-md.dc64d26a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--childcare--index-md.234bf37e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--code-of-conduct--index-md.3a181b70.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--collaboration--index-md.003698d8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--faq--index-md.6b9a5e1b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--icebreaker--index-md.bd0460e3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--index-md.139334ac.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--keynotes--index-md.add6f018.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--organizers--index-md.8f9602b8.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--promotion--index-md.55ce8ac1.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--register--index-md.0b3372c2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--sponsors--index-md.4546b9bb.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--training--index-md.9dbe3953.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--gccbosc-2018--venue--index-md.1408cfc7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--germany-2014--index-md.4533e9c6.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--germany-2016--index-md.da0aae7f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--sg-2014--index-md.38dcd568.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--sg-2016--index-md.80c32555.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--switzerland-2014--index-md.176fc9a2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--switzerland-2014--trainingday--index-md.774b7249.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--events--switzerland-2016--index-md.c5ea9a89.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--example--vue-remark--index-md.9e4f4358.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--faqs--index-md.a910449f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--galaxy-updates--2013-06--index-md.3a1cff95.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--galaxy-updates--2013-07--index-md.bb5876b9.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--icons--index-md.9a000132.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--index-md.3b38f73f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--logos--index-md.aa44aae7.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--news-graphics--index-md.05ad5cba.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--photos--index-md.1d8f64ab.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--images--screenshots--index-md.a201402f.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--basic-editing--index-md.d08ab1a3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--basic-editing--workflow-editor-unannotated--index-md.e72b5147.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--extract--index-md.c7671571.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--tool-panel--index-md.ac20782a.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--advanced-workflow--variables--index-md.3e2afdd3.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--faq--index-md.09b46d8e.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--galaxy-pages--index-md.ff01861b.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--learn--interval-operations--index-md.e1c040b2.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--main--faq--index-md.0e15bbd0.js"><link rel="prefetch" href="/assets/js/vue-remark--build--content-vue--tools--requirements--index-md.d2018317.js"><link rel="stylesheet" href="/assets/css/0.styles.e1e25242.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout" data-v-340f7abc><header id="masthead"><nav class="navbar container justify-content-center navbar-dark bg-transparent navbar-expand-lg"><a href="/" target="_self" class="navbar-brand router-link-active"><img id="masthead-logo" src="/images/galaxy_logo_hub_white.svg" alt="Galaxy Community Hub" height="30"></a><button type="button" aria-label="Toggle navigation" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button><div id="nav-collapse" class="navbar-collapse collapse" style="display:none;"><ul class="navbar-nav"><li class="nav-item"><a href="/use/" target="_self" class="nav-link">Use</a></li><li class="nav-item b-nav-dropdown dropdown"><a role="button" aria-haspopup="true" aria-expanded="false" href="#" target="_self" class="nav-link dropdown-toggle"><span>Learn</span></a><ul tabindex="-1" class="dropdown-menu"><li role="presentation"><a href="/learn/" role="menuitem" target="_self" class="dropdown-item">How to use Galaxy</a></li><li role="presentation"><a role="menuitem" href="https://training.galaxyproject.org/" target="_self" class="dropdown-item">Teach with Galaxy</a></li></ul></li><li class="nav-item b-nav-dropdown dropdown"><a role="button" aria-haspopup="true" aria-expanded="false" href="#" target="_self" class="nav-link dropdown-toggle"><span>Community</span></a><ul tabindex="-1" class="dropdown-menu"><li role="presentation"><a href="/community/" role="menuitem" target="_self" class="dropdown-item">About</a></li><li role="presentation"><a href="/events/" role="menuitem" target="_self" class="dropdown-item">Events</a></li><li role="presentation"><a href="/news/" role="menuitem" target="_self" class="dropdown-item">News</a></li><li role="presentation"><a href="/blog/" role="menuitem" target="_self" class="dropdown-item">Blog</a></li><li role="presentation"><a href="/publication-library/" role="menuitem" target="_self" class="dropdown-item">Publications</a></li><li role="presentation"><a href="/galaxy-project/statistics/" role="menuitem" target="_self" class="dropdown-item">Stats</a></li><li role="presentation"><a href="/careers/" role="menuitem" target="_self" class="dropdown-item">Careers</a></li></ul></li><li class="nav-item b-nav-dropdown dropdown"><a role="button" aria-haspopup="true" aria-expanded="false" href="#" target="_self" class="nav-link dropdown-toggle"><span>Deploy &amp; Develop</span></a><ul tabindex="-1" class="dropdown-menu"><li role="presentation"><a href="/admin/get-galaxy/" role="menuitem" target="_self" class="dropdown-item">Install Galaxy</a></li><li role="presentation"><a href="/admin/" role="menuitem" target="_self" class="dropdown-item">Server administration</a></li><li role="presentation"><a href="/tools/" role="menuitem" target="_self" class="dropdown-item">Tools</a></li><li role="presentation"><a href="/develop/api/" role="menuitem" target="_self" class="dropdown-item">Working with the API</a></li><li role="presentation"><a href="/develop/" role="menuitem" target="_self" class="dropdown-item">Contributing</a></li><li role="presentation"><a href="/docs/" role="menuitem" target="_self" class="dropdown-item">Code documentation</a></li></ul></li><li class="nav-item b-nav-dropdown dropdown"><a role="button" aria-haspopup="true" aria-expanded="false" href="#" target="_self" class="nav-link dropdown-toggle"><span>Support</span></a><ul tabindex="-1" class="dropdown-menu"><li role="presentation"><a href="/support/" role="menuitem" target="_self" class="dropdown-item">FAQ</a></li><li role="presentation"><a role="menuitem" href="https://help.galaxyproject.org/" target="_self" class="dropdown-item">Galaxy Help Forum</a></li></ul></li><li class="nav-item"><a href="/jxtx/" target="_self" class="nav-link">@jxtx</a></li></ul><ul class="navbar-nav ml-auto"><li class="form-inline"><form action="/search/" method="get" class="form-inline"><input id="search-input" name="q" type="text" placeholder="Search Galaxy" value="" class="mr-sm-2 form-control form-control-sm"><button type="submit" class="btn my-2 my-sm-0 btn-secondary btn-sm"><span class="fa fa-search"></span></button></form></li></ul></div></nav></header><section id="maincontainer" class="container"><header data-v-1944b8d1 data-v-340f7abc><a href="/" class="link active" data-v-1944b8d1>← Back to Home</a><!----><h1 class="title" data-v-1944b8d1>Deploy an Instance of Galaxy on Amazon Elastic Kubernetes Service</h1><!----><section class="metadata freetext" data-v-1944b8d1><!----><!----><!----></section><!----><!----></header><div class="content markdown" data-v-340f7abc><div class="toc-wrapper col-md-3">
<ul>
<li><a href="#create-a-cluster">Create a Cluster</a></li>
<li><a href="#install-helm">Install Helm</a></li>
<li><a href="#deploy-galaxy-on-the-cluster">Deploy Galaxy on the Cluster</a></li>
<li><a href="#access-galaxy-instance">Access Galaxy Instance</a></li>
<li><a href="#delete-eks-cluster">Delete EKS Cluster</a></li>
</ul>
</div>
<div class="body-wrapper col-md-9">
<p>We break the steps of deploying Galaxy on
<a href="https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html" target="_blank" rel="noopener noreferrer">Amazon Elastic Kubernetes Service (Amazon EKS)</a>
into the following sections:</p>
<ul>
<li><a href="#create-a-cluster">Create a k8s cluster</a>;</li>
<li><a href="#install-helm">Install Helm</a>;</li>
<li><a href="#deploy-galaxy-on-the-cluster">Deploy an instance of Galaxy using Helm charts</a>;</li>
<li><a href="#access-galaxy-instance">Access the deployed Galaxy instance</a>;</li>
<li><a href="#delete-eks-cluster">Delete cluster</a>.</li>
</ul>
<h1 id="create-a-cluster"><a href="#create-a-cluster" aria-hidden="true"><span class="icon icon-link"></span></a>Create a Cluster</h1>
<p>Amazon EKS offers two methods for creating a cluster: either via console,
or by using a tool named <code>eksctl</code>.</p>
<p>When creating a cluster, you will need to make the following
decisions, taking note of the choices you make:</p>
<ol>
<li>
<p>Choose a <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html" target="_blank" rel="noopener noreferrer">region</a>:
the region selected must have Amazon Secure Token Service (STS)<br>
activated for your account. You do not necessarily have STS activate for all
regions under your account; please consult with your account admin. If you
choose a region where STS is not activated for your account, you may get an
error message as the following:</p>
<pre><code class="language-bash">AWS::EKS::Cluster/ControlPlane: CREATE_FAILED – 
STS is not activated in this region for account:0123456789. 
Your account administrator can activate STS in this region using the IAM Console. 
</code></pre>
</li>
<li>Choose an <a href="https://aws.amazon.com/ec2/instance-types/" target="_blank" rel="noopener noreferrer">instance type</a>;
two points to consider: first, not necessarily all instance types are available in
all regions; therefore, choose an instance type that is available in the
zone where you have STS activated. Second, choose an instance with a "reasonable"
amount of resources, as you will be running multiple pods within that instance,
and if you do not have enough resources, your pods will fail to schedule. For
instance, avoid instance types such as <code>a1.medium</code>.</li>
<li>Cluster node count. While you can deploy Galaxy on a k8s cluster with
multiple nodes, in the following we discuss how to deploy on a cluster with
a single node, as there is an additional step for deployment on a multi-node
cluster that will be discussed separately.</li>
</ol>
<p>To create a cluster on on EKS, you may follow these tutorials:</p>
<ul>
<li>via console; read <a href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started-console.html" target="_blank" rel="noopener noreferrer">how to start a cluster using the console</a>;</li>
<li>via the <code>eksctl</code> CLI tool; read <a href="https://docs.aws.amazon.com/eks/latest/userguide/getting-started-eksctl.html" target="_blank" rel="noopener noreferrer">how to start a cluster using eksctl</a></li>
</ul>
<p>If you have used the <code>eksctl</code> tool to start a cluster, you may have run a
command similar to the following, which creates a cluster with <code>1</code> node of
<code>m5.4xlarge</code> instance type in <code>us-east-1</code> zone:</p>
<pre><code class="language-bash">$ eksctl create cluster --name CLUSTER-NAME --version 1.13 --nodegroup-name standard-workers --node-type m5.4xlarge --nodes 1 --nodes-min 1 --nodes-max 1 --node-ami auto --region us-east-1
</code></pre>
<p>Note that the instance type and zone values are arbitrary and you may choose any
values following the afore-discussed points.</p>
<p>If the command execution is successful, you may see an output as:</p>
<pre><code class="language-bash">[ℹ]  using region us-east-1
[ℹ]  setting availability zones to [us-east-1b us-east-1c]
[ℹ]  subnets for us-east-1b - public:192.168.0.0/19 private:192.168.64.0/19
[ℹ]  subnets for us-east-1c - public:192.168.32.0/19 private:192.168.96.0/19
[ℹ]  nodegroup "standard-workers" will use "ami-..." [AmazonLinux2/1.13]
[ℹ]  using Kubernetes version 1.13
[ℹ]  creating EKS cluster "CLUSTER-NAME" in "us-east-1" region
[ℹ]  will create 2 separate CloudFormation stacks for cluster itself and the initial nodegroup
[ℹ]  if you encounter any issues, check CloudFormation console or try 'eksctl utils describe-stacks --region=us-east-1 --name=CLUSTER-NAME'
[ℹ]  2 sequential tasks: { create cluster control plane "CLUSTER-NAME", create nodegroup "standard-workers" }
[ℹ]  building cluster stack "eksctl-CLUSTER-NAME-cluster"
[ℹ]  deploying stack "eksctl-CLUSTER-NAME-cluster"
[ℹ]  building nodegroup stack "eksctl-CLUSTER-NAME-nodegroup-standard-workers"
[ℹ]  deploying stack "eksctl-CLUSTER-NAME-nodegroup-standard-workers"
[✔]  all EKS cluster resource for "CLUSTER-NAME" had been created
[✔]  saved kubeconfig as "/Users/CLUSTER-NAME/.kube/config"
[ℹ]  adding role "arn:aws:iam::...:role/eksctl-CLUSTER-NAME-nodegroup-standard-w-NodeInstanceRole-..." to auth ConfigMap
[ℹ]  nodegroup "standard-workers" has 0 node(s)
[ℹ]  waiting for at least 1 node(s) to become ready in "standard-workers"
[ℹ]  nodegroup "standard-workers" has 1 node(s)
[ℹ]  node "ip-192-168-47-193.ec2.internal" is ready
[ℹ]  kubectl command should work with "/Users/CLUSTER-NAME/.kube/config", try 'kubectl get nodes'
[✔]  EKS cluster "CLUSTER-NAME" in "us-east-1" region is ready
</code></pre>
<h1 id="install-helm"><a href="#install-helm" aria-hidden="true"><span class="icon icon-link"></span></a>Install Helm</h1>
<p>In order to install and configure Helm on an EKS cluster, you may use
<a href="https://docs.aws.amazon.com/eks/latest/userguide/helm.html" target="_blank" rel="noopener noreferrer">this documentation</a>.</p>
<h1 id="deploy-galaxy-on-the-cluster"><a href="#deploy-galaxy-on-the-cluster" aria-hidden="true"><span class="icon icon-link"></span></a>Deploy Galaxy on the Cluster</h1>
<p>Once you have established that you have Helm and have configured the <code>tiller</code>
server (as detailed in the above documentation), the deployment of a Galaxy on
a k8s cluster consists of two steps:</p>
<ol>
<li>
<p>[Optional] deploy the <a href="https://cernvm.cern.ch/portal/filesystem" target="_blank" rel="noopener noreferrer">CernVM File System (CVMFS)</a> chart.
You may run the following commands for this deployment:</p>
<pre><code class="language-bash">$ git clone https://github.com/CloudVE/galaxy-cvmfs-csi-chart.git
$ cd galaxy-cvmfs-csi-chart/galaxy-cvmfs-csi
$ helm install .
</code></pre>
<p>Output may look like the following:</p>
<pre><code class="language-bash">NAME:   wistful-sasquatch
LAST DEPLOYED: Thu Aug  8 11:13:35 2019
NAMESPACE: default
STATUS: DEPLOYED

RESOURCES:
==> v1/ClusterRole
NAME                            AGE
cvmfs-external-attacher-runner  3s
cvmfs-nodeplugin                3s
cvmfs-provisioner-runner        3s

==> v1/ClusterRoleBinding
NAME                    AGE
cvmfs-attacher-role     3s
cvmfs-nodeplugin        3s
cvmfs-provisioner-role  3s

==> v1/ConfigMap
NAME             DATA  AGE
cvmfs-configmap  3     4s

==> v1/PersistentVolume
NAME            CAPACITY  ACCESS MODES  RECLAIM POLICY  STATUS  CLAIM                    STORAGECLASS  REASON  AGE
cvmfs-cache-pv  1000Mi    RWX           Retain          Bound   default/cvmfs-cache-pvc  manual        4s

==> v1/PersistentVolumeClaim
NAME             STATUS  VOLUME          CAPACITY  ACCESS MODES  STORAGECLASS  AGE
cvmfs-cache-pvc  Bound   cvmfs-cache-pv  1000Mi    RWX           manual        4s

==> v1/Pod(related)
NAME                           READY  STATUS             RESTARTS  AGE
csi-cvmfsplugin-9gl65          0/2    ContainerCreating  0         3s
csi-cvmfsplugin-attacher-0     0/1    ContainerCreating  0         3s
csi-cvmfsplugin-provisioner-0  0/1    ContainerCreating  0         2s

==> v1/Service
NAME                         TYPE       CLUSTER-IP     EXTERNAL-IP  PORT(S)    AGE
csi-cvmfsplugin-attacher     ClusterIP  10.100.151.23  &#x3C;none>       12345/TCP  3s
csi-cvmfsplugin-provisioner  ClusterIP  10.100.64.145  &#x3C;none>       12345/TCP  3s

==> v1/ServiceAccount
NAME               SECRETS  AGE
cvmfs-attacher     1        3s
cvmfs-nodeplugin   1        3s
cvmfs-provisioner  1        3s

==> v1/StorageClass
NAME            PROVISIONER      AGE
cvmfs-gxy-data  csi-cvmfsplugin  4s
cvmfs-gxy-main  csi-cvmfsplugin  4s

==> v1beta1/StatefulSet
NAME                         READY  AGE
csi-cvmfsplugin-attacher     0/1    3s
csi-cvmfsplugin-provisioner  0/1    2s

==> v1beta2/DaemonSet
NAME             DESIRED  CURRENT  READY  UP-TO-DATE  AVAILABLE  NODE SELECTOR  AGE
csi-cvmfsplugin  1        1        0      1           0          &#x3C;none>         3s
</code></pre>
</li>
<li>
<p>Deploy Galaxy chart, using the following commands:</p>
<pre><code class="language-bash">$ git clone https://github.com/galaxyproject/galaxy-helm.git
$ cd galaxy-helm/galaxy/
$ helm dependency update
$ helm install . --set persistence.accessMode=ReadWriteOnce --set service.type=LoadBalancer --set service.port=80 -f values-cvmfs.yaml
</code></pre>
<p>The output should look like the following:</p>
<pre><code class="language-bash">NAME:   wistful-quoll
LAST DEPLOYED: Thu Aug  8 11:21:33 2019
NAMESPACE: default
STATUS: DEPLOYED

RESOURCES:
==> v1/ConfigMap
NAME                            DATA  AGE
wistful-quoll-galaxy-configs    8     2s
wistful-quoll-galaxy-job-rules  2     3s

==> v1/Deployment
NAME                      READY  UP-TO-DATE  AVAILABLE  AGE
wistful-quoll-galaxy-job  0/1    1           0          2s
wistful-quoll-galaxy-web  0/1    1           0          2s

==> v1/PersistentVolumeClaim
NAME                                     STATUS   VOLUME          CAPACITY  ACCESS MODES  STORAGECLASS  AGE
wistful-quoll-galaxy-cvmfs-gxy-data-pvc  Pending  cvmfs-gxy-data  2s
wistful-quoll-galaxy-cvmfs-gxy-main-pvc  Pending  cvmfs-gxy-main  2s
wistful-quoll-galaxy-pvc                 Pending  gp2             2s

==> v1/Pod(related)
NAME                                       READY  STATUS   RESTARTS  AGE
wistful-quoll-galaxy-job-5c4f897669-k46vk  0/1    Pending  0         2s
wistful-quoll-galaxy-postgres-0            0/1    Pending  0         2s
wistful-quoll-galaxy-web-595f59c5b-gx974   0/1    Pending  0         2s

==> v1/Role
NAME                                AGE
wistful-quoll-galaxy-role-pod-jobs  2s

==> v1/RoleBinding
NAME                            AGE
wistful-quoll-galaxy-batch-ops  2s

==> v1/Secret
NAME                           TYPE    DATA  AGE
wistful-quoll-galaxy-initdb    Opaque  2     3s
wistful-quoll-galaxy-postgres  Opaque  1     3s

==> v1/Service
NAME                                    TYPE          CLUSTER-IP      EXTERNAL-IP  PORT(S)       AGE
wistful-quoll-galaxy                    LoadBalancer  10.100.54.20    &#x3C;pending>    80:30691/TCP  2s
wistful-quoll-galaxy-postgres           ClusterIP     10.100.169.181  &#x3C;none>       5432/TCP      2s
wistful-quoll-galaxy-postgres-headless  ClusterIP     None            &#x3C;none>       5432/TCP      2s

==> v1beta1/Ingress
NAME                  HOSTS  ADDRESS  PORTS  AGE
wistful-quoll-galaxy  *      80       2s

==> v1beta2/StatefulSet
NAME                           READY  AGE
wistful-quoll-galaxy-postgres  0/1    2s
</code></pre>
</li>
</ol>
<h1 id="access-galaxy-instance"><a href="#access-galaxy-instance" aria-hidden="true"><span class="icon icon-link"></span></a>Access Galaxy Instance</h1>
<p>Having deployed Galaxy on an EKS cluster, you may access the instance as the following:</p>
<ol>
<li>
<p>Run <code>kubectl get svc</code>, which lists the services as the following:</p>
<pre><code class="language-bash">NAME                                     TYPE           CLUSTER-IP       EXTERNAL-IP        PORT(S)        AGE
csi-cvmfsplugin-attacher                 ClusterIP      10.100.151.23    &#x3C;none>             12345/TCP      17m
csi-cvmfsplugin-provisioner              ClusterIP      10.100.64.145    &#x3C;none>             12345/TCP      17m
kubernetes                               ClusterIP      10.100.0.1       &#x3C;none>             443/TCP        47m
wistful-quoll-galaxy                     LoadBalancer   10.100.54.20     a5d718acbba09...   80:30691/TCP   9m
wistful-quoll-galaxy-postgres            ClusterIP      10.100.169.181   &#x3C;none>             5432/TCP       9m
wistful-quoll-galaxy-postgres-headless   ClusterIP      None             &#x3C;none>             5432/TCP       9m
</code></pre>
</li>
<li>
<p>Copy the <code>Name</code> of the <code>LoadBalancer</code> service (in this case,
'wistful-quoll-galaxy'), and run the following command:</p>
<pre><code class="language-bash">$ kubectl describe svc wistful-quoll-galaxy
</code></pre>
<p>where <code>wistful-quoll-galaxy</code> is the name of the <code>LoadBalancer</code> in our example, that
should be replaced by the name of <code>LoadBalancer</code> in your deployment.</p>
<p>The output of this command is as the following:</p>
<pre><code class="language-bash">Name:                     wistful-quoll-galaxy
Namespace:                default
Labels:                   app.kubernetes.io/instance=wistful-quoll
                          app.kubernetes.io/managed-by=Tiller
                          app.kubernetes.io/name=galaxy
                          helm.sh/chart=galaxy-3.0.0
Annotations:              &#x3C;none>
Selector:                 app.kubernetes.io/instance=wistful-quoll,app.kubernetes.io/name=wistful-quoll-galaxy,component=galaxy-web-handler
Type:                     LoadBalancer
IP:                       10.100.54.20
LoadBalancer Ingress:     a0a000aaaaa0000a000aa0a0a00a00aa-000000000.us-east-1.elb.amazonaws.com
Port:                     http  80/TCP
TargetPort:               galaxy-http/TCP
NodePort:                 http  30691/TCP
Endpoints:                192.168.32.240:8080
Session Affinity:         None
External Traffic Policy:  Cluster
Events:
  Type    Reason                Age   From                Message
  ----    ------                ----  ----                -------
  Normal  EnsuringLoadBalancer  10m   service-controller  Ensuring load balancer
  Normal  EnsuredLoadBalancer   10m   service-controller  Ensured load balancer
</code></pre>
<p>The public IP address from which the Galaxy instance is available is given in the
<code>LoadBalancer Ingress</code> field.</p>
</li>
</ol>
<h1 id="delete-eks-cluster"><a href="#delete-eks-cluster" aria-hidden="true"><span class="icon icon-link"></span></a>Delete EKS Cluster</h1>
<p>To delete all resources associated with the cluster (such as nodes, the load
balancer, and volumes) and avoid orphaned resources, a few steps must be taken:</p>
<ol>
<li>
<p>Run <code>kubectl get svc --all-namespaces</code>, whose output may look like the following:</p>
<pre><code class="language-bash">NAMESPACE     NAME                                     TYPE           CLUSTER-IP       EXTERNAL-IP        PORT(S)         AGE
default       csi-cvmfsplugin-attacher                 ClusterIP      10.100.151.23    &#x3C;none>             12345/TCP       26m
default       csi-cvmfsplugin-provisioner              ClusterIP      10.100.64.145    &#x3C;none>             12345/TCP       26m
default       kubernetes                               ClusterIP      10.100.0.1       &#x3C;none>             443/TCP         56m
default       wistful-quoll-galaxy                     LoadBalancer   10.100.54.20     a5d718acbba09...   80:30691/TCP    18m
default       wistful-quoll-galaxy-postgres            ClusterIP      10.100.169.181   &#x3C;none>             5432/TCP        18m
default       wistful-quoll-galaxy-postgres-headless   ClusterIP      None             &#x3C;none>             5432/TCP        18m
kube-system   kube-dns                                 ClusterIP      10.100.0.10      &#x3C;none>             53/UDP,53/TCP   56m
</code></pre>
</li>
<li>
<p>Copy the <code>NAME</code> of the <code>LoadBalancer</code> service, and run the following command:</p>
<pre><code class="language-bash">$ kubectl delete svc wistful-quoll-galaxy
</code></pre>
<p>where <code>wistful-quoll-galaxy</code> is the <code>NAME</code> of the <code>LoadBalancer</code> in our
example. This will prevent normal failure recovery procedures from
recreating any terminated instances.</p>
</li>
<li>
<p>To delete the cluster, run the following command replacing <code>CLUSTER-NAME</code> and <code>REGION</code>
with the name of your cluster and region, respectively, that you assigned when
creating the cluster.</p>
<pre><code class="language-bash">$ eksctl delete cluster --name CLUSTER-NAME --region REGION
</code></pre>
<p>Output:</p>
<pre><code class="language-bash">[ℹ]  using region us-east-1
[ℹ]  deleting EKS cluster "CLUSTER-NAME"
[✔]  kubeconfig has been updated
[ℹ]  cleaning up LoadBalancer services
[ℹ]  2 sequential tasks: { delete nodegroup "standard-workers", delete cluster control plane "CLUSTER-NAME" [async] }
[ℹ]  will delete stack "eksctl-CLUSTER-NAME-nodegroup-standard-workers"
[ℹ]  waiting for stack "eksctl-CLUSTER-NAME-nodegroup-standard-workers" to get deleted
[ℹ]  will delete stack "eksctl-CLUSTER-NAME-cluster"
[✔]  all cluster resources were deleted
</code></pre>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ebs-volume.html" target="_blank" rel="noopener noreferrer">Amazon Elastic Block Store (EBS)</a>
volumes may not delete automatically. To delete them manually, take the following steps:</p>
<ul>
<li>Goto <a href="https://console.aws.amazon.com/ec2/" target="_blank" rel="noopener noreferrer">https://console.aws.amazon.com/ec2/</a>;</li>
<li>Choose <code>Volumes</code> under the <code>ELASTIC BLOCK STORE</code> category;</li>
<li>choose the related volumes for the list;</li>
<li>click on the <code>Actions</code> button, then the <code>Delete Volumes</code> menu item.</li>
</ul>
</li>
</ol>
</div>
</div><footer data-v-4b3455de data-v-340f7abc><!----></footer><footer class="static-footer markdown"><p>The Galaxy Project is supported in part by NSF, NHGRI, The Huck Institutes of the Life Sciences, The Institute for CyberScience at Penn State, and Johns Hopkins University.</p>
</footer></section></div>
    <script>window.__INITIAL_STATE__={"data":{"article":{"id":"b058438c68f0330efd585a26ddc2ed9f","title":"Deploy an Instance of Galaxy on Amazon Elastic Kubernetes Service","tease":"","category":null,"date":null,"days":null,"contact":"","contact_url":"","authors":"","location":"","location_url":"","source_blog":"","source_blog_url":"","skip_title_render":null,"links":[],"image":"","images":{},"external_url":"","content":"\u003Cdiv class=\"toc-wrapper col-md-3\"\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#create-a-cluster\"\u003ECreate a Cluster\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#install-helm\"\u003EInstall Helm\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#deploy-galaxy-on-the-cluster\"\u003EDeploy Galaxy on the Cluster\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#access-galaxy-instance\"\u003EAccess Galaxy Instance\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#delete-eks-cluster\"\u003EDelete EKS Cluster\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fdiv\u003E\n\u003Cdiv class=\"body-wrapper col-md-9\"\u003E\n\u003Cp\u003EWe break the steps of deploying Galaxy on\n\u003Ca href=\"https:\u002F\u002Fdocs.aws.amazon.com\u002Feks\u002Flatest\u002Fuserguide\u002Fwhat-is-eks.html\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EAmazon Elastic Kubernetes Service (Amazon EKS)\u003C\u002Fa\u003E\ninto the following sections:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#create-a-cluster\"\u003ECreate a k8s cluster\u003C\u002Fa\u003E;\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#install-helm\"\u003EInstall Helm\u003C\u002Fa\u003E;\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#deploy-galaxy-on-the-cluster\"\u003EDeploy an instance of Galaxy using Helm charts\u003C\u002Fa\u003E;\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#access-galaxy-instance\"\u003EAccess the deployed Galaxy instance\u003C\u002Fa\u003E;\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#delete-eks-cluster\"\u003EDelete cluster\u003C\u002Fa\u003E.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch1 id=\"create-a-cluster\"\u003E\u003Ca href=\"#create-a-cluster\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreate a Cluster\u003C\u002Fh1\u003E\n\u003Cp\u003EAmazon EKS offers two methods for creating a cluster: either via console,\nor by using a tool named \u003Ccode\u003Eeksctl\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EWhen creating a cluster, you will need to make the following\ndecisions, taking note of the choices you make:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003EChoose a \u003Ca href=\"https:\u002F\u002Fdocs.aws.amazon.com\u002FAWSEC2\u002Flatest\u002FUserGuide\u002Fusing-regions-availability-zones.html\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Eregion\u003C\u002Fa\u003E:\nthe region selected must have Amazon Secure Token Service (STS)\u003Cbr\u003E\nactivated for your account. You do not necessarily have STS activate for all\nregions under your account; please consult with your account admin. If you\nchoose a region where STS is not activated for your account, you may get an\nerror message as the following:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003EAWS::EKS::Cluster\u002FControlPlane: CREATE_FAILED – \nSTS is not activated in this region for account:0123456789. \nYour account administrator can activate STS in this region using the IAM Console. \n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003EChoose an \u003Ca href=\"https:\u002F\u002Faws.amazon.com\u002Fec2\u002Finstance-types\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Einstance type\u003C\u002Fa\u003E;\ntwo points to consider: first, not necessarily all instance types are available in\nall regions; therefore, choose an instance type that is available in the\nzone where you have STS activated. Second, choose an instance with a \"reasonable\"\namount of resources, as you will be running multiple pods within that instance,\nand if you do not have enough resources, your pods will fail to schedule. For\ninstance, avoid instance types such as \u003Ccode\u003Ea1.medium\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003Cli\u003ECluster node count. While you can deploy Galaxy on a k8s cluster with\nmultiple nodes, in the following we discuss how to deploy on a cluster with\na single node, as there is an additional step for deployment on a multi-node\ncluster that will be discussed separately.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003ETo create a cluster on on EKS, you may follow these tutorials:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003Evia console; read \u003Ca href=\"https:\u002F\u002Fdocs.aws.amazon.com\u002Feks\u002Flatest\u002Fuserguide\u002Fgetting-started-console.html\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Ehow to start a cluster using the console\u003C\u002Fa\u003E;\u003C\u002Fli\u003E\n\u003Cli\u003Evia the \u003Ccode\u003Eeksctl\u003C\u002Fcode\u003E CLI tool; read \u003Ca href=\"https:\u002F\u002Fdocs.aws.amazon.com\u002Feks\u002Flatest\u002Fuserguide\u002Fgetting-started-eksctl.html\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Ehow to start a cluster using eksctl\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EIf you have used the \u003Ccode\u003Eeksctl\u003C\u002Fcode\u003E tool to start a cluster, you may have run a\ncommand similar to the following, which creates a cluster with \u003Ccode\u003E1\u003C\u002Fcode\u003E node of\n\u003Ccode\u003Em5.4xlarge\u003C\u002Fcode\u003E instance type in \u003Ccode\u003Eus-east-1\u003C\u002Fcode\u003E zone:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E$ eksctl create cluster --name CLUSTER-NAME --version 1.13 --nodegroup-name standard-workers --node-type m5.4xlarge --nodes 1 --nodes-min 1 --nodes-max 1 --node-ami auto --region us-east-1\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENote that the instance type and zone values are arbitrary and you may choose any\nvalues following the afore-discussed points.\u003C\u002Fp\u003E\n\u003Cp\u003EIf the command execution is successful, you may see an output as:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E[ℹ]  using region us-east-1\n[ℹ]  setting availability zones to [us-east-1b us-east-1c]\n[ℹ]  subnets for us-east-1b - public:192.168.0.0\u002F19 private:192.168.64.0\u002F19\n[ℹ]  subnets for us-east-1c - public:192.168.32.0\u002F19 private:192.168.96.0\u002F19\n[ℹ]  nodegroup \"standard-workers\" will use \"ami-...\" [AmazonLinux2\u002F1.13]\n[ℹ]  using Kubernetes version 1.13\n[ℹ]  creating EKS cluster \"CLUSTER-NAME\" in \"us-east-1\" region\n[ℹ]  will create 2 separate CloudFormation stacks for cluster itself and the initial nodegroup\n[ℹ]  if you encounter any issues, check CloudFormation console or try 'eksctl utils describe-stacks --region=us-east-1 --name=CLUSTER-NAME'\n[ℹ]  2 sequential tasks: { create cluster control plane \"CLUSTER-NAME\", create nodegroup \"standard-workers\" }\n[ℹ]  building cluster stack \"eksctl-CLUSTER-NAME-cluster\"\n[ℹ]  deploying stack \"eksctl-CLUSTER-NAME-cluster\"\n[ℹ]  building nodegroup stack \"eksctl-CLUSTER-NAME-nodegroup-standard-workers\"\n[ℹ]  deploying stack \"eksctl-CLUSTER-NAME-nodegroup-standard-workers\"\n[✔]  all EKS cluster resource for \"CLUSTER-NAME\" had been created\n[✔]  saved kubeconfig as \"\u002FUsers\u002FCLUSTER-NAME\u002F.kube\u002Fconfig\"\n[ℹ]  adding role \"arn:aws:iam::...:role\u002Feksctl-CLUSTER-NAME-nodegroup-standard-w-NodeInstanceRole-...\" to auth ConfigMap\n[ℹ]  nodegroup \"standard-workers\" has 0 node(s)\n[ℹ]  waiting for at least 1 node(s) to become ready in \"standard-workers\"\n[ℹ]  nodegroup \"standard-workers\" has 1 node(s)\n[ℹ]  node \"ip-192-168-47-193.ec2.internal\" is ready\n[ℹ]  kubectl command should work with \"\u002FUsers\u002FCLUSTER-NAME\u002F.kube\u002Fconfig\", try 'kubectl get nodes'\n[✔]  EKS cluster \"CLUSTER-NAME\" in \"us-east-1\" region is ready\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch1 id=\"install-helm\"\u003E\u003Ca href=\"#install-helm\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EInstall Helm\u003C\u002Fh1\u003E\n\u003Cp\u003EIn order to install and configure Helm on an EKS cluster, you may use\n\u003Ca href=\"https:\u002F\u002Fdocs.aws.amazon.com\u002Feks\u002Flatest\u002Fuserguide\u002Fhelm.html\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Ethis documentation\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Ch1 id=\"deploy-galaxy-on-the-cluster\"\u003E\u003Ca href=\"#deploy-galaxy-on-the-cluster\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EDeploy Galaxy on the Cluster\u003C\u002Fh1\u003E\n\u003Cp\u003EOnce you have established that you have Helm and have configured the \u003Ccode\u003Etiller\u003C\u002Fcode\u003E\nserver (as detailed in the above documentation), the deployment of a Galaxy on\na k8s cluster consists of two steps:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003E[Optional] deploy the \u003Ca href=\"https:\u002F\u002Fcernvm.cern.ch\u002Fportal\u002Ffilesystem\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ECernVM File System (CVMFS)\u003C\u002Fa\u003E chart.\nYou may run the following commands for this deployment:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E$ git clone https:\u002F\u002Fgithub.com\u002FCloudVE\u002Fgalaxy-cvmfs-csi-chart.git\n$ cd galaxy-cvmfs-csi-chart\u002Fgalaxy-cvmfs-csi\n$ helm install .\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EOutput may look like the following:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003ENAME:   wistful-sasquatch\nLAST DEPLOYED: Thu Aug  8 11:13:35 2019\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==\u003E v1\u002FClusterRole\nNAME                            AGE\ncvmfs-external-attacher-runner  3s\ncvmfs-nodeplugin                3s\ncvmfs-provisioner-runner        3s\n\n==\u003E v1\u002FClusterRoleBinding\nNAME                    AGE\ncvmfs-attacher-role     3s\ncvmfs-nodeplugin        3s\ncvmfs-provisioner-role  3s\n\n==\u003E v1\u002FConfigMap\nNAME             DATA  AGE\ncvmfs-configmap  3     4s\n\n==\u003E v1\u002FPersistentVolume\nNAME            CAPACITY  ACCESS MODES  RECLAIM POLICY  STATUS  CLAIM                    STORAGECLASS  REASON  AGE\ncvmfs-cache-pv  1000Mi    RWX           Retain          Bound   default\u002Fcvmfs-cache-pvc  manual        4s\n\n==\u003E v1\u002FPersistentVolumeClaim\nNAME             STATUS  VOLUME          CAPACITY  ACCESS MODES  STORAGECLASS  AGE\ncvmfs-cache-pvc  Bound   cvmfs-cache-pv  1000Mi    RWX           manual        4s\n\n==\u003E v1\u002FPod(related)\nNAME                           READY  STATUS             RESTARTS  AGE\ncsi-cvmfsplugin-9gl65          0\u002F2    ContainerCreating  0         3s\ncsi-cvmfsplugin-attacher-0     0\u002F1    ContainerCreating  0         3s\ncsi-cvmfsplugin-provisioner-0  0\u002F1    ContainerCreating  0         2s\n\n==\u003E v1\u002FService\nNAME                         TYPE       CLUSTER-IP     EXTERNAL-IP  PORT(S)    AGE\ncsi-cvmfsplugin-attacher     ClusterIP  10.100.151.23  &#x3C;none\u003E       12345\u002FTCP  3s\ncsi-cvmfsplugin-provisioner  ClusterIP  10.100.64.145  &#x3C;none\u003E       12345\u002FTCP  3s\n\n==\u003E v1\u002FServiceAccount\nNAME               SECRETS  AGE\ncvmfs-attacher     1        3s\ncvmfs-nodeplugin   1        3s\ncvmfs-provisioner  1        3s\n\n==\u003E v1\u002FStorageClass\nNAME            PROVISIONER      AGE\ncvmfs-gxy-data  csi-cvmfsplugin  4s\ncvmfs-gxy-main  csi-cvmfsplugin  4s\n\n==\u003E v1beta1\u002FStatefulSet\nNAME                         READY  AGE\ncsi-cvmfsplugin-attacher     0\u002F1    3s\ncsi-cvmfsplugin-provisioner  0\u002F1    2s\n\n==\u003E v1beta2\u002FDaemonSet\nNAME             DESIRED  CURRENT  READY  UP-TO-DATE  AVAILABLE  NODE SELECTOR  AGE\ncsi-cvmfsplugin  1        1        0      1           0          &#x3C;none\u003E         3s\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003EDeploy Galaxy chart, using the following commands:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E$ git clone https:\u002F\u002Fgithub.com\u002Fgalaxyproject\u002Fgalaxy-helm.git\n$ cd galaxy-helm\u002Fgalaxy\u002F\n$ helm dependency update\n$ helm install . --set persistence.accessMode=ReadWriteOnce --set service.type=LoadBalancer --set service.port=80 -f values-cvmfs.yaml\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe output should look like the following:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003ENAME:   wistful-quoll\nLAST DEPLOYED: Thu Aug  8 11:21:33 2019\nNAMESPACE: default\nSTATUS: DEPLOYED\n\nRESOURCES:\n==\u003E v1\u002FConfigMap\nNAME                            DATA  AGE\nwistful-quoll-galaxy-configs    8     2s\nwistful-quoll-galaxy-job-rules  2     3s\n\n==\u003E v1\u002FDeployment\nNAME                      READY  UP-TO-DATE  AVAILABLE  AGE\nwistful-quoll-galaxy-job  0\u002F1    1           0          2s\nwistful-quoll-galaxy-web  0\u002F1    1           0          2s\n\n==\u003E v1\u002FPersistentVolumeClaim\nNAME                                     STATUS   VOLUME          CAPACITY  ACCESS MODES  STORAGECLASS  AGE\nwistful-quoll-galaxy-cvmfs-gxy-data-pvc  Pending  cvmfs-gxy-data  2s\nwistful-quoll-galaxy-cvmfs-gxy-main-pvc  Pending  cvmfs-gxy-main  2s\nwistful-quoll-galaxy-pvc                 Pending  gp2             2s\n\n==\u003E v1\u002FPod(related)\nNAME                                       READY  STATUS   RESTARTS  AGE\nwistful-quoll-galaxy-job-5c4f897669-k46vk  0\u002F1    Pending  0         2s\nwistful-quoll-galaxy-postgres-0            0\u002F1    Pending  0         2s\nwistful-quoll-galaxy-web-595f59c5b-gx974   0\u002F1    Pending  0         2s\n\n==\u003E v1\u002FRole\nNAME                                AGE\nwistful-quoll-galaxy-role-pod-jobs  2s\n\n==\u003E v1\u002FRoleBinding\nNAME                            AGE\nwistful-quoll-galaxy-batch-ops  2s\n\n==\u003E v1\u002FSecret\nNAME                           TYPE    DATA  AGE\nwistful-quoll-galaxy-initdb    Opaque  2     3s\nwistful-quoll-galaxy-postgres  Opaque  1     3s\n\n==\u003E v1\u002FService\nNAME                                    TYPE          CLUSTER-IP      EXTERNAL-IP  PORT(S)       AGE\nwistful-quoll-galaxy                    LoadBalancer  10.100.54.20    &#x3C;pending\u003E    80:30691\u002FTCP  2s\nwistful-quoll-galaxy-postgres           ClusterIP     10.100.169.181  &#x3C;none\u003E       5432\u002FTCP      2s\nwistful-quoll-galaxy-postgres-headless  ClusterIP     None            &#x3C;none\u003E       5432\u002FTCP      2s\n\n==\u003E v1beta1\u002FIngress\nNAME                  HOSTS  ADDRESS  PORTS  AGE\nwistful-quoll-galaxy  *      80       2s\n\n==\u003E v1beta2\u002FStatefulSet\nNAME                           READY  AGE\nwistful-quoll-galaxy-postgres  0\u002F1    2s\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch1 id=\"access-galaxy-instance\"\u003E\u003Ca href=\"#access-galaxy-instance\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EAccess Galaxy Instance\u003C\u002Fh1\u003E\n\u003Cp\u003EHaving deployed Galaxy on an EKS cluster, you may access the instance as the following:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003ERun \u003Ccode\u003Ekubectl get svc\u003C\u002Fcode\u003E, which lists the services as the following:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003ENAME                                     TYPE           CLUSTER-IP       EXTERNAL-IP        PORT(S)        AGE\ncsi-cvmfsplugin-attacher                 ClusterIP      10.100.151.23    &#x3C;none\u003E             12345\u002FTCP      17m\ncsi-cvmfsplugin-provisioner              ClusterIP      10.100.64.145    &#x3C;none\u003E             12345\u002FTCP      17m\nkubernetes                               ClusterIP      10.100.0.1       &#x3C;none\u003E             443\u002FTCP        47m\nwistful-quoll-galaxy                     LoadBalancer   10.100.54.20     a5d718acbba09...   80:30691\u002FTCP   9m\nwistful-quoll-galaxy-postgres            ClusterIP      10.100.169.181   &#x3C;none\u003E             5432\u002FTCP       9m\nwistful-quoll-galaxy-postgres-headless   ClusterIP      None             &#x3C;none\u003E             5432\u002FTCP       9m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ECopy the \u003Ccode\u003EName\u003C\u002Fcode\u003E of the \u003Ccode\u003ELoadBalancer\u003C\u002Fcode\u003E service (in this case,\n'wistful-quoll-galaxy'), and run the following command:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E$ kubectl describe svc wistful-quoll-galaxy\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhere \u003Ccode\u003Ewistful-quoll-galaxy\u003C\u002Fcode\u003E is the name of the \u003Ccode\u003ELoadBalancer\u003C\u002Fcode\u003E in our example, that\nshould be replaced by the name of \u003Ccode\u003ELoadBalancer\u003C\u002Fcode\u003E in your deployment.\u003C\u002Fp\u003E\n\u003Cp\u003EThe output of this command is as the following:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003EName:                     wistful-quoll-galaxy\nNamespace:                default\nLabels:                   app.kubernetes.io\u002Finstance=wistful-quoll\n                          app.kubernetes.io\u002Fmanaged-by=Tiller\n                          app.kubernetes.io\u002Fname=galaxy\n                          helm.sh\u002Fchart=galaxy-3.0.0\nAnnotations:              &#x3C;none\u003E\nSelector:                 app.kubernetes.io\u002Finstance=wistful-quoll,app.kubernetes.io\u002Fname=wistful-quoll-galaxy,component=galaxy-web-handler\nType:                     LoadBalancer\nIP:                       10.100.54.20\nLoadBalancer Ingress:     a0a000aaaaa0000a000aa0a0a00a00aa-000000000.us-east-1.elb.amazonaws.com\nPort:                     http  80\u002FTCP\nTargetPort:               galaxy-http\u002FTCP\nNodePort:                 http  30691\u002FTCP\nEndpoints:                192.168.32.240:8080\nSession Affinity:         None\nExternal Traffic Policy:  Cluster\nEvents:\n  Type    Reason                Age   From                Message\n  ----    ------                ----  ----                -------\n  Normal  EnsuringLoadBalancer  10m   service-controller  Ensuring load balancer\n  Normal  EnsuredLoadBalancer   10m   service-controller  Ensured load balancer\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe public IP address from which the Galaxy instance is available is given in the\n\u003Ccode\u003ELoadBalancer Ingress\u003C\u002Fcode\u003E field.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch1 id=\"delete-eks-cluster\"\u003E\u003Ca href=\"#delete-eks-cluster\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EDelete EKS Cluster\u003C\u002Fh1\u003E\n\u003Cp\u003ETo delete all resources associated with the cluster (such as nodes, the load\nbalancer, and volumes) and avoid orphaned resources, a few steps must be taken:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\n\u003Cp\u003ERun \u003Ccode\u003Ekubectl get svc --all-namespaces\u003C\u002Fcode\u003E, whose output may look like the following:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003ENAMESPACE     NAME                                     TYPE           CLUSTER-IP       EXTERNAL-IP        PORT(S)         AGE\ndefault       csi-cvmfsplugin-attacher                 ClusterIP      10.100.151.23    &#x3C;none\u003E             12345\u002FTCP       26m\ndefault       csi-cvmfsplugin-provisioner              ClusterIP      10.100.64.145    &#x3C;none\u003E             12345\u002FTCP       26m\ndefault       kubernetes                               ClusterIP      10.100.0.1       &#x3C;none\u003E             443\u002FTCP         56m\ndefault       wistful-quoll-galaxy                     LoadBalancer   10.100.54.20     a5d718acbba09...   80:30691\u002FTCP    18m\ndefault       wistful-quoll-galaxy-postgres            ClusterIP      10.100.169.181   &#x3C;none\u003E             5432\u002FTCP        18m\ndefault       wistful-quoll-galaxy-postgres-headless   ClusterIP      None             &#x3C;none\u003E             5432\u002FTCP        18m\nkube-system   kube-dns                                 ClusterIP      10.100.0.10      &#x3C;none\u003E             53\u002FUDP,53\u002FTCP   56m\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ECopy the \u003Ccode\u003ENAME\u003C\u002Fcode\u003E of the \u003Ccode\u003ELoadBalancer\u003C\u002Fcode\u003E service, and run the following command:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E$ kubectl delete svc wistful-quoll-galaxy\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewhere \u003Ccode\u003Ewistful-quoll-galaxy\u003C\u002Fcode\u003E is the \u003Ccode\u003ENAME\u003C\u002Fcode\u003E of the \u003Ccode\u003ELoadBalancer\u003C\u002Fcode\u003E in our\nexample. This will prevent normal failure recovery procedures from\nrecreating any terminated instances.\u003C\u002Fp\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003ETo delete the cluster, run the following command replacing \u003Ccode\u003ECLUSTER-NAME\u003C\u002Fcode\u003E and \u003Ccode\u003EREGION\u003C\u002Fcode\u003E\nwith the name of your cluster and region, respectively, that you assigned when\ncreating the cluster.\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E$ eksctl delete cluster --name CLUSTER-NAME --region REGION\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EOutput:\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003E[ℹ]  using region us-east-1\n[ℹ]  deleting EKS cluster \"CLUSTER-NAME\"\n[✔]  kubeconfig has been updated\n[ℹ]  cleaning up LoadBalancer services\n[ℹ]  2 sequential tasks: { delete nodegroup \"standard-workers\", delete cluster control plane \"CLUSTER-NAME\" [async] }\n[ℹ]  will delete stack \"eksctl-CLUSTER-NAME-nodegroup-standard-workers\"\n[ℹ]  waiting for stack \"eksctl-CLUSTER-NAME-nodegroup-standard-workers\" to get deleted\n[ℹ]  will delete stack \"eksctl-CLUSTER-NAME-cluster\"\n[✔]  all cluster resources were deleted\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdocs.aws.amazon.com\u002FAWSCloudFormation\u002Flatest\u002FUserGuide\u002Faws-properties-ec2-ebs-volume.html\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EAmazon Elastic Block Store (EBS)\u003C\u002Fa\u003E\nvolumes may not delete automatically. To delete them manually, take the following steps:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EGoto \u003Ca href=\"https:\u002F\u002Fconsole.aws.amazon.com\u002Fec2\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Ehttps:\u002F\u002Fconsole.aws.amazon.com\u002Fec2\u002F\u003C\u002Fa\u003E;\u003C\u002Fli\u003E\n\u003Cli\u003EChoose \u003Ccode\u003EVolumes\u003C\u002Fcode\u003E under the \u003Ccode\u003EELASTIC BLOCK STORE\u003C\u002Fcode\u003E category;\u003C\u002Fli\u003E\n\u003Cli\u003Echoose the related volumes for the list;\u003C\u002Fli\u003E\n\u003Cli\u003Eclick on the \u003Ccode\u003EActions\u003C\u002Fcode\u003E button, then the \u003Ccode\u003EDelete Volumes\u003C\u002Fcode\u003E menu item.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fdiv\u003E\n"}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.0690a31c.js" defer></script><script src="/assets/js/page--src--templates--article-vue.6d736ff4.js" defer></script>
  </body>
</html>
