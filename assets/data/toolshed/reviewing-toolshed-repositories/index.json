{"hash":"c32ecfdb33b075b0057598b5b9118f3554a398cf","data":{"article":{"id":"7388df656d98260869fe475cbc7ac692","title":"Reviewing ToolShed Repositories","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<div class='center'> <a href='http://toolshed.g2.bx.psu.edu'>![Galaxy Main ToolShed](/src/images/logos/ToolShed.jpg)</a> </div>\n<h1 id=\"the-intergalactic-utilities-commission\"><a href=\"#the-intergalactic-utilities-commission\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>The Intergalactic Utilities Commission</h1>\n<p>The Galaxy community formed a commission to help improve the quality of published Galaxy utilities. More about the <a href=\"/src/iuc/index.md\">IUC</a>.</p>\n<h1 id=\"granting-authority-to-review-a-repository\"><a href=\"#granting-authority-to-review-a-repository\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Granting authority to review a repository</h1>\n<p>The ability to review repositories is restricted to certain tool shed accounts via the tool shed's role-based authorization features.  Authority to review a repository is granted to these accounts by the tool shed administrator.  Clicking the <strong>Manage roles</strong> link in the tool shed's <strong>Administration</strong> menu will display a page like the following.  Notice the new <strong>Repository reviewer</strong> role authorizing a user or group member with the role to review repositories.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/tool_shed_roles.png\"></p>\n<p>The Intergalactic Utilities Commission has been defined in the tool shed as a group that will have the <strong>Repository reviewer</strong> role.  Clicking the <strong>Manage groups</strong> administrator menu option displays the following page showing this new group.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/tool_shed_groups.png\"></p>\n<p>For the sake of this discussion, we'll set the user account <strong>test</strong> to be a member of the <strong>Intergalactic Utilities Commission</strong> group as shown in the page below.  Although the focus of this document is the main Galaxy tool shed, those that maintain their own local tool sheds can use the features and processes described here to incorporate a review process into their environment if desired.  You can defined a local Intergalactic Utilities Commission using the combination of this groups and role, or you can associate a set of tool shed accounts with the role.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/iuc_group_members.png\"></p>\n<p>Those user accounts that are authorized to review repositories will see additional options in their tool shed menus.  Logging in to the tool shed as as the <strong>test</strong> user displays a new section labeled <strong>Reviewing Repositories</strong> in our tool shed menu.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/reviewing_repositories_menu.png\"></p>\n<h1 id=\"repository-components-that-can-be-reviewed\"><a href=\"#repository-components-that-can-be-reviewed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Repository components that can be reviewed</h1>\n<p>The default list of repository components that can be reviewed is shown on the page displayed when the <strong>Manage review components</strong> link within the <strong>Reviewing Repositories</strong> menu section is clicked.  Notice that you can add new review components from this page. Review components are clearly attributes of the repository, but you may choose to include additional process-oriented items for review in your local instance (e.g., installation and/or functional correctness within a Galaxy instance).  The current goal for the main Galaxy tool shed is for an automated buildbot to handle these review components some time soon.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/review_components.png\"></p>\n<h1 id=\"tool-shed-repository-reviews\"><a href=\"#tool-shed-repository-reviews\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tool shed repository reviews</h1>\n<p>Ideally (but unusually), a repository reviewer will find all of the components (features) of a repository in perfect working order, so it can be marked as approved without any changes by the owner.  In most cases though, the process of reviewing a tool shed repository will incorporate \"back-and-forth communication\" between a reviewer and the owner of the repository under review.  The current tool shed feature that the reviewer can be use to support this communication process is the <strong>Contact repository owner</strong> option in the <strong>Repository Actions</strong> pop-up menu for the repository.  The general approach to using this feature as the communication mechanism would be for the reviewer to contact the repository owner when the review is completed.  A result of doing this is the email address exchange between the reviewer and the repository owner, so from this point on email exchanges are possible.  This approach can be enhanced if the IUC advises that it should be.</p>\n<h2 id=\"initial-review-of-a-tool-shed-repository\"><a href=\"#initial-review-of-a-tool-shed-repository\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Initial review of a tool shed repository</h2>\n<p>To see how this works, let's assume we have our favorite <strong>Filter</strong> repository (owned by the <strong>test1</strong> user account) in the tool shed as shown here.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/filter.png\"></p>\n<p>Since the <strong>filter</strong> repository has not yet been reviewed, we'll click the <strong>Repositories with no reviews</strong> link in our tool shed menu to add a review to the repository.  The resulting page will be a list of all repositories in the tool shed that have not yet been reviewed.  Notice that the list includes a column labeled <strong>Revisions for review</strong>, implying that reviews of tool shed repositories are performed on a per-revision basis.  The <strong>Repository name</strong> column also includes a pop-up menu with an option labeled <strong>Inspect repository revisions</strong> that allows you to choose a specific revision for your review.  Each of these options take slightly different paths toward enabling you to add a review to this specified repository revision.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/repositories_with_no_reviews.png\"></p>\n<p>Clicking the <strong>'0:fb7df3011c2b</strong> revision link in the <strong>Revisions for review</strong> column displays the following page, which includes both a <strong>Revision</strong> button and a button labeled <strong>Add a review to this revision</strong>.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/revision_reviews.png\"></p>\n<p>The <strong>Revision</strong> button in the above page provides the mechanism for reviewing the repository contents.  Clicking it displays the page allowing the user to manage or review the repository contents, depending upon their administrative credentials or ownership of the repository.  From this page you can inspect the contents of the repository, including metadata about included tools (if the repository includes tools).</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/manage_repository.png\"></p>\n<p>Selecting the <strong>View tool metadata</strong>menu option in the above page displays the following page where we see that no requirements are defined for this tool (so the repository should not contain a <strong>tool_dependencies.xml</strong> file), but the tool config file does define 4 functional tests within it's <code>&#x3C;tests></code> tag set.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/view_tool_metadata.png\"></p>\n<p>However, just because the tool config defines functional tests for the tool, the tests cannot be executed within the environment into which the repository will be installed unless the repository includes the input and output datasets defined within each <code>&#x3C;test></code> tag set defined in the tool config.  For tests to work, the repository must include a directory named <strong>test-data</strong> somewhere in its file system hierarchy, and all functional test input and output datasets must be included in this directory (see the <a href=\"/src/testing-installed-tools/index.md\">Including functional tests for your tools</a> page of the tool shed wiki for all of the details about including working functional tests in your tool shed repository tools).</p>\n<p>We'll select the <strong>Browse repository tip files</strong> option from the <strong>Repository Actions</strong> pop-up menu in the above page to make sure the required files exist in the repository.  Unfortunately we discover that, in this case, they do not exist.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/browse_repository_tip_files.png\"></p>\n<p>Now that we've inspected the contents of the <strong>Filter</strong> repository, we can return to adding out review by selecting the <strong>Add a review to this revision</strong> option in the <strong>Repository Options</strong> pop-up menu available on the various pages displayed above, or click the <strong>Repositories with no reviews</strong> menu options as we did before.  Using the first approach will create a new review for the specified revision and display a page like the following.</p>\n<p>Notice the <strong>Repository revision</strong> button enabling you to easily move between viewing the revision contents and metadata, and the review itself.  The revision can be marked as approved using the <strong>Approve this repository revision?</strong> select list.  The review also consists of a section for each review component defined for the tool shed (see the <strong>Repository components that can be reviewed</strong> section above for details).</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/new_review.png\"></p>\n<p>As described above, a repository review consists of a section for each review component defined for the tool shed.  Since our example tool shed defines the list of review components to be the default list <strong>Data types</strong>, <strong>Functional tests</strong>, <strong>README</strong>, <strong>Tool dependencies</strong>, <strong>Tools</strong> and <strong>Workflows</strong>, the repository review page includes a section for each of these components.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/new_review.png\"></p>\n<p>Obviously, not all of these components are applicable to all repositories.  Remember that the filter tool in our example <strong>Filter</strong> repository does not define any requirements, so the Tool dependencies component review can be ignored in our example.  In fact, our example repository contains no Data types, README files or Workflows either, so each of these component review can be ignored as well.</p>\n<p>So this leaves us with reviewing only Tools and Functional tests for our example.  We'll fill out those 2 component sections as shown below and save the review (notice that all changes made on the review page will be saved when any <strong>Save</strong> button is clicked).  Each component review can be marked private (or not), marked as approved (or not) and rated using the Galaxy 5-star rating feature.  Of course comments can be made for each component as well, which is highly recommended if the component requires work by the repository owner before it can be marked as approved.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/functional_tests_review.png\"></p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/tools_review.png\"></p>\n<h2 id=\"repository-owners-and-users-with-write-permission-can-read-reviews-and-undertake-recommended-actions\"><a href=\"#repository-owners-and-users-with-write-permission-can-read-reviews-and-undertake-recommended-actions\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Repository owners and users with write permission can read reviews and undertake recommended actions</h2>\n<p>When owners of repositories that have been reviewed log into the tool shed, they will see a link labeled <strong>Reviewed repositories I own</strong> under the <strong>My Repositories and Tools</strong> menu section.  Similarly, users with write permission on a repository are allowed to see reviews of the repository via an available option in the <strong>Repository Actions</strong> pop-up menu.</p>\n<p>Here we log in as the user <strong>test1</strong>, who owns the example <strong>Filter</strong> repository.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/reviewed_repositories_i_own_menu_item.png\"></p>\n<p>Clicking the <strong>Reviewed repositories I own</strong> menu link displays a page like the following, which includes a pop-up menu option labeled <strong>Inspect repository revisions</strong> for each reviewed repository as well as links to each reviewer, reviewed revision, and revisions yet to be reviewed.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/reviewed_repositories_i_own.png\"></p>\n<p>Clicking the <strong>0:fb7df3011c2b</strong> link in the <strong>Reviewed revisions</strong> column in the above page displays a page like the following.  Again, notice the <strong>Revision</strong> button enabling the repository owner to easily move between viewing the revision contents and metadata, and the review itself.  The <strong>Reviewer</strong> pop-up menu provides an option to browse the review to discover the reasons why the repository is not yet marked as approved.  The <strong>Repository rating</strong> value displayed on this page is the average of the rating the reviewer set for each component reviewed, and is automatically generated.  Remember in our example, the reviewer rated the <strong>Functional tests</strong> component with 0 stars and the <strong>Tools</strong> component with 4 stars.  The average rating of the 2 components is 2 stars, which is what we see on this page for the overall <strong>\tRepository rating</strong>.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/filter_revision_reviews.png\"></p>\n<p>Selecting the <strong>Browse this review</strong> option from the <strong>Reviewer</strong> pop-up menu shown in the page above displays the review in a page like the following.  Notice that only the components that the reviewer included in the review are displayed here.  Ignored components that are not relevant to the repository are not associated with the review.  This enables the user to easily determine the steps to be taken to correct problems detailed in the review.  In our example, the repository owner should upload functional test data files into a subdirectory named <strong>test-data</strong> in the repository.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/filter_fb7df3011c2b_review.png\"></p>\n<p>After making the recommended corrections to the repository, the repository files hierarchy now look like this.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/filter_file_hierarchy.png\"></p>\n<p>Uploading the functional test data files has created a new changeset revision in the repository as well.  Notice that the repository now has the initial revision <strong>0:fb7df3011c2b</strong> which was reviewed as well as the new revision <strong>1:07d61f25cd35</strong>.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/filter_changelog.png\"></p>\n<h2 id=\"reviewers-can-add-additional-reviews-after-corrective-actions-are-performed-by-owners\"><a href=\"#reviewers-can-add-additional-reviews-after-corrective-actions-are-performed-by-owners\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Reviewers can add additional reviews after corrective actions are performed by owners</h2>\n<p>When a reviewer clicks on the <strong>Repositories reviewed by me</strong> link in the tool shed menu, a page like the following is displayed enabling them to manage their current reviews.  A pop-up menu option enabling the reviewer to inspect the repository revisions is available along with links to reviewed revisions and links to revisions not yet reviewed.  In our example, the reviewer will most likely inspect the <strong>Filter</strong> repository's new <strong>1:07d61f25cd35</strong> revision since it likely includes the requested corrections.  The link associated with the reviewer <strong>test</strong> in the <strong>Reviewers</strong> column displays a list of all repository revision reviews performed by that reviewer.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/repositories_reviewed_by_me.png\"></p>\n<p>Clicking on the <strong>1:07d61f25cd35</strong> revision link in the <strong>Revisions for review</strong> column in the above page displays a page like the following.  Now when the reviewer clicks the <strong>Revision</strong> button to view the repository contents, they'll discover the uploaded functional test data files.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/add_review_to_07d61f25cd35.png\"></p>\n<p>Clicking the <strong>Add review to this revision</strong> button in the above page displays a page like the following.  Here the reviewer can copy the contents of the review they completed for the previous revision <strong>0:fb7df3011c2b</strong> to the review they are performing for the new revision <strong>1:07d61f25cd35</strong>.  In many cases this could save a lot of typing.  The review can also choose to create a review for the new revision without copying the contents of the previous review.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/copy_previous_review.png\"></p>\n<p>Selecting the <strong>Copy this review</strong> option from the <strong>Reviewer</strong> column's pop-up menu in the above page will create a new review for the <strong>1:07d61f25cd35</strong> revision, copying the contents of the selected previous review.  The review page similar to the following will be displayed, and the review can make appropriate changes.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/filter_07d61f25cd35_review.png\"></p>\n<p>For our example we'll set the <strong>Approve this repository revision?</strong> select field to Yes and make the following changes to the copied contents of our original review of the <strong>Functional tests</strong> component.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/revision_approved.png\"></p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/functional_tests_review2.png\"></p>\n<p>Now when the repository owner clicks the <strong>Reviewed repositories I own</strong> link to inspect their <strong>Filter</strong> repository, they'll discover that revision <strong>1:07d61f25cd35</strong> has been approved.</p>\n<p><img src=\"/src/toolshed/reviewing-toolshed-repositories/revision_07d61f25cd35_approved.png\"></p>\n"}},"context":{}}