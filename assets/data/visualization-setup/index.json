{"hash":"eaf962330836a104724e8b210d95933603316eda","data":{"article":{"id":"2dfb0a00cbb7b74f9ac76e45a4a0d8b7","title":"How to Set Up Visualizations in a Galaxy Instance","tease":"","category":null,"date":null,"days":null,"contact":"","contact_url":"","authors":"","location":"","location_url":"","source_blog":"","source_blog_url":"","skip_title_render":null,"redirect":"","links":[],"image":"","images":{},"external_url":"","content":"<div class=\"toc-wrapper col-md-3\">\n<ul>\n<li><a href=\"#make-sure-your-datatypesconf-is-up-to-date\">Make sure your datatypes.conf is up to date</a></li>\n<li><a href=\"#install-wigtobigwig-bedgraphtobigwig-and-fatotwobit-from-ucsc-utilities\">Install wigToBigWig, bedGraphToBigWig, and faToTwoBit from UCSC utilities</a></li>\n<li><a href=\"#install-bed-tools\">Install BED tools</a></li>\n<li><a href=\"#get-genome-chromosome-length-files\">Get genome chromosome length files</a></li>\n<li><a href=\"#optional-but-highly-recommended-get-genome-data\">Optional but highly recommended: get genome data</a></li>\n<li><a href=\"#restart-your-instance\">Restart your Instance</a></li>\n</ul>\n</div>\n<div class=\"body-wrapper col-md-9\">\n<p>This page describes the administration steps needed to get Galaxy visualizations working.</p>\n<h2 id=\"make-sure-your-datatypesconf-is-up-to-date\"><a href=\"#make-sure-your-datatypesconf-is-up-to-date\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Make sure your datatypes.conf is up to date</h2>\n<p>The file <strong><code>datatypes_conf.xml</code></strong> describes the data types (e.g. bed, wiggle) that Galaxy knows about and how to convert from one data type to another. <code>datatypes_conf.xml</code> must be up-to-date for visualizations to work.</p>\n<p>If you haven't made changes to your <code>datatypes_conf.xml</code> file, you can simply copy the sample datatypes file to the active file:</p>\n<pre><code>cd &#x3C;GALAXY_HOME_DIR>\ncp datatypes_conf.xml.sample datatypes_conf.xml\n</code></pre>\n<p>If you've made changes to your <code>datatypes_conf.xml</code> file, the easiest approach is make a copy of <code>datatypes_conf.xml.sample</code>, add in your changes, and then copy your modified datatypes file to the active file:</p>\n<pre><code>cd &#x3C;GALAXY_HOME_DIR>\ncp datatypes_conf.xml.sample my_custom_datatypes_conf.xml\n&#x3C;customize my_custom_datatypes_conf.xml>\ncp my_custom_datatypes_conf.xml datatypes_conf.xml\n</code></pre>\n<h2 id=\"install-wigtobigwig-bedgraphtobigwig-and-fatotwobit-from-ucsc-utilities\"><a href=\"#install-wigtobigwig-bedgraphtobigwig-and-fatotwobit-from-ucsc-utilities\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Install wigToBigWig, bedGraphToBigWig, and faToTwoBit from UCSC utilities</h2>\n<p>Galaxy visualizations require the UCSC utilities <code>wigToBigWig</code>, <code>bedGraphToBigWig</code>, and <code>faToTwoBit</code> to generate indices that are used for quickly searching data. <a href=\"http://hgdownload.cse.ucsc.edu/admin/exe/\" target=\"_blank\" rel=\"noopener noreferrer\">Download these utilities from UCSC</a> and add them to your (or your Galaxy user's) path.</p>\n<h2 id=\"install-bed-tools\"><a href=\"#install-bed-tools\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Install BED tools</h2>\n<p><a href=\"https://github.com/arq5x/bedtools2/\" target=\"_blank\" rel=\"noopener noreferrer\">BEDtools</a> are required for generating coverage data for aligned reads, intervals, and mutations. Download, compile, and add the bedtools executable (\\&#x3C;bedtools_dir>/bin) to your path.</p>\n<h2 id=\"get-genome-chromosome-length-files\"><a href=\"#get-genome-chromosome-length-files\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Get genome chromosome length files</h2>\n<p>To visualize data for a genome build (e.g. hg19, mm10), visualization require the length of each chromosome in the build. Length files are named <code>&#x3C;build_name>.len</code> and look like this:</p>\n<pre><code>chr1 27473282\nchr2 38882233\n...\nchrX 28883322\n</code></pre>\n<p>Length files are stored in <code>GALAXY_HOME_DIR/tool-data/shared/ucsc/chrom/</code> by default, but this location can be configured in the <code>galaxy.ini</code> file:</p>\n<pre><code># Directory where chrom len files are kept, currently mainly used by trackster\n#len_file_path = tool-data/shared/ucsc/chrom\n</code></pre>\n<p>For example, to visualize data on the hg18 build for humans, a file called hg18.len must exist in the <code>len_file_path</code> folder.</p>\n<p>To download length files for all UCSC builds, run the following commands from your <code>GALAXY_HOME</code> directory:</p>\n<pre><code>cd &#x3C;GALAXY_HOME_DIR>\nmkdir ./tool-data/shared/ucsc/chrom/\npython ./cron/build_chrom_db.py ./tool-data/shared/ucsc/chrom/\n</code></pre>\n<h2 id=\"optional-but-highly-recommended-get-genome-data\"><a href=\"#optional-but-highly-recommended-get-genome-data\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Optional but highly recommended: get genome data</h2>\n<p>To display a build's genome data (i.e. bases/nucleotides) and differences between your data and the build, you will need to include the genome's data via the <code>&#x3C;GALAXY_HOME>/tool-data/twobit.loc</code> configuration file. This file tells Galaxy where a build's twobit genome file is located and has the format (note the space between the columns is a <TAB> character!):</p>\n<pre><code>&#x3C;Build> &#x3C;FullPathToFile>\n</code></pre>\n<p>An entry for the hg19 build might look like this:</p>\n<pre><code>hg19    /home/joe/galaxy/data/hg19/hg19.2bit\n</code></pre>\n<p><a href=\"http://hgdownload.cse.ucsc.edu/downloads.html\" target=\"_blank\" rel=\"noopener noreferrer\">You can download twobit files for common genomes at UCSC</a> by clicking on a build's 'Full data set' and downloading the build's twobit file. If you have a genome's fasta file, you can create a twobit file by using the <a href=\"http://hgdownload.cse.ucsc.edu/admin/exe/\" target=\"_blank\" rel=\"noopener noreferrer\">UCSC utilties</a> <code>faToTwoBit</code> tool.</p>\n<p><em>NOTE: we're developing a graphical user interface for downloading and configuring builds in Galaxy. Stay tuned.</em></p>\n<h2 id=\"restart-your-instance\"><a href=\"#restart-your-instance\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Restart your Instance</h2>\n<p>To ensure that all changes you made take effect, restart your Galaxy instance.</p>\n</div>\n"}},"context":{}}