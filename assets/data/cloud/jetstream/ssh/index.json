{"hash":"a97cc003ab7b7b0128b2927bf289a961e571a0b8","data":{"article":{"id":"45088452bd97e907b35578580f7bce0f","title":"SSH Access","tease":"","category":"","date":null,"days":null,"contact":"","contact_url":"","authors":"","location":"","location_url":"","source_blog":"","source_blog_url":"","skip_title_render":null,"redirect":"","autotoc":null,"links":[],"image":"","images":{},"inserts":[{"name":"/cloud/jetstream/linkbox","content":"<p><a href=\"/cloud/jetstream/allocation\">Access allocation</a><br />\n<a href=\"/cloud/jetstream/ssh\">Admin - Connecting via ssh</a><br />\n<a href=\"/cloud/jetstream/ssh#adding-galaxy-admin-user\">Becoming Galaxy Admin</a><br />\n<a href=\"/cloud/jetstream/troubleshooting\">Troubleshooting</a><br />\n<a href=\"/cloud/jetstream/faq\">FAQ</a><br /></p>\n</div>\n"}],"external_url":"","content":"\ntable-of-contents\n=================\n\nend-table-of-contents\n=====================\n\n<slot name=\"/cloud/jetstream/linkbox\" />\n\nSome tasks on the Galaxy server (e.g., configuration changes) require you to connect to the VM using a command line shell. This can easily be done from within your browser by opening the VM details page and clicking the *Open Web Shell* button.\n\n<div class=\"img-sizer\" style=\"width: 300px\">\n\n![](http://i.imgur.com/xYtIYoR.png)\n\n</div>\n\nThis will open a terminal inside your web browser with a command prompt in the VM.\n\n<div class=\"img-sizer\" style=\"width: 300px\">\n\n![](http://i.imgur.com/0avr6go.png)\n\n</div>\n\nFrom here, you can perform any administrative task. You will be logged in as the user that launched the instance (*eafgan* in my case, as shown in the screenshot). This user has privileges to become the *root* system user via *sudo* command. Some tasks will require you to become *root* user while others will require you to become *galaxy* system user. Changing users is simple:\n\n* To become *root* user, run this command: *sudo -s*\n* To become *galaxy* user, run this command: *sudo su galaxy*\n* To return to the previous user, type *exit*\n\nChanging Galaxy settings\n------------------------\n\nGalaxy has an extensive set of administrative [configuration options](/admin/). The most common changes to Galaxy are performed by editing *galaxy.ini* file. On the Jetstream image, this file is located in */opt/galaxy/galaxy-app/config/galaxy.ini* and it must be edited as *galaxy* system user. You can edit the file using [nano](http://www.howtogeek.com/howto/42980/the-beginners-guide-to-nano-the-linux-command-line-text-editor/) or [vim](https://www.linux.com/learn/vim-101-beginners-guide-vim) editors. The most current list of available options is always available in the [galaxy.ini.sample](https://github.com/galaxyproject/galaxy/blob/dev/config/galaxy.ini.sample) file; any missing options can be added of the existing ones can be modified. If adding new options to the file, make sure that you are adding them under the right section of the file, most likely under *\\[app:main]* header. Note that after changing this file, it is necessary to restart Galaxy.\n\n### Adding Galaxy Admin user\n\nTo be able to add new tools or reference data, it is necessary to become Galaxy Admin user and use the [admin panel](/admin/). This is done by editing Galaxy settings (see above section) and adding a line like the following under the *\\[app:main]* section: *admin_users = \\<registered user's email address>*. Save the file and restart Galaxy process.\n\nRestarting Galaxy\n-----------------\n\nAfter any Galaxy configuration changes, it is necessary to restart the Galaxy process. Galaxy process is managed by [Supervisor](http://supervisord.org/index.html) - a process control software. To restart the process, it is required to become *root* user, and restart the Galaxy process via supervisor:\n\n````bash\neafgan@x:~$ sudo -s\nroot@x:~# supervisorctl\ngalaxy:web0                      RUNNING    pid 4077, uptime 3:17:41\nmunge                            RUNNING    pid 1376, uptime 3:57:06\nnginx                            RUNNING    pid 1378, uptime 3:57:06\npostgresql                       RUNNING    pid 1375, uptime 3:57:06\npre_postgresql                   EXITED     Apr 15 11:33 AM\nproftpd                          RUNNING    pid 1385, uptime 3:57:06\nslurmctld                        RUNNING    pid 3512, uptime 3:47:58\nslurmd                           RUNNING    pid 1563, uptime 3:56:36\nsupervisor> restart galaxy:web0\ngalaxy:web0: stopped\ngalaxy:web0: started\nsupervisor> exit```\n````\n"}},"context":{}}