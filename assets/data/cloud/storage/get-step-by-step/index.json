{"hash":"833cd7e24cd461bad7de6bb0d6be755efc588fb3","data":{"article":{"id":"05367d88a3d758f49823dfd377a310f8","title":"Get Data from Cloud","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<p>The <code>get</code> API allows a user to copy data from a cloud-based storage (e.g., Amazon S3, and Microsoft Azure BLOB)\nto a specified Galaxy <code>history</code>.</p>\n<p>You may use the following steps to use this API:</p>\n<ol>\n<li>Login to Galaxy using your Google account (<a href=\"/authnz/config/oidc/\">read how</a>);</li>\n<li>Define a <em>cloud authzorization</em> configuration (<a href=\"/authnz/cloud/\">read how</a>);</li>\n<li>Get a Galaxy API key by going to <code>User -> Manage API key</code> On Galaxy's webpage and clicking on the\n<code>Create a new key</code> button;</li>\n<li>\n<p>Make the API call as it follows:</p>\n<p>4.1. Open <a href=\"https://www.getpostman.com\" target=\"_blank\" rel=\"noopener noreferrer\">Postman</a>;</p>\n<p>4.2. Choose <code>POST</code> and enter the following in the fields highlighted in the following figure:</p>\n<pre><code>http://127.0.0.1:8080/api/cloud/storage/get?key=1234567890\n</code></pre>\n<p>Replace <code>http://127.0.0.1:8080</code> with the IP address of the Galaxy instance you're using, and\nreplace <code>1234567890</code> with the your API key.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 935 336' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-ba8a1785c5178a9bbc310d1ccb110828'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-ba8a1785c5178a9bbc310d1ccb110828)' width='935' height='336' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAXCAIAAAA0gN7GAAAACXBIWXMAAAsSAAALEgHS3X78AAAIHUlEQVRYw8VX2VNb5xXX9KF/QRc3DCbsFmIxmCVQvMSYce3aAfehmbY2LTNOmzEYkqYTp07cxoY4MZlMHRaD8Iwf%2b9D2IWnrSd0209RNZsAGSWiXMItA%2b3K13V26uv3dey0ZsKmRX/qb33w63/nO%2bZZz7rdI9WLdnsFWdV9LZf%2b%2b4v6mMggDzWUv1FZV19bV1tbW1UlldXW1ItTJQLW%2bvn6vDI1GU5XFnj17ymVUyIBQKSPXqkAj%2b5SrNR17y3/U%2bHxllUYt62GjVquVMidA26Aur1NXVmXnoABDK5NRDbVXiH%2b8JowPiOdbxfNtQk%2bl2N/U8926/Z3f%2b0F318mTJzs7O5ubm0%2bcOPGSjI6ODlRPnz596tQppQkjdXd3X7hwYf/%2b/RCOHz9%2b9OhROHa91HXkyJGDBw82NTWdOXMGLj09Pb29vdBgdLWmZv7nVeLV5u6Gkqb2g0c7OzEtjNLY2Hjs2DF0e/jwYfRWUVFpv/HOXy%2beVdeg9ftdXdKUAEwDZm1tbaqXK3d90dvxtx%2b23DlSdKfz%2bc/av/WvF79zqLywQlPd2CDFuVqjKS0pwXob9u6tl0NeWlra0IC2%2bpqampKSkoKCAggHDhxAsBW9Rsa%2bffuwNhgUFRW1tra2t7dD09LSguQU7S78dsHud9q%2b%2bacTu9S7d5WUVWCUwsJC2MMYgS8uLi4rK0Nadj333ODx9jOHGgt2F2E2WJ6S%2bWoZ6Ep1Qzs9NjY6NjE%2bOqUdndSOam%2bOTk3fmL45OX1zYkqLVhCyJExpJ6emJmXckAFhampKq9VOTEyMjo5CMzY2Nj4%2bPiEDMkooYTMmA00oFS/g%2bsTk7zBwtlP0A2OUyhBKJ2j88PrHH308ppWtFAOlz%2bnpacgqUUJG/P9BEASSJJMbkEgkaJpOZSGk06CiyWQy0WgULqiur6/DXcVRFO0ycMtfhJ1Gr9UYcJh8NqPHYgg4zK6FuXWTTpLtJo/dEtXfTa2a4hQTj0UpisJIQhbpDRDyRDweN5vNCzIMBoPRaNTr9YuLiz6fz5sF5OXl5UAgEIvFZmZmsIa1tbXbt28zDKPi0xmOIQR6NZaI%2bUORSDwejsYC4QjKYIQIEVFfMBSJxQNELBnyCskwxWLJFDwRAyl3MjZGFNWdzx4LRlx5GYqgRB0C9xhyrY%2bSIwgqjmNphktSPMtySCXLMEgnKhRJYqEIMzzlGdMUwyUoTJtmWLgwEKOxGEqSoiAQ0ShBRMORCKoYikW/OyOMN5HldgKWleyQExUWGwn4DXP37WaTw243mkzIoMVqNZlMs199aTUZ5%2b/N2lAx6E16ndW4YDEu6O7fA%2bdmZ6BfmJ9fdjqXnQ7D/JzNjOpc0OdNc1IAOJraKakNzAdut1slDL6cGR7MXOkXrpwX3/hxymHiRTHlcYlv/UwcHhSHBzKX%2bzND/eLQ%2bSwH0u%2beU4hW4XIfDCT98IDCzOU%2b4d1zMvvQmjN%2bOmH89lnh4ll8BYgvCumXZXOCLGclGR6PR0Vde9Pj83uMeq/bTQ4NEnc%2b8XLp0H8%2bpy6%2b4na5vDaz12H1OWweuxUCSrfNgqrPafOidNikVqdSRavFY7NA73faFQOPw%2bpftAcfOHdAR3Dpgc9sEi/99PpnxDcuMWVDVMkVqvgyVXolWfAb6g/zDJsM%2bwMhIBgM%2bv1%2bfN7Y3ypae80cSdz98is7EWcmhom/f%2bphU2v/vE1fe9MaJHRmq8GxaFxcmrfaDA7nvNU%2bs2DS2Rw6m01vdy44F3U2O1rnLNZZoxmlzmo3LS5ZV1ywnLfYUK74g4EE6Y8nn8aEP0G5A2Hxw/4Lv4%2boXmXUI3ThEP31PvJrryZUfaT2Lkv4V2buzeHIwryXlpZwIskLGH4tsO4K6Gb9y0vkb8/F/vHnQFqMzvybfqs3uLIUMOqCloXNNAbMBhBywPxQ6TPpAyZJE7IYQUUZAq1GMCyXOXkbLoRt5oDuvvjrn9z8nKgZYQ6NUu3XqRc%2bAsnaD6i/GJGBiNfjQ/jDQCj0MAPC269k3v%2blePX1DHjpF%2byilRFF1rsuDA9KvPo6mH7vNVCRBcXyvUdKqfr%2bG0LOJmupVNMb3WVhW8IS2%2bCDX3Gs9KHTNEtv%2buClc4dNpViOlzYDZJ6X9gAjCOEESZA0QTMunuaEjHSSUlQCpXRESuTgxqeSFJ0kKenQZGmQT6XRRYKkoF8jozSOTp6HAa040jSkpHwAwx3jJUiSYljIT6GQwRWQ4jdROmAZmkvE%2bGgYpXRwRSM8mfAgA4xn1W2cX9PPeiw6nXOWDfux0QmCQI6ISEQpOXn/45zH9omEQt54xJuMpjgcFExEzqY%2b5KIwABwjkVg0CjMoIaCEl%2bIOS0XeQkxXpiTIGoZ70h3GUUnes8Kv2PjAOhcjeJedD/s8Pp9K8CyJvtXU%2bgNQAEPutJBRXgS5d8GWN0IGYvqRUnqi8ClcQLgpt9yyG18Zjz86ALgwWeCKRDX9JMh3cyqlDAobnkunePQofULK/c%2bl04ura6FYTHkL5PUaQ%2b9Ly8s2my2WvzuWZLfbrVYrThXleHmiGfpE5zTLimRcXLGI3lVx3SlyDB5J0k2ciON5RgjplPw0eXIM/geQ4e0CvHPfLel6PANZYZP%2bYQZGRkZu3bqF/Yab%2bRnew0p4VrLApti5rzLvTBb5Di0do3DDOlwuF1aJDzGdP/Dhbrznt/uOt8tAaktU88GjPYBRKRnPkIG0/G8D/0LQyTNkL/cnBn8MsJ68M6DEL/fE5/OHEnv4KuHPC5x8FivuuQTuHMjAfwFrPwJ6s0ii6QAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"935\" alt=\"image\" data-srcset=\"/assets/static/get_01.82a2fbd.2efd6297f449b7d6fecfcc5f89ab4c79.png 480w, /assets/static/get_01.d95422c.2efd6297f449b7d6fecfcc5f89ab4c79.png 935w\" data-sizes=\"(max-width: 935px) 100vw, 935px\" data-src=\"/assets/static/get_01.d95422c.2efd6297f449b7d6fecfcc5f89ab4c79.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/get_01.d95422c.2efd6297f449b7d6fecfcc5f89ab4c79.png\" width=\"935\" alt=\"image\"></noscript></p>\n<p>4.3. Get the ID of Galaxy <code>history</code> to which you want to copy data, by going to the following\naddress on your browser:</p>\n<pre><code>http://127.0.0.1:8080/api/histories\n</code></pre>\n<p>This will display a JSON object similar to the following, note the value of <code>id</code> field:</p>\n<pre><code class=\"language-json\">[\n   {\n      \"name\":\"Unnamed history\",\n      \"tags\":[\n      ],\n      \"deleted\": false,\n      \"purged\": false,\n      \"annotation\": null,\n      \"url\": \"/api/histories/df7a1f0c02a5b08e\",\n      \"published\": false,\n      \"model_class\": \"History\",\n      \"id\": \"df7a1f0c02a5b08e\"\n   }\n]\n</code></pre>\n<p>4.4. Get the ID of authorization defined in step #2, which you want to use to read the\ncloud-based storage, by going to following address:</p>\n<pre><code>http://127.0.0.1:8080/api/cloud/authz\n</code></pre>\n<p>This will display a JSON object similar to the following, note the value of <code>id</code> field:</p>\n<pre><code class=\"language-json\">[\n   {\n      \"authn_id\": \"f2db41e1fa331b3e\",\n      \"user_id\": \"f2db41e1fa331b3e\",\n      \"last_update\": \"2018-12-07 17:53:55.714802\",\n      \"last_activity\": \"2018-12-07 17:53:55.714818\",\n      \"provider\": \"aws\",\n      \"model_class\": \"CloudAuthz\",\n      \"config\": \"{u'role_arn': u'arn:aws:iam:: ...'}\",\n      \"id\": \"f2db41e1fa331b3e\"\n   }\n]\n</code></pre>\n<p>4.5. On Postman, goto <code>Body</code> tab as shown in the following figure and enter the\nfollowing API payload:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 935 454' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-275922acd81be4d3491785f16b110107'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-275922acd81be4d3491785f16b110107)' width='935' height='454' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAfCAIAAADY01yrAAAACXBIWXMAAAsSAAALEgHS3X78AAAKCUlEQVRYw8VX6Y8UxxUfKR/yH5BgEQh3gD1nWc7AQiDhVAxRTEyEjPzBGB9JiITX4fICe8/uctgWV2QFRRZfkewYQxxj4yWws/cxe7Mze82x3TM90z3T53R35ddds8NwhMPC8PRU896rV6/rHVWvxrG20Pnm8qw9K7L2LFu4Z/miN1bm7l2RVbQ437m4cLENhYWFBQUFGNOs0%2bksnARM5efn5%2bXlZWdn5%2bbmYszKysq2gRIQQgFjjg2QgHXm5%2bfkOYsKsncsm5%2bT78yzZ6kaRtB5NlhEvtOZk%2bXMyc533t0DYMmSJfTrjv1LZ5OLR8yP95G9S8jby40/ziVvF77zy%2bzlv1r/261bt2zZsn79eqhu2rRp8%2bbNYNetW4f1O3bs2L59O2hMLViwADrFxcUrV67caANYqg%2bFoqIifGaHDTt37ty9e/eaNWtyc7Jn/yLrq9cWkLLFfyiYmbtkxa/Xr4PDWAtlLMf%2bVq1atW3btpmz59RX/OXq4TcWZmVt2rhx69atdBtr167dsGED1ByvzJ/a8tamhtfXujfNdG%2bZc3vNlI7fvPTygp/Ny85ZCocLChCcOXNmI2agsfUci51Dw4%2bAgZ42bRriCqPwBMKlS5fm5lgRhXUozJ07d/r06atXr8Ynly1bhm0tXLjw5zOmT5k248iKKd%2b9MnXxrJ/OnDM/Py8Xalg1a9asRYsWwSwWwuxPpr703str920tmjZ9RoHTCeOLrU0V0NxCx%2bGqrassL62sKKt01VS6XJVga2qrauuqQUBSU1NVUwsaYxXoale1DVVVVZWVlZSuqakBfezYMQgrbACLsby8HCOELper3AYqpBJAaWX18bKKiuoalwsGq2trazEFa7CJWWoNbElp6dHSMirPVKirq8PoIMS0kYJ5Lz4ofPZgGIYkSaIoJhIJcRJkWU5Ogq4nDV2nEugLgqDruqqqwWDQNE2HJivyaJc2fDPm7Wbv9IZtnOj3cN7%2bQE9HqM8DlhnoZr2DvKdB83bEZZWPxfBJGDKeBcBOZ2dnW1tbe3t7hw3Nzc29vb2BQMA/CaCHhoawYyg3NDQwDDM%2bPn758mX47EjqpiqHddHLC9x4iGEiXIgN%2b0MTLBcdCwRBAEMMGwhzsdCYEQ1KihaPC4qiYLGVHRsyIwr2qRxAXFUbNE1TM0B5ACCkyunkYLkDirKsibKuqRoSCRb5hCnZzitGmEL6VFlWVC0hWwy1jjEej8s2wBnQPI/cWMlRnwVo98KDHoKNhCMO/OC7ba0t/X19fb19XV1dSCgyiFQ2NTW129DT0%2bPxeLo9Hkz29/fTLEMOIejh4eGBgQHKtrS0hEIh1Cj18PsBlj4UH/Qw4A84aHYQRRwdxQq/RFlKQI8eKQpUmcYbY1o/rQxIq6UtPx1YdhTtPrQ9oNYyKwqnwoF9hGyYsAHngxKQYDotD00ChJlq1hTOyCSLWUrfp/yEEAwxssB%2b2ijPKxPzXGJutZhXLTprEvPLxX%2b6UejcBBuORCIsy8IsDnQoGLIcQIXU19ejbGCCftjn8%2bHbqBaURKcNra2ttJzcDQ2gUUId7W3trS2tLc3tba3Nje4mtxtSTNEKbLZpLMftken/o2E8EFKEicovJcebiXnV8oxy6cfvJn60V3C8lai6psTZUXdjC4qcXkrRaBRLHCgG7BUiK9pMKlqZIbwPIAwEUXvBIBcLcFGKY%2bGIP8yBwDRMpRfSBKZtPjYbVgZ49mKDPOOYWFBrJWFBhbiwIjG9RPzHbVlLhMfG/dgrMgB7gsBbGcis16SiZtb63TpWMoQgkkmNnUieOKTXHTBPHTFPHjJPHjHqDhgnDqrshIoT/LBj8ORHQpKVuKgICQsTko2iIqUOB/aowRjuRBDBQNByIN0Ax%2bOcYl%2bR6b5IR3o6Uyy6gGnyPa1k/y51qD/aWC%2b03A6235QHPMb%2bXaKnVdQNMaOnppdnmnrcBarqD6CmyGpC0HhOjfMqbmohqiVQO3YGcCxwNDiOczM%2bXPS4UtiwBZAjrZDT%2bIFABUAUUKThjluk7qBEyODoCI5LM%2b%2bPEaJ/eDTafIuTZGYihLWoURjBKhp5m448/nb8f4DuFBhODnm0ca8ai2i%2bHo3xB0MTDnQ2U9dNQ8ejxNSNpAY2CQmxJJYc3qNbAolpWIhZ9FtvP3lnG7n0EbnoIhdryN8rzUsfm3/6PRke1NGMsdBuzxjRE7AAqAMJoXQKDWvWUnhCsF5FRjJlBJs1rGsUn2F4ISxrE6Kc0A1N18eisYisRhQtGBfDkgIFPEGiisZICispjCiF1SSHK%2bzShfAnpwIX6phPTumfX%2bJc70c%2bPRsJBqCPRww9sujN1uuCGSPBEcKFSGiEsOMWRkKEGSd8WLMz8ESPPvpgkeIkOEwmRgnrB4cr3EEGuqQbV8XvrvFf/0u99bXh/pa//kXixlXh%2bhfR/3wufHPFbLwh3rgKCffvz7ivPhOuX4FQ%2bObL6H%2bv8403uVvfCo31Zl%2bHfONKoqOJ5yKwi5sNlzRKSBDi1lcFjghRawwHrJHnrDHGEknQrbDqT/F2TWopawk%2b5YCxa03ydIl2%2bqhy8jBf9Z52uoScKyfnymwsN8%2bWGmeOm2fKzDPHyYUycr6MXCgl50vJuePk7FFytoScOWp%2bdFQ/cdg4X2nu2Uz6O7Ed1B0tITy2rBKh9YOkEzJJT0p0Q386MOhalB%2bM2w4ceB0pFAwzounBeAJGUWGqSTRiIT6p6tYC6PBJkjBJTCExzaIFnbAJEjeIgZ3aUTRPf2C23bYIHKd7Xqn2fwnTRpI5fj9IWYADViMzil/DDSXEYmJcQMQwIU1Ew10jka4RrmcsOhCIDQUlXgr69MFWfbhH72vSO%2bv1brfuuaW7r%2bmBITQFmWh2HZ/%2bgHQ00D8p5IcHy4EgdUDT8DRD2dKYyeE42zka7hwVxiKxYRY9IxYhdzykv414e8jYHWsc7rXY0Khp5wYZsP4rkQ9LSPvzcwD1hNd7ygFeEPDCpBOJQJRpH2E7RsLd42iA2H1fizk6QPxeMthBfL1k/A4Z8hBfD%2bEYTTeSL9ABNJiUA0I8jtYzmQEhcHsw3O0XvCExjOLiRFGihWcYqWZgGvRmM1KF/oIcQIdNOYBcCPTOtmvLTCb5sD7YbgR8ZHTQ9Habipx86HFKG3uRDtA/h3ioZP67xVXb3URGBqyKH%2bwkiqI/2tgLc8As3o2Q46WFv8B0Ai8jGl1JIHKcqCJRxMcbSznQ8dwdkPa9OuLz9fZ0e%2b8MdfX5BsfC/ojMCDobNzjJwghQNMA%2bCmMagzZfVxJtcDMGYQUDLeIHRSZOeAmHWHaof96Bv31%2bPEwZ1utnA9GEiG6lmryK8S7y2iNRTuI1qtYdSjTeBsFLBq%2bQHxRjMhEV64%2bHw3z3d6R6P6l9n9QUkxMHSN3fLALs0%2bLJg%2bSvrxLfgF1%2bz6%2bE/gdPFtxBoiH1uQAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"935\" alt=\"image\" data-srcset=\"/assets/static/get_02.82a2fbd.66107300d5732e4cd2e3bca81c9b6280.png 480w, /assets/static/get_02.d95422c.66107300d5732e4cd2e3bca81c9b6280.png 935w\" data-sizes=\"(max-width: 935px) 100vw, 935px\" data-src=\"/assets/static/get_02.d95422c.66107300d5732e4cd2e3bca81c9b6280.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/get_02.d95422c.66107300d5732e4cd2e3bca81c9b6280.png\" width=\"935\" alt=\"image\"></noscript></p>\n<pre><code class=\"language-json\">{\n    \"history_id\": \"df7a1f0c02a5b08e\",\n    \"authz_id\": \"f2db41e1fa331b3e\",\n    \"bucket\": \"vahid-objectstore\",\n    \"objects\": [\n        \"rep1.bed\",\n        \"rep2.bed\"\n    ]\n}\n</code></pre>\n<p>Replace <code>vahid-objectstore</code> with a bucket name from which you want to <code>get</code> data,\nand replace <code>[\"rep1.bed\", \"rep2.bed\"]</code> with the list of objects you want to\ncopy to Galaxy from the <code>bucket</code>.</p>\n<p>4.6. Click on the <code>Send</code> button; Postman will submit a request to Galaxy to <code>get</code> data\nand will shows a result as the following.</p>\n<pre><code class=\"language-json\">[\n    {\n        \"update_time\": \"2018-12-07T22:41:39.844046\",\n        \"uuid\": \"7d1a6d7d-6651-4cfe-8792-beb13a79949d\",\n        \"deleted\": false,\n        \"purged\": false,\n        \"purgable\": true,\n        \"total_size\": 0,\n        \"state\": \"queued\",\n        \"create_time\": \"2018-12-07T22:41:39.790590\",\n        \"file_size\": 0,\n        \"id\": \"5969b1f7201f12ae\"\n    },\n    {\n        \"update_time\": \"2018-12-07T22:41:40.058628\",\n        \"uuid\": \"195e1cee-326c-4f88-bbf5-63a51bdc51bf\",\n        \"deleted\": false,\n        \"purged\": false,\n        \"purgable\": true,\n        \"total_size\": 0,\n        \"state\": \"queued\",\n        \"create_time\": \"2018-12-07T22:41:40.005482\",\n        \"file_size\": 0,\n        \"id\": \"df7a1f0c02a5b08e\"\n    }\n]\n</code></pre>\n<p>This JSON object shows two Galaxy datasets created for <code>rep1.bed</code> and <code>rep2.bed</code>.</p>\n</li>\n</ol>\n"}},"context":{}}