{"hash":"eaf962330836a104724e8b210d95933603316eda","data":{"article":{"id":"0318e2d021deae782cf067dbbc39b35c","title":"Send Data to Cloud","tease":"","category":null,"date":null,"days":null,"contact":"","contact_url":"","authors":"","location":"","location_url":"","source_blog":"","source_blog_url":"","skip_title_render":null,"redirect":"","links":[],"image":"","images":{},"external_url":"","content":"<p>The <code>send</code> API allows a user to copy data from a Galaxy <code>history</code> to a cloud-based storage (e.g., Amazon S3, and\nMicrosoft Azure BLOB).</p>\n<p>You may use the following steps to use this API:</p>\n<ol>\n<li>Login to Galaxy using your Google account (<a href=\"/authnz/config/oidc/\">read how</a>);</li>\n<li>Define a <em>cloud authzorization</em> configuration (<a href=\"/authnz/cloud/\">read how</a>);</li>\n<li>Get a Galaxy API key by going to <code>User -> Manage API key</code> On Galaxy's webpage and clicking on the\n<code>Create a new key</code> button;</li>\n<li>\n<p>Make the API call as it follows:</p>\n<p>4.1. Open <a href=\"https://www.getpostman.com\" target=\"_blank\" rel=\"noopener noreferrer\">Postman</a>;</p>\n<p>4.2. Choose <code>POST</code> and enter the following in the fields highlighted in the following figure:</p>\n<pre><code>http://localhost:8080/api/cloud/storage/send?key=1234567890\n</code></pre>\n<p>Replace <code>http://localhost:8080</code> with the IP address of the Galaxy instance you're using, and\nreplace <code>1234567890</code> with the your API key.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 936 377' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-c8ba9395243867ebb7dd3c30bdb14238'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-c8ba9395243867ebb7dd3c30bdb14238)' width='936' height='377' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAaCAIAAACIHs0YAAAACXBIWXMAAAsSAAALEgHS3X78AAAI80lEQVRYw8VX2XMU5xHfynte8hCcciQEEkirg7WEDhJMTImbYFcFF3YlecApnmJDpVyulJ9IHJeV2IGwSNpDohKcCAFO%2bU/ATiVxlSEGIe0uktCFtNpjZnbn2tk5d2Z38pv5dpcVpyAP6erq6v6mv6O7v6%2b7x3NqR8vJHc0nuzed7Gl8p6/5V71Nr/ha27b5fNsc8Pl87e3tvhqA%2bFIFOjo6Wl3wurB169YtW7ZsdYEwLS0tGG9rayMKzc3NUG5ra/W2tvravG/1buxpb2n2tpJxbwUwi4iOsrel27sF3LYawDGwO5jOzk6PfemD0uiv7V/22qd%2baP10s/1O93u72npf6X/tyJHDhw/v27dv%2b/bt%2b/fvP%2bzC3r17Mefo0aPHjh3bs2dPb28v9ujr6zt9%2bjREfD1y5AiYgwcPQhmzdu3a1dPTA/748eOYcuLECfCd2zrqvb7f9G%2byz/aNHq7f1PbSoQP7cSYo7969G2tiU7jpzTfeaG73vXt0v/nZJz/%2bQVffzpdfe/XVQ4cOkS0AUO7u7vb8663%2bL37%2b8pf7Nn15sPHarg1f73nxqLeuqa29Fwfv6kIcGhs3IxxdnZ1dXZ2u2AgbMBNbwsd1dXVNTU04OiyBV8g4%2bK6uLoiIQ0NDA5j%2b/n6st3PnTnzd1LBxQ13DAe8L/3j9ez/zbfju9xs6fT6okdBhfUyvr6/vaG9/sX7jj3zegTcPtDdtbm7x9vb0uIfqwiIk%2bND3%2bM%2bfPz943h8I%2bQNBf2jEHwwPhUaGQ%2bGhYAgI5j4fCA4PDwcCAdChoaFABSCeO3cOI4ODg85ig4PgCUP0IUIBot/vJxODgYB/OHjGP/inwUAo6CwbCoXIasFgeRfog/oHh35/5uzQsDOOuUEXoDAyMoIpo6OjHtsu2f9X0DRNluV8Pi%2b7QJhCoWC6YJlm0bIMw1BVFcqgUABD07QkSWA82krEuPdvYSFKzcYyczF6NpqensrOT69GbiWiExCpmQg1N83Fbhiz12W9wHOcruu5XM6yrGIFrLVQXDfgoIuLi5OTk5FIZGpqKhqNEj6RSKRqAOLS0hJOPzc3h6%2bYde3aNSg7BhgaZ8lLoiSkmGxWEBmOTzEZMOlMlmY5QilO4DOUySVVw8zlRGIAtsd80FLJiSGhhFm/AfAxvFt4CPSHgKiZFYCbQN0IyKqS1xAhLZ8rOFSydE1HJEVByYmmpuqKbAA1DbHFeIGMqIom53M8j/AjqCLHSjyX4ziBzUqCYCjKOlEH1TTj2QHG4AqxLOsRTWticXk6Rc2k6MnlVeCdJAX6zdwi6MTSciyRisST0Xgysrw6k2Yml%2bM3F%2b5BjK4m7yTTt%2b/FF1lh2p1LxJkUZdj2%2blEvlp7DALhfFEXcLo81HjSvjhYuh4qfjVpXR6q09PcLQIzXDgKN8SCQjEDBvBIGgiFfCUMGn45XR8yxIeP2dd0q6ppWviq6bltr0dSL5oM3ChEQBIFKUx5x9I/ClQvieEgcD1dRuBTix4K1IhRAHeZyOHd5RLgUBuOOE7H8lQclmmX9INF5BOLr55/mP3pX%2be3bjKxmaJphMnyWXkjLO86pjR8qzR8pLQNK64C8%2bXfy63/Rcu6F4XkelGEYMDAgnU57ZhLJf66k7vASbdtpFxc1I2Xbd/P6N%2bnsZFYE3qLY2wx/O8N/vUrdpFiM384IQDL%2bn1QGzGTWEW8k6Zggx/g8dCYY/nqCnsry1ZXXYLGIXbIzEfmT9ylRotNpiqL5THpqJf/tU8oLp9W6AfU77yueX0jfeju/bUDLckIsGpmYmFhZWYnH48lksmyAeOEM6/oYjqwivAsncWNB/hLQiUaFOgz7t2FQ5%2btYRRwLViIQdHw/Hi6PjJdD9AhEED7/q/yH95QPTzF5pTYCfefU9o%2bV7WeVjo8V74C88QP5J3/WJClPUWlcerg/i3wpCAgCRVEea2zYuhK28AYuh8zxgItB52GA4gFcdpgK74j45Go6g0V3pOhOd3WCNfr3ebJmhalBKHzq129%2bpRZMVVFUAprG57WM6CCb0zjJoULefSJu9gEDHcN9A04E%2bJKdsx1M2yUNddG2ZdtGrVNcBlR3Ua4gPvEke7g8yiNjlyS7ZKydVWW0imZ1qQfxoSxUNB9Eq4BSrBiyZEiioalI66aCPO8asBqbXI5MJGKTX83fUFgKiZnNMFmG5hAnmmYzGc0pAqrAcQxFsTSdEbhFkTbhA12FpsBkJuilZC5b1HS8L8zCZcB06HOZDBRUlA5dEzkOg2SpWtRV1ck/7rmJix%2bX9w2WLqzcLSzGDIEtpOPW8iyKD96NpxS/a96bLsbvluJzVnKJFLlaqFa%2biuxgbTksur1DVcdtYKxa8XGAVEgyOuEfp1xbgE2yPzbFxcnlnAig9KMlWE6kEjRT2xGsH1Lp9PT0NN7TM00nmniUsVhsYWFhfn4efQ7seXTDp6ooW07zQsdt%2bDoxb3N0XlHxqD0wUNdUNB/woeW64ZmAeBGUtEaA9c%2bFI7WaPgJX6OH4VzVJHPAYLEMHliyzHIGLFy%2bGw2FFUYgLnxXgSBwCjkR6Rm4mPeM6QwEdHO75NgVFX%2b0YMDs7i%2boAB0C2nh1I54gOHq0VVgDFUuuPgJNz3G78kW35EwA2IAJOK0GC7uZf7TmcgV1hAI7%2buOv7ZFDcHxQUAZxGVuR1PqE1ESAXEQbgFj3CUPjmaV4kBmCR2mb9CUB%2bIdzF0aQhG6vkAMinGAEWq79EuGDFUrFyBPKnUaXlN%2bBUQLcRJKtoLlQZSUW/X66RSqVYamuB5G%2bywlOB3DcUUUWWM3mRlgVOdYzH3VNUhZZFVs5JquLcSRxQkVN5gZMlLI0peGN4qGkXICIvuc1cdIpKrOLIKFxoMzCK5RgXUIuWcllGkeAk1oWMC7CEJJ/n6%2bNxMLx4NsvezTFRIb0oZWAVEmKGYyMiNSvSCVnAY0onU1ReuMkn7klZ0yjgMHiuyNczMzOgOAxsdgwwZm%2bZC1MFFOqCWc2J5fOBFsoyGa/%2bDf0vcL8CmlbJxDWySBXDEBGtQuUeFkzbrVuGmyqqYcQtwBTyiP8LbwMtWAWxhcAAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"936\" alt=\"image\" data-srcset=\"/assets/static/send_01.82a2fbd.6172d5100a6f47387905a863e32848ec.png 480w, /assets/static/send_01.b3c7ef1.6172d5100a6f47387905a863e32848ec.png 936w\" data-sizes=\"(max-width: 936px) 100vw, 936px\" data-src=\"/assets/static/send_01.b3c7ef1.6172d5100a6f47387905a863e32848ec.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/send_01.b3c7ef1.6172d5100a6f47387905a863e32848ec.png\" width=\"936\" alt=\"image\"></noscript></p>\n<p>4.3. Get the ID of Galaxy <code>history</code> from which you want to copy data, by going to the following\naddress on your browser:</p>\n<pre><code>http://localhost:8080/api/histories\n</code></pre>\n<p>This will display a JSON object similar to the following, note the value of <code>id</code> field:</p>\n<pre><code class=\"language-json\">[\n   {\n      \"name\":\"Unnamed history\",\n      \"tags\":[\n      ],\n      \"deleted\": false,\n      \"purged\": false,\n      \"annotation\": null,\n      \"url\": \"/api/histories/df7a1f0c02a5b08e\",\n      \"published\": false,\n      \"model_class\": \"History\",\n      \"id\": \"df7a1f0c02a5b08e\"\n   }\n]\n</code></pre>\n<p>4.4. Get the ID of authorization defined in step #2, which you want to use to write to the\ncloud-based storage, by going to following address:</p>\n<pre><code>http://localhost:8080/api/cloud/authz\n</code></pre>\n<p>This will display a JSON object similar to the following, note the value of <code>id</code> field:</p>\n<pre><code class=\"language-json\">[\n   {\n      \"authn_id\": \"f2db41e1fa331b3e\",\n      \"user_id\": \"f2db41e1fa331b3e\",\n      \"last_update\": \"2018-12-07 17:53:55.714802\",\n      \"last_activity\": \"2018-12-07 17:53:55.714818\",\n      \"provider\": \"aws\",\n      \"model_class\": \"CloudAuthz\",\n      \"config\": \"{u'role_arn': u'arn:aws:iam:: ...'}\",\n      \"id\": \"f2db41e1fa331b3e\"\n   }\n]\n</code></pre>\n<p>4.5. On Postman, goto <code>Body</code> tab as shown in the following figure and enter the\nfollowing API payload:</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 933 400' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e634db6c749937c07a75696ccfd9eff0'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e634db6c749937c07a75696ccfd9eff0)' width='933' height='400' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAbCAIAAABDQh69AAAACXBIWXMAAAsSAAALEgHS3X78AAAJqklEQVRYw8VXe3CU1RXf/tO/O53plIEOoJImaN6bhFeQRwrykupMpw5DpS9FRzvUOoIoRRggWTYbsChqZ8SqjH/otNr%2b0aLOqAlqEpOQJ8nmtZtAsu/99vt2v8d%2b7%2b/2d79LdhSsgpX2zMnJueeec%2b6959xz7reeTXVVj6wq272q/KEVdzy0quyh%2bsrdq8rqa701tcvqamtr6%2bqANTU1dWDYwB0uW7YMDKjXW%2bP1eisrK8vLy0HLysrAVFRUgJaWlYGBsLq6Gv/AVlAor672equry6trGurKf768pLK6pqqqCrPUTxVVhklVVTUVVlZA11tR5oXVlT3Usj0sc8FbU%2bM5sbaEvOWzjv%2bGPLqS7PaS%2b0vIg9U7V5TX/2Tj3Vu3bN26dd26dTDbvHnzli10uHbtWhxg586d27dvb2hoAF9cXHzvvffu2bNn5cqVd2/btmHDBphs3rJ527ZtYOrr66Fz33337XBh165dq%2bvrcbzi2%2b9o/1UxOVp3T9UtVctXbWhoKC0t3bRpEw4AD1hxzZ13YoklRUWf%2bh579%2bnfFt9BZ7GBLS7A81133YWTeB4um3/x9z/t3Lmya8utXZtv6Vr3w88a5q8rXrS0vBKhrq2pKSstLVqyBDEDj2gjrkuWLHFj70U8b7vttgULFmBm48aNS5cuXb58OZxiK0jFihUrwEBh8eLFa9asWb9%2bPWZXr15dUlKyeNHCeT9a1Lj6Bx/9bH7F4nm3/rgE2Vm4cCEcQhlWWKKoqAhO5s2fv%2b%2be9Xu2rl6wcBH2gHXdXXhZwqHj8QdafMeO%2bHyNvuZmX3PA13LCF2g53nLiOOQYBgJQ8LvD44HA8eZmv9/f3Nx83AXGBwKBpqamI0eOQNLogs/ng4QxTIfJmZBJ8HfU5z9yrLHJHwi4DltaWkDhrbAEzOH90NFjh482BqiW//MKJ0%2beBPUQ4hBiEwr2l6HzRf7bB8dxZBdEUVQURXIhn8%2bbpmm4AMYyTUjAQzmbzVqWpet6LBazbdtjyLJ6ecCY/pgPj6UmRjLhMS40mhwfBk2MXUyODacngxTDE9Jwhzk7LuZVMZeDOyxpfxuQy%2bUuXrw4ODjY19c3MDDQ399/4cKF8fHxeDwenQPsdWpqChKcrb29PZ1Og3/nnXcw9Jg2MdS0o0zy2WwknkwLQpLLxFPpRJqLJpKxZAo0leFjHC8lLztSWtF0RZE1TcMZvpXwFyJ9FejXAE2FZWHKmgOaAV3XVNVQdQduwIGqat6k9lpeUSBB%2bjRN1XVV0828TuVwxDziDIhBgQGILmCo/3fwtUdCBHEAJMeDf8lksq%2bXZm10dHRkZASpHB4eDgaDHR0dQ0NDSCso5GBGg0EmQcYhgRoyDubSpUvgYYjZ3t7e2dlZkx5b%2b2a7h92X4lUHQPgnJyY9mguIGQoIE6BsCGBTkKiqCkadA0QaBcD4ggLjmetrQb0RgAsDedYpLSBzzFZhDEIfCoU8yHgikUi7kEqlCgzSkvoiFOQcxxWUmdq1VmDgltHUdUMskTRk7rVOtaRJqWlRvAFKl52QS33KW72qLvOpdAbA1kWIw6GwB%2bFE9tta28LhMCYSLqDkQXGLcCvY5cHFQK8A7e7u7nNheGiov68XXQNMb08PcGhwkGmOjY1BGc0ENw36Bc/Jr4NILGkrqcP/zHt2y7cH8rc25b%2b7R/7OI6Lnd/KpVl1IXe7u6cV%2b0JTgEzsH9aCLYRyJRD6/QGIOUCWgsTmIu8AaW5zPRlLpGJcBziaS0TQX4wU2yzQZZX6S1wfReNKQ0qfPq9/br9zuU4qOKQsPA6XvP6W89pmqSdzMbARukSv4xNWlGfj8PTU0vXCbr73BhQH6mc6lzeYnrabHneZ9jv8JEthvH91jvth4ldVV5tdZA0pey0oaL6qCpOZkDZiVNQhpHejYIzap5VUNTTQ0GfKwKkQJS4qckAWdTquKC6yyWXGz%2blbcp1K0bSk04uy9X7sUyg1eEIf7ExODen%2bn/cQvZIFHRV8xm3PCKrvAf30P1XXLuBoN7F%2bWdClLqZrXxJytqyGWAVxQVGWCS3enp9Fu0WGQI9QKK1YwLH4Y0gpOpWZUKTLW5/j3ioSEorFwItGlZmQpazb%2bgYtGhWwu5ZYyz/MwB8WGcCT4EgT%2bq1rjV74LuiIZkbAxFTSi0zrP6eERh4uHpqY9pqE7tgV0X0U8dDqxLIIhpTYYSBzLtE2DODZFy6RP6Ow0efhu8uZp8saz5OxJcvZZ8oqfPL6DmIYFP7YNwh5aNDvTdkyHWIQi46%2bg7bAH1bxOoK5sLA9bw6b%2bw2ij%2bJfI5jL5fEKUdctGTCK8wCmqoBmJnJTJq1CM8byoGylZSUsUORV3VE6%2b8WfuJX/sBV/m5RP23/6SPvxo5s2Xc6KE9wV1hnQl4gm8F/TMqQhFLk5Ss4SLES5KMgnK5DjdfV%2bv87ODEkUiicskHXGSMxhNhac8iKXU8ZHc2Zo5/77Z32n2deQ%2b/SDX/iGEmbb3wTiDXblPP5Q727jW97jWdyHJfvJBrqOV7%2bkQ%2brrS3e3iYA8JBaXu8/QrQpYRf/ZBgTOIokSTKfJEEkgmTjcNPseRLEeEFJGzphv%2bG/h4wgWBrcg78MMO4Dy%2bwzz2mH7ygN6yX/Xvc04dJKcPk%2bcPUXzuEDl9yP7TQVd4kLz0DHkBEtBnyPMHyfMHyHNPk1MHnJanrFPPOA9vJ93nESV8bdlfvEK4VBauELtF4Am5MnQc60bBtpk57tJcBg7uVrI8bzsC%2bmxehVTD9ymhCBXDJqY7zOHkKpF1IhoUFYvSnEFUKLlV4ZwJOK3/ort2d18A9s35H/HGv1%2bZIfJMawAPGQ6gJuOiJNGqdWzHMLLjEW7oEjcwnZ2ICcEZOSVIvDXSafW3WRN91kSvNdBGh6Nd1kzQzuc0W3O/q880k/Pn3N9FNrn5wEJDD%2bAceECMRdDt8EbQYJtOaiQauzDNTSbTY/FsOier5NIEGe4hwV4SDpLpcTI5TIL9ZGyAiJJp2hYaD1JgnwlYredoi0DHcvN2U5E2O3YAc/%2bvR3u6Bi4OXY7xMYlEBHu0OzLaNTv88XT4cm46bV/oI52dZGCYfNZF2j8hPb2ku4fyvUP6jOBEsk5UMGcJEV8MZN47N2uTaNaOiuRm40zWkQwyTa/QgQek6CzPC0ImI/AC8mIiFapumaxk3ADrlLI30XKHlDFN1CAUbF2jv5dfbnbaztHfzrByyM1Gyy5coT8%2bqEs5jb4Ozjf80c6etjOB/1MN7L3ffP058%2b1X7bdfJf84S/7%2b%2bg0jDN/7K3nyl6Sr7X9/gH8DEof49hcx0o0AAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"933\" alt=\"image\" data-srcset=\"/assets/static/send_02.82a2fbd.67eaad5423935cf31f7340569ac7484d.png 480w, /assets/static/send_02.568935d.67eaad5423935cf31f7340569ac7484d.png 933w\" data-sizes=\"(max-width: 933px) 100vw, 933px\" data-src=\"/assets/static/send_02.568935d.67eaad5423935cf31f7340569ac7484d.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/send_02.568935d.67eaad5423935cf31f7340569ac7484d.png\" width=\"933\" alt=\"image\"></noscript></p>\n<pre><code class=\"language-json\">{\n    \"history_id\": \"03501d7626bd192f\",\n    \"authz_id\": \"f2db41e1fa331b3e\",\n    \"bucket\": \"vahid-objectstore\"\n}\n</code></pre>\n<p>Replace <code>vahid-objectstore</code> with a bucket name to which you want to <code>send</code> data.</p>\n<p>4.6. Click on the <code>Send</code> button; Postman will submit a request to Galaxy to <code>send</code> data\nand will shows a result as the following.</p>\n<pre><code class=\"language-json\">{\n    \"sent_dataset_labels\": [\n        \"{\\\"object\\\": \\\"rep1.bed\\\", \\\"job_id\\\": \\\"3f5830403180d620\\\"}\",\n        \"{\\\"object\\\": \\\"rep2.bed\\\", \\\"job_id\\\": \\\"e85a3be143d5905b\\\"}\"\n    ],\n    \"bucket_name\": \"vahid-objectstore\",\n    \"failed_dataset_labels\": []\n}\n</code></pre>\n<p>This JSON object shows two Galaxy datasets,<code>rep1.bed</code> and <code>rep2.bed</code>, are queued for\nbeing sent to the <code>vahid-objectstore</code> bucket.</p>\n</li>\n</ol>\n"}},"context":{}}