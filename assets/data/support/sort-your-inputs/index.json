{"hash":"ef8aba8bb8a02457efb168ecda8caf9311205534","data":{"article":{"id":"27c699ac7f8459eac520a74775000110","title":"Sorting your inputs","tease":"","category":null,"date":null,"days":null,"contact":"","contact_url":"","authors":"","location":"","location_url":"","source_blog":"","source_blog_url":"","skip_title_render":null,"redirect":"","links":[],"image":"","images":{},"external_url":"","content":"<div class=\"toc-wrapper col-md-3\">\n<ul>\n<li><a href=\"#sorting-tools\">Sorting tools</a></li>\n<li>\n<p><a href=\"#updates\">Updates</a></p>\n<ul>\n<li><a href=\"#current-usage-as-of-the-1809-release\">Current usage as of the 18.09 release</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#deprecated-example-tools-and-tool-groups-that-require-input-sorting\">Deprecated: Example tools and Tool groups that require input sorting</a></p>\n<ul>\n<li><a href=\"#deprecated-htseq_count\">Deprecated: Htseq_count</a></li>\n<li><a href=\"#deprecated-samtools\">Deprecated: SAMTools</a></li>\n<li>\n<p><a href=\"#deprecated-picard\">Deprecated: Picard</a></p>\n<ul>\n<li><a href=\"#ngs-rna-seq-tophat-cufflinks-cuffmerge-cuffdiff\">NGS: RNA-seq: Tophat, Cufflinks, Cuffmerge, Cuffdiff</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<div class=\"body-wrapper col-md-9\">\n<p><a href=\"/support/\">Back to Support Hub</a></p>\n<p>~~Many tools require inputs to be sorted in a specific way prior to use.~~</p>\n<p>Good news! Galaxy includes tools to do this sorting.</p>\n<h2 id=\"sorting-tools\"><a href=\"#sorting-tools\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sorting tools</h2>\n<ul>\n<li><strong>Picard SortSam</strong>  Sort SAM/BAM by coordinate or queryname.</li>\n<li><strong>Samtools Sort</strong> Alternate for SAM/BAM, best when used for coordiante sorting only.</li>\n<li><strong>SortBED order the intervals</strong> Best choice for BED/Interval</li>\n<li><strong>Sort data in ascending or descending order</strong> Alternate choice for Tabular/BED/Interval/GTF</li>\n<li><strong>VCFsort</strong> Best choice for VFC</li>\n<li><strong>Tool Form Options for Sorting</strong> Some tools have a tool form option to sort inputs during job execution. This uses more resources but is a choice. Whenever possible, <em>sort inputs before using tools</em>, especially if jobs are failing for not enough memory resources.</li>\n</ul>\n<h2 id=\"updates\"><a href=\"#updates\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Updates</h2>\n<h3 id=\"current-usage-as-of-the-1809-release\"><a href=\"#current-usage-as-of-the-1809-release\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Current usage as of the 18.09 release</h3>\n<p>Uploaded BAM data will be assigned the <code>bam</code> datatype if it is already coordinate-sorted (header contains \"SO:coordinate\").</p>\n<p>Other BAM data will be assigned the <code>unsorted.bam</code> datatype. In most use cases, the data can be used without changes with tools (the proper sort/index will be created temporarily during runtime).</p>\n<p>Avoid assigning the <code>bam</code> datatype to datasets that are not actually coordinate sorted. Downsteam tools will either pause or fail. If you reassigned before reading this, changing the datatype back to <code>unsorted.bam</code> will resolve most issues.</p>\n<hr>\n<p><strong>Note: All usage help below is now deprecated if it involves BAM datasets.</strong></p>\n<hr>\n<h2 id=\"deprecated-example-tools-and-tool-groups-that-require-input-sorting\"><a href=\"#deprecated-example-tools-and-tool-groups-that-require-input-sorting\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Deprecated: Example tools and Tool groups that require input sorting</h2>\n<p><code>Deprecated help below</code></p>\n<p>The list is not comprehensive. If a tool fails, try sorting inputs as a first pass solution, whether this is declard or not on the tool form help. Cooridnate order is the most common ordering expected by tools. If queryname order is required, the tool form will usually declare that in the help.</p>\n<h3 id=\"deprecated-htseq_count\"><a href=\"#deprecated-htseq_count\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Deprecated: Htseq_count</h3>\n<p>The tool now queryname sorts at runtime with default seetings.</p>\n<p><code>Deprecated help below</code></p>\n<p>Example error on bug report.</p>\n<pre><code>job info:\nThis job was terminated because it used more memory than it was allocated.\nPlease click the bug icon to report this problem if you need help.\n</code></pre>\n<p>How to sort?</p>\n<p>Set this option to <strong>Yes</strong>: <em>Force sorting of SAM/BAM file by NAME</em></p>\n<h3 id=\"deprecated-samtools\"><a href=\"#deprecated-samtools\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Deprecated: SAMTools</h3>\n<p>The tool now coordinate sorts at runtime with default seetings.</p>\n<p><code>Deprecated help below</code></p>\n<p>Example error on bug report. Yours may differ. If there is a problem, try sorting first before reporting a bug.</p>\n<pre><code>job stdout:\n[samopen] SAM header is present: N sequences.\n[bam_index_core] the alignment is not sorted (display_dataset_name): A-th chr > B-th chr\n[bam_index_build2] fail to index the BAM file.\n</code></pre>\n<p>How to sort?</p>\n<p>Try using <em>Coordinate sort</em> on the inputs with <strong>SortSam</strong> before using these tools. This is often required as a distinct step even if the input dataset states in the name that it is already sorted.</p>\n<h3 id=\"deprecated-picard\"><a href=\"#deprecated-picard\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Deprecated: Picard</h3>\n<p>The tool now coordinate sorts at runtime with default seetings.</p>\n<p><code>Deprecated help below</code></p>\n<p>Tools can error for a variety of reasons that seem to be unrelated to sort order, including this one seen on the bug report (click on the green bug icon, but there is no need to submit the bug/error). Instead, coordinate sort and then rerun.</p>\n<pre><code>job info:\nThis job was terminated because it used more memory than it was allocated.\nPlease click the bug icon to report this problem if you need help.\n</code></pre>\n<h4 id=\"ngs-rna-seq-tophat-cufflinks-cuffmerge-cuffdiff\"><a href=\"#ngs-rna-seq-tophat-cufflinks-cuffmerge-cuffdiff\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NGS: RNA-seq: Tophat, Cufflinks, Cuffmerge, Cuffdiff</h4>\n<p>Different errors can be reported and some may seem unrelated to sort order. Try sorting as a first pass troubleshooting solution.</p>\n<p>If sorting does not work, it could be that your FASTQ data is not actually in <em>.fastqsanger</em> format. This occurs quite often in reported issues. For the quickest resolution, instead of reporting the bug and being sent back this link, first double check your data format directly.</p>\n<ul>\n<li><a href=\"/learn/fastqsanger/\">How to format fastq data for tools that require .fastqsanger format?</a></li>\n<li><a href=\"/learn/compressed-fastq/\">Understanding compressed fastq data (fastq.gz)</a></li>\n</ul>\n</div>\n"}},"context":{}}