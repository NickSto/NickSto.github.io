{"hash":"c32ecfdb33b075b0057598b5b9118f3554a398cf","data":{"article":{"id":"ad91b0733f98ee20b7d1b92a2239e013","title":"","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<div class='center'> <a href='http://toolshed.g2.bx.psu.edu'><img src=\"/src/images/logos/ToolShed.jpg\" alt=\"Galaxy Main Tool Shed\" height=\"174\" /></a> </div>\n<h2 id=\"updating-a-previously-installed-repository-to-a-revision-that-includes-changes-to-installed-tool-dependencies\"><a href=\"#updating-a-previously-installed-repository-to-a-revision-that-includes-changes-to-installed-tool-dependencies\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Updating a previously installed repository to a revision that includes changes to installed tool dependencies</h2>\n<p>In most cases changing the version of a tool dependency requires a change to the dependent tool's version as well.  This ensures reproducible behavior for Galaxy instances in which the tool is installed.  However, in some cases the owner of a repository may change the version or type attribute of a tool dependency in it's definition in the repository without changing the version of the dependent tool.  Again, this should not often occur!</p>\n<p>Let's take a look at how this is handled when the repository is installed into a Galaxy instance and the Galaxy administrator gets the updates to the repository that includes the changes to the tool dependency definition.  To start, assume we have a repository named <strong>bwa_mappers</strong> in a tool shed that includes two tools, <strong>Map with BWA for SOLiD</strong> and <strong>Map with BWA for Illumina</strong>.  The repository also includes a <strong>tool_dependencies.xml</strong> file that defines version 0.5.9 of the bwa package dependency for the 2 tools.  Previewing the tools in the repository will show something like the following.</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/bwa_mappers_059.png\"></p>\n<p>Let's install the repository into a Galaxy instance, electing to install the bwa version 0.5.9 package.</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/install_bwa_059.png\"></p>\n<p>After the repository and the defined bwa tool dependency are installed and compiled, we see that we have revision <strong>11dc06f7649a</strong> of the repository.</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/bwa_059_installed.png\"></p>\n<p>Browsing the installed tool dependencies, we see that we have version 0.5.9 of the bwa package as expected.</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/bwa_059_tool_dependencies.png\"></p>\n<p>Now, after some time the owner of the repository in the tool shed uploads a new tool_dependencies.xml file that includes the definition for installing version 0.6.2 of the bwa package.  Nothing else in the repository is changed so the repository change log shows only the single installable change set revision.  This means that the Galaxy administrator will be able to pull the updates (up to the new change set revision <strong>cb68795548a6</strong>) to the repository installed to his Galaxy instance.</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/bwa_changelog.png\"></p>\n<p>In fact, when we click on the <strong>Manage installed tool shed repositories</strong> option in out Admin menu back in our Galaxy instance, we see that there are updates available for out installed repository.</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/bwa_updates_available.png\"></p>\n<p>Pulling the update results in the installed repository being updated to change set revision <strong>cb68795548a6 </strong>.  As part of this process, the original version 0.5.9 of the bwa tool dependency package was removed from disk and the new version 0.6.2 of the bwa tool dependency package is associated with the installed tool, but marked as <strong>Uninstalled</strong> (tool dependencies are not automatically installed and compiled when pulling updates to installed repositories).</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/bwa_updates_pulled.png\"></p>\n<p>You can click the name of the uninstalled dependency to display the page to install it.</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/install_bwa_062.png\"></p>\n<p>After installing the dependency, we see that we now have version 0.6.2 associated with the tools in our repository.</p>\n<p><img src=\"/src/updating-to-revision-with-tool-dependencies/bwa_062_installed.png\"></p>\n"}},"context":{}}