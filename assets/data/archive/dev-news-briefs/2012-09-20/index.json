{"hash":"833cd7e24cd461bad7de6bb0d6be755efc588fb3","data":{"article":{"id":"5960c6e5cdcd548cc66aa94dd952d53e","title":"Development News Brief","tease":"","image":"","images":{},"category":null,"contact":"","date":"20 September 2012","content":"<h1 id=\"get-galaxy\"><a href=\"#get-galaxy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Get Galaxy</h1>\n<div class='left'><a href='http://getgalaxy.org/'><img src=\"http://galaxy.psu.edu/static/getgalaxy.png\" alt=\"getgalaxy\" width=50 /></a></div>\n<p><strong><a href=\"http://getgalaxy.org\" target=\"_blank\" rel=\"noopener noreferrer\">getgalaxy.org</a></strong></p>\n<ul>\n<li><strong>new</strong>: <code>$ hg clone http://www.bx.psu.edu/hg/galaxy galaxy-dist</code></li>\n<li><strong>upgrade</strong>: <code>$ hg pull -u -r da9d740fce31</code></li>\n</ul>\n<br />\n<br />\n# Datatypes_conf.xml Update\n<p><strong>When updating to this release, users should also update their instance's <em>datatypes_conf.xml</em> file</strong>. There are two ways to do this:</p>\n<p><strong>(1)</strong> If no changes have been made to <code>datatypes_conf.xml</code>, just copy the <a href=\"https://bitbucket.org/galaxy/galaxy-dist/src/da9d740fce31/datatypes_conf.xml.sample\" target=\"_blank\" rel=\"noopener noreferrer\">datatypes_conf.xml.sample</a> in this distribution to <code>datatypes_conf.xml</code></p>\n<p><strong>OR</strong></p>\n<p><strong>(2)</strong> Add the necessary lines for the <strong>FLI</strong> custom datatype + conversions:</p>\n<p>(a)</p>\n<pre><code>&#x3C;datatype extension=\"fli\" type=\"galaxy.datatypes.tabular:FeatureLocationIndex\" display_in_upload=\"false\"/>\n</code></pre>\n<p>(b)\nIn <strong>Bed</strong> datatype definition:</p>\n<pre><code>&#x3C;converter file=\"bed_to_fli_converter.xml\" target_datatype=\"fli\"/>\n</code></pre>\n<p>(c)\nIn <strong>Gff</strong> datatype definition:</p>\n<pre><code>&#x3C;converter file=\"gff_to_fli_converter.xml\" target_datatype=\"fli\"/>\n</code></pre>\n<p>In the future, the Galaxy team considers it a priority to provide improved methods to automatically update <code>datatypes_conf.xml</code> and other configuration files as sample files are updated.</p>\n<br />\n# CloudLaunch Overhaul\n<p><a href=\"http://usegalaxy.org/cloud\" target=\"_blank\" rel=\"noopener noreferrer\">http://usegalaxy.org/cloud</a></p>\n<p>With <strong><a href=\"http://boto.cloudhackers.com\" target=\"_blank\" rel=\"noopener noreferrer\">Boto</a></strong> bumped to <strong>2.5.2</strong>, a new and improved <strong><a href=\"https://main.g2.bx.psu.edu/cloudlaunch\" target=\"_blank\" rel=\"noopener noreferrer\">CloudLaunch</a></strong> now includes an asynchronous lookup for instance selection and an easier key generation via direct downloads.</p>\n<p>Other changes include a correction for rare instance <code>udpate()</code> issues that happens when Amazon doesn't have the instance fully registered before <code>instance.update()</code> is called. The <strong><a href=\"https://main.g2.bx.psu.edu/cloudlaunch\" target=\"_blank\" rel=\"noopener noreferrer\">CloudLaunch</a></strong> home page documentation has also been updated to explicitly state that instances are pay-for-use.</p>\n<p>Full instructions for getting started with a <strong>Galaxy CloudMan Instance</strong>, including setting up your <strong>Amazon</strong> <a href=\"http://aws.amazon.com/\" target=\"_blank\" rel=\"noopener noreferrer\">AWS</a>, <a href=\"http://aws.amazon.com/ec2/\" target=\"_blank\" rel=\"noopener noreferrer\">EC2</a>, and <a href=\"http://aws.amazon.com/s3/\" target=\"_blank\" rel=\"noopener noreferrer\">S3</a> account and services, can be found at <strong><a href=\"http://usegalaxy.org/cloud\" target=\"_blank\" rel=\"noopener noreferrer\">http://usegalaxy.org/cloud</a></strong>.</p>\n<p><strong><a href=\"https://main.g2.bx.psu.edu/cloudlaunch\" target=\"_blank\" rel=\"noopener noreferrer\">CloudLaunch</a></strong> is a quick way for direct access to your cloud services from the <strong><a href=\"http://usegalaxy.org\" target=\"_blank\" rel=\"noopener noreferrer\">Galaxy</a></strong> tool bar once an account is established.</p>\n<br />\n***Access here***\n<p><a href=\"/toolshed/\"><img src=\"/images/news-graphics/2012_09_20_cloudlaunch-main.png\" alt=\"cloudlaunch-main\"></a></p>\n<br />\n<p><strong>Then, <em>login with your credentials</em> and go!</strong></p>\n<p><a href=\"/toolshed/\"><img src=\"/images/news-graphics/2012_09_20_cloudlaunch-home.png\" alt=\"cloudlaunch-home\"></a></p>\n<br />\n# Galaxy Tool Factory\n<p>The <strong>Tool Factory</strong> is a pure Galaxy scripting environment that makes running simple quick and dirty tasks really easy, and can also generate new Galaxy tools with functional tests! It's a Galaxy tool, but it can run scripts and can automagically turn them into new Galaxy tools that freeze supplied scripts into reusable, workflow compatible tools - <em>Python</em>, <em>R</em>, <em>sh</em> or <em>perl</em> are supported. Watch this video for a short <strong><a href=\"http://www.youtube.com/watch?v=Nzzc9zHZJjE\" target=\"_blank\" rel=\"noopener noreferrer\">demonstration</a></strong> of how it works. Documentation, source code and support are available at <strong><a href=\"https://bitbucket.org/fubar/galaxytoolfactory/overview\" target=\"_blank\" rel=\"noopener noreferrer\">the bitbucket</a></strong> site. Please raise an issue there if you find bugs. If you are an R hacker and have a complex R function to wrap, <strong><a href=\"http://www.bioconductor.org/packages/devel/bioc/html/RGalaxy.html\" target=\"_blank\" rel=\"noopener noreferrer\">RGalaxy</a></strong> may work better for you, but the <strong>Tool Factory</strong> is ideal for simple workflow transformations with one input and one output.</p>\n<h4 id=\"more-details-if-youre-interested\"><a href=\"#more-details-if-youre-interested\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>More details if you're interested</h4>\n<p>Imagine you have a simple sh or R script you need to run quickly in Galaxy - with the option of creating a new Galaxy tool for your users to reuse as often as they need. On your private throw-away clone with the <strong>Tool Factory</strong> installed where you're logged in as an administrator you:</p>\n<ul>\n<li>Upload a small sample data set - enough to exercise the script for a functional test.</li>\n<li>Select the <strong>Tool Factory</strong> tool. Cut and paste the R (or perl/python/sh) script into the typical Galaxy <strong>Tool Factory</strong> form, select the small sample input file and click execute to run it! The help text on the form includes working examples showing how to pass input/output file paths in each available scripting language.</li>\n</ul>\n<p><a href=\"/toolshed/\"><img src=\"/images/news-graphics/2012_09_20_toolfactory-big.png\" alt=\"toolfactory\"></a></p>\n<ul>\n<li>Check the output. If the script didn't work right, use the redo button on the output to recreate the form and edit the script.</li>\n<li>Rinse, wash, repeat until it works correctly.</li>\n<li>Optionally if you would like the now working script permanently frozen into an ordinary Galaxy tool, rerun with the \"generate\" option set, paste some useful help text for the user. The <strong>Tool Factory</strong> will run but this time will also create a new tool as a <strong>Tool Shed</strong> archive, complete with a functional test based on the sample data you supplied at generation, ready to upload to a new <strong>Tool Shed</strong> repository for installation and sharing. The <strong>Galaxy Tool Shed</strong> model now supports automated tool version control to help maintain analysis repeatability. See the <strong><a href=\"http://toolshed.g2.bx.psu.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Tool Shed</a></strong> repository for usage instructions and guidelines.</li>\n<li>With the <strong>Tool Factory</strong> it is now possible, although possibly certifiably insane, to use Galaxy <a href=\"https://bitbucket.org/fubar/galaxytoolfactory/wiki/galaxyide\" target=\"_blank\" rel=\"noopener noreferrer\">as an IDE to develop python API scripts</a>. Who needs eclipse?</li>\n<li>The <strong>Tool Factory</strong> ia available for private clone installations from the main <strong><a href=\"http://toolshed.g2.bx.psu.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Galaxy Tool Shed</a></strong> as the <strong>toolfactory</strong> - see your local <strong>Galaxy</strong> admin menu.</li>\n<li><em>Before you install - THIS IS IMPORTANT!!</em> The <strong>Tool Factory</strong> allows unrestricted scripting - NO SANDBOX!! so is far too dangerous for production sites. It can only be run by <em>local <strong>Galaxy</strong> site administrators</em>. Please, do <strong>NOT</strong> install on public Galaxy instances. <strong><em>Generated tools are safe if the script they wrap is safe</em></strong>.</li>\n<li>Always remember to practice safe <strong>Tool Shed</strong> by reading the source before you install any new tool.</li>\n<li>Application Note in press, accepted Sept 2012: Ross Lazarus, Antony Kaspi, Mark Ziemann, and The Galaxy Team <strong>Creating re­usable tools from scripts: The Galaxy Tool Factory</strong>. <em>Bioinformatics</em>.</li>\n</ul>\n<br />\n# Multiple Tool Versions\n<p><strong>Displaying multiple versions of a tool in the Galaxy tool panel</strong></p>\n<p>When tool shed repositories that include multiple versions of a tool are installed into a local Galaxy instance, a single link to the tool will be displayed in the Galaxy tool panel.  When the tool is loaded, the different versions of the tool will be defined in a select list at the top of the tool form, allowing you to select a specific version of the tool.  The latest version of the tool is always displayed by default when the tool page is loaded.</p>\n<p>For example, let's take a look at a Galaxy instance into which 2 revisions of a tool shed repository have been installed, each of which contains a different version of the <em>Filter</em> tool.  We've selected a tool panel section named \"Filter\" to contain the tool.  Here is our integrated_tool_panel.xml file where we see that <em>Filter version 1.1.0</em> and <em>Filter version 2.2.0</em> have been installed.</p>\n<pre><code>&#x3C;?xml version=\"1.0\"?>\n&#x3C;toolbox>\n    &#x3C;label id=\"basic_tools\" text=\"Basic Tools\" version=\"\" />\n    &#x3C;section id=\"getext\" name=\"Get Data\" version=\"\">\n        &#x3C;tool id=\"upload1\" />\n    &#x3C;/section>\n    &#x3C;section id=\"filter\" name=\"filter\" version=\"\">\n        &#x3C;tool id=\"localhost:9009/repos/test/filter2/Filter1/2.2.0\" />\n        &#x3C;tool id=\"localhost:9009/repos/test/filter2/Filter1/1.1.0\" />\n    &#x3C;/section>\n&#x3C;/toolbox>\n</code></pre>\n<p><strong>Here is our Galaxy tool panel</strong> - notice the single link to the installed <em>Filter</em> tool.</p>\n<p><a href=\"/toolshed/\"><img src=\"/images/news-graphics/2012_09_20_tool-panel.png\" alt=\"tool-panel\"></a></p>\n<p><strong>Clicking the <em>Filter</em> link in the tool panel displays the Filter tool's page</strong>, where you can select the version you want.</p>\n<p><a href=\"/toolshed/\"><img src=\"/images/news-graphics/2012_09_20_filter-tool-page.png\" alt=\"filter-tool-page\"></a></p>\n<br />\n# Tool Shed\n<p><a href=\"/toolshed/\">Tool Shed</a></p>\n<ul>\n<li>\n<p><em>Tool shed features for Galaxy tools</em></p>\n<ul>\n<li>The primary intent of the tool shed is for sharing Galaxy tools, workflows and other useful Galaxy utilities.  Galaxy tools are generally developed within a local Galaxy environment, proven to be functionally correct within that environment, and then uploaded to a tool shed for sharing.  With a couple of exceptions, tool features are defined within the Galaxy framework, and have nothing to do with the tool shed. <a href=\"/toolshed/tool-features/\">Read more…</a></li>\n</ul>\n</li>\n<li>\n<p><em>Pushing changes to a tool shed repository using hg from the command line</em></p>\n<ul>\n<li>When pushing changes to a repository in the tool shed using hg from the command line (e.g., <strong>hg commit</strong>, <strong>hg push</strong>), make sure your shell's version of <strong><em>Mercurial is at least version 2.2.3</em></strong>.  <strong><a href=\"http://mercurial.selenic.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Mercurial version 2.2.3</a></strong> includes features that enable the tool shed to <em>automatically generate the new repository metadata</em> when the changes have been pushed from the command line.</li>\n</ul>\n</li>\n<li>\n<p><em>Enhancements</em> &#x26; <em>Fixes</em></p>\n<ul>\n<li>Enhancements to tool dependency installation when installing with a tool shed repository: multiple environment variables can now be set and a new \"make_directory\" tag is supported.</li>\n<li>Fixes for displaying error message when displaying invalid tools in the tool shed.</li>\n<li>Fix from <em>Bjorn Gruning</em> for telling the user which file is the offender if an uploaded tarball gets rejected in the tool shed.</li>\n<li>Fix for getting updates for tool shed repositories installed into a local Galaxy instance.</li>\n</ul>\n</li>\n</ul>\n<br />\n# Framework\n<ul>\n<li><a href=\"http://bitbucket.org/galaxy/galaxy-central/changeset/08f1d09a65a98977817ca1f1bd34fc266d61aa24\" target=\"_blank\" rel=\"noopener noreferrer\">Refactoring for data providers and visualizations</a> to make it easier to create/extend data providers and visualizations.</li>\n</ul>\n<br />\n# Security Fixes\n<ul>\n<li>Prevent Galaxy session cookies from being accessed via script.  We don't use it through Javascript anywhere, only other cookies specifically set for <strong><a href=\"http://code.google.com/p/dynatree/\" target=\"_blank\" rel=\"noopener noreferrer\">Dynatree</a></strong> and <strong><a href=\"http://code.google.com/p/genetrack/\" target=\"_blank\" rel=\"noopener noreferrer\">Genetrack</a></strong>.</li>\n<li>Set header <code>'X-Content-Type-Options: nosniff'</code> for dataset display.  This will prevent <strong><a href=\"http://en.wikipedia.org/wiki/Internet_Explorer_8\" target=\"_blank\" rel=\"noopener noreferrer\">IE8</a></strong> from trying to render as html datasets served as text/plain.</li>\n</ul>\n<br />\n# API\n<ul>\n<li>Modified  <strong>REST API</strong> to support multipart/form-data requests, enabling large file upload. Contributed by Nuwan Goonasekera, see <em><a href=\"http://bitbucket.org/galaxy/galaxy-central/pull-request/59\" target=\"_blank\" rel=\"noopener noreferrer\">pull request 63</a></em>.</li>\n</ul>\n<br />\n# Bug Fixes\n<div class='right'><a href=\"/support/\"><img src=\"/images/icons/bug.png\" alt=\"bugs\" width=20 /></a></div>\n* *General*\n  * Fix bug in [__init__.py](http://bitbucket.org/galaxy/galaxy-central/changeset/3f12146d6d81e08f662ada2011a6973e4230512d) with respect to stdout, stderr, and exit code handling.\n  * Fix [create_all_fasta_loc.py](https://bitbucket.org/galaxy/galaxy-central/changeset/8153e8d25009d71a523e0f2df24ed12922825d8f#chg-scripts/loc_files/create_all_fasta_loc.py) to work when `inspect_dir` is not set.\n* *UI*\n  * Fixes for [positioning of help text](http://bitbucket.org/galaxy/galaxy-central/changeset/63cd6402badaf98f26080e71b1f0ed49db30e3ab) when hovering over icons in the history panel.\n* *Tools*\n  * Fix labels for two Cuffdiff options.\n<br />\n# Announcements\n<p><a href=\"/news/\">News</a>, <em><a href=\"/galaxy-updates/2012-09/\">September 2012 Galaxy Update</a></em></p>\n<h2 id=\"br-\"><a href=\"#br-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><br /></h2>\n<br />\n# About Galaxy\n<p><strong><a href=\"http://galaxyproject.org\" target=\"_blank\" rel=\"noopener noreferrer\">GalaxyProject.org</a></strong></p>\n<p>The <strong><a href=\"/galaxy-team/\">Galaxy Team</a></strong> is a part of <strong><a href=\"http://www.bx.psu.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">BX</a></strong> at <a href=\"http://www.psu.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Penn State</a>, and the <strong><a href=\"http://www.biology.emory.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Biology</a></strong> and <strong><a href=\"http://www.mathcs.emory.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Mathematics and Computer Science</a></strong> departments at <a href=\"http://www.emory.edu/home/index.html/\" target=\"_blank\" rel=\"noopener noreferrer\">Emory University</a>.</p>\n<p><strong><a href=\"http://usegalaxy.org\" target=\"_blank\" rel=\"noopener noreferrer\">Galaxy</a></strong> is supported in part by <a href=\"http://www.nsf.gov/\" target=\"_blank\" rel=\"noopener noreferrer\">NSF</a>, <a href=\"http://www.genome.gov/\" target=\"_blank\" rel=\"noopener noreferrer\">NHGRI</a>, the <a href=\"http://www.huck.psu.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Huck Institutes of the Life Sciences</a>, and <a href=\"http://www.ics.psu.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">The Institute for CyberScience at Penn State</a>, and <a href=\"http://www.emory.edu/home/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">Emory University</a>.</p>\n<p>Join us at <strong>Twitter <a href=\"http://twitter.com/#galaxyproject\" target=\"_blank\" rel=\"noopener noreferrer\">@galaxyproject</a></strong> or just read our tweets <strong><a href=\"/galaxy-on-twitter/\">Galaxy on Twitter</a></strong></p>\n"}},"context":{}}