{"hash":"833cd7e24cd461bad7de6bb0d6be755efc588fb3","data":{"article":{"id":"1919082e16d8c0349e627b040038e3cb","title":"Development News Brief","tease":"","image":"","images":{},"category":null,"contact":"","date":"24 November 2010","content":"<p>Here are the highlights of the following upgrade:</p>\n<p><code>hg pull -u -r 8729d2e29b02</code></p>\n<hr>\n<h2 id=\"whats-new\"><a href=\"#whats-new\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>What's New</h2>\n<h3 id=\"galaxys-ftp-server-new-data-upload-option\"><a href=\"#galaxys-ftp-server-new-data-upload-option\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Galaxy's FTP Server New Data Upload Option</h3>\n<ul>\n<li>User how-to: <a href=\"/admin/config/upload-via-ftp/\">UploadViaFTP</a></li>\n<li>Configuration instructions for local installs: <a href=\"http://bitbucket.org/galaxy/galaxy-central/wiki/Config/UploadViaFTP\" target=\"_blank\" rel=\"noopener noreferrer\">wiki/Config/UploadViaFTP</a></li>\n</ul>\n<h3 id=\"openid-login\"><a href=\"#openid-login\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>OpenID Login</h3>\n<ul>\n<li>User how-to and config instructions: <a href=\"http://bitbucket.org/galaxy/galaxy-central/wiki/OpenIDAuthentication\" target=\"_blank\" rel=\"noopener noreferrer\">wiki/OpenIDAuthentication</a></li>\n</ul>\n<h3 id=\"ngs-simulation-tool\"><a href=\"#ngs-simulation-tool\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>NGS Simulation Tool</h3>\n<ul>\n<li>\n<p>Allows user to simulate multiple Illumina runs with several parameters that can be set.</p>\n<ul>\n<li>On each run, one position is randomly chosen to be polymorphic and sequencing errors are also simulated.</li>\n<li>The primary output is a png with two different plots.</li>\n<li>The other output shows summary statistics about the simulation.</li>\n</ul>\n</li>\n<li>NGS simulation tool location: tools/ngs_simulation/ngs_simulation.xml</li>\n</ul>\n<h3 id=\"tophat-and-cufflinks-rna-seq-tools\"><a href=\"#tophat-and-cufflinks-rna-seq-tools\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tophat and Cufflinks RNA-seq Tools</h3>\n<ul>\n<li>\n<p>Addition of RNA-seq analysis tools <strong>Tophat</strong> and <strong>Cufflinks</strong>.</p>\n<ul>\n<li>Together, these tools can be used to analyze RNA-seq data to understand alternative splicing and isoforms, gene and isoform expression, and perform statistical tests for differential expression.</li>\n<li>Galaxy supports Tophat version 1.1.1 and later and Cufflinks version 0.9.1 and later. (These are the versions included this distribution).</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"import-or-export-workflows--histories\"><a href=\"#import-or-export-workflows--histories\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Import or Export Workflows &#x26; Histories</h3>\n<ul>\n<li><strong>Workflows</strong> can now be downloaded/exported to a file and uploaded/imported into Galaxy, making it easy to move workflows between Galaxy instances.</li>\n<li>\n<p>Beta feature: <strong>Histories</strong> can also be downloaded or moved from one Galaxy instance to another, subject to these limitations:</p>\n<ul>\n<li>history archives can be uploaded/imported only via URL, not file</li>\n<li>histories must be accessible via link in order for them to be importable via archive</li>\n<li>tags are not currently imported</li>\n<li>reproducibility is limited as parameters for imported jobs are not always recovered and set</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"even-better-data-visualization-with-trackster\"><a href=\"#even-better-data-visualization-with-trackster\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Even Better Data Visualization with Trackster</h3>\n<ul>\n<li><strong>Trackster</strong> now supports interactive filtering for <strong>VCF</strong> quality values and BED score values.</li>\n<li>For example, a user can drag a slider to filter a file of splice junctions to view junctions supported by different numbers of reads.</li>\n</ul>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 850 269' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-4214c92350361a21084ab17af9907515'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-4214c92350361a21084ab17af9907515)' width='850' height='269' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAUCAIAAACyFKxoAAAACXBIWXMAAAsSAAALEgHS3X78AAAC4klEQVRIx9WXC1eiQBTH%2bf4fYr%2bGnnLXTcGTSoAPhHjjA1J8pKZirrD/GdRTtp20I2frF15poLmvmTs3piYJRZarVKqgVCrxVb5SvmVZtl5veJ7X6XS679Dr9SA774BHvrd77QhvTzIDRI/Kl2AGvKjr%2bu98nmU5tlgsFIqqel8qcUWWVRSF49ibmwJGGFVVBFGUajVBFCRJqtfqoijAGUVRMUv7HRzH0TTNsiznX7iOY5i20NAd1zUtU6do2r1FsFWopRiGgak0wzVMVzfdY22dDt6uViuwTRJFnr/TDaMmSXeCgD%2bEqTzPY4TZG2E7tk2%2bqAQYNw7oxhGIQeGm0JJbMNa27Jfgt7Zj1zXrR64mK/fIZ/5XPpf7eX19jTSXy%2bVsNpvJZLKZbLlc0XTjlpd5sSVIcO%2btHsMmJu0UmKZJzdvdJCNMEASj0Wg4xAUxGo/HkwnEeDQmI3jaaNShCYqbTRnjGEvGHz4iGAxGuynJh3xRJokCOoCpIMhF7w9gfjxG3uAzLgS73%2b9TO4cHmUzBLJcLYhLxYjydTnHf7nqDIJg/PcUgijbgD2G73cYXIoqiOPr4NWikusnn6NF6ve4/PEynM0bT1GarpWu63CQ/7eG81Orqbf9xQvyhCZkEewZ7FovFSVamRrTdPq/Xz5sNswJhuFwuw1W4WC6ewo3/uOp6fduykEFaDXrr14RhiKzEXwPmTdiInE4fkxqH8GNtpRjI11zCgTiO4u8Ek1JgTtwh8/ncdd2k7qNwfUIX86EalIL0PJnNZsnx7Ps%2bisTlHfiuSygBpQYdC1KM8OAGleobbOIjB3BWy7KMtgetCypS2tX9wg7AVmwsZACtERboKYfX56An7u7EPzdA/3MPJLbiWOQ4Dq1eLpe7urpCE3lWnplT1miqbiD8SWvoU9C/XDgDyGzSPkC%2bbaq%2b9B5IwAZoopOmWxk9bUr7GB3y4f%2bhs6rFVzkHYDRWUZ9y1ir6Cx51brRkeYZoAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"850\" alt=\"trackster splice example\" data-srcset=\"/assets/static/2010_11_24_trackster_splice_b.82a2fbd.5875c4c1877189e466b69dcc96ca9011.png 480w, /assets/static/2010_11_24_trackster_splice_b.3d2bee5.5875c4c1877189e466b69dcc96ca9011.png 850w\" data-sizes=\"(max-width: 850px) 100vw, 850px\" data-src=\"/assets/static/2010_11_24_trackster_splice_b.3d2bee5.5875c4c1877189e466b69dcc96ca9011.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/2010_11_24_trackster_splice_b.3d2bee5.5875c4c1877189e466b69dcc96ca9011.png\" width=\"850\" alt=\"trackster splice example\"></noscript></p>\n<ul>\n<li>Improved CIGAR support to BAM display. Properly displays matches,</li>\n</ul>\n<p>deletions, skipped bases, and clipping. Padding for insertions are\ncurrently not represented in the display.</p>\n<ul>\n<li>GFF feature blocks are now displayed correctly, along with name, strand, and score information.</li>\n<li>\n<p>General enhancements</p>\n<ul>\n<li>Removed right-hand pane, allow inline re-ordering and configuration of elements</li>\n<li>Moved navigational controls to the top</li>\n<li>Histogram display for LineTracks and overview</li>\n<li>New navigational slider and new overview settings under the dropdown corresponding to the track name</li>\n<li>Summary view now shows maximum y-axis value</li>\n<li>Can change draw color of LineTrack</li>\n<li>When editing track config, \"Enter\" and \"Esc\" keys submit and cancel the changes, respectively</li>\n<li>Don't index bottom level for summary_tree, greatly reducing computation time (>5x speedup) while not sacrificing usability Refactored to pass JSLint</li>\n</ul>\n</li>\n<li>\n<p>Tuning</p>\n<ul>\n<li>Fix ReferenceTrack issue.</li>\n<li>Don't re-add new datasets when refreshing after using \"Add into current viz\" link.</li>\n<li>To prevent browser lockup, only display up to 50 lines of features by default (user-editable in future). Coming soon: add warning message when this occurs.</li>\n<li>Fix LineTrack rendering bug when more than one tile on screen.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"native-data-set-re-organization\"><a href=\"#native-data-set-re-organization\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Native Data set Re-organization</h3>\n<ul>\n<li>Galaxy now uses a set of data tables instead of simple loc files to organize, document, and store native genome data sets.</li>\n<li>\n<p>Why Data tables? Better data management for long term stability!</p>\n<ul>\n<li>Allows the information in the loc file, including the path, to be changed.</li>\n<li>By using a unique ID as the parameter value, data links in existing workflows are preserved.</li>\n</ul>\n</li>\n<li>Most tools (PerM, Bowtie, BWA, Lastz, Megablast, SRMA, Tophat) that previously used loc files now have the new data tables organization implemented.</li>\n<li>Better data tracking has allowed for more informative genome name display in tool dropdown boxes.</li>\n<li>\n<p>For local installations:</p>\n<ul>\n<li>See the new wiki describing how to use data tables: [wiki/DataTables](/src/admin/tools/Data Tables/index.md)</li>\n<li>More help for NGS tool setup (update pending): [wiki/NGSLocalSetup](/src/admin/NGS Local Setup/index.md)</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"updated--improved\"><a href=\"#updated--improved\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Updated &#x26; Improved</h2>\n<h3 id=\"sample-tracking\"><a href=\"#sample-tracking\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sample Tracking</h3>\n<ul>\n<li>Complete re-write of the <strong>Framework</strong> and <strong>User interface</strong> (database schema unchanged).</li>\n<li>New interactive interface to select files to transfer from the sequencer to Galaxy data libraries.</li>\n<li>The data transfer feature now uses Galaxy RESTful API.</li>\n<li>Full documentation detailing the new functionality and how to use it will be available within a few weeks through the home <a href=\"http://bitbucket.org/galaxy/galaxy-central/wiki/Home\" target=\"_blank\" rel=\"noopener noreferrer\">Galaxy Wiki</a>.</li>\n</ul>\n<h3 id=\"instantiating-galaxy\"><a href=\"#instantiating-galaxy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Instantiating Galaxy</h3>\n<ul>\n<li>New checkouts will now perform all necessary setup directly in run.sh, there is no longer a need to run setup.sh prior to run.sh. (setup.sh will be removed in a future distribution).</li>\n</ul>\n<h3 id=\"analysis-tools\"><a href=\"#analysis-tools\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Analysis Tools</h3>\n<ul>\n<li>Enable <strong>'FASTX-Toolkit for FASTQ data</strong>' as a subsection under 'NGS: QC and manipulation' in tool_conf.xml.sample/main. Includes special handling for when the shell only allows for strict Bourne syntax.</li>\n<li>Add descriptive labels to output dataset names for <strong>MACS</strong> peakcalling tool.</li>\n<li><strong>Taxonomy</strong> tools updated for better error reporting. Includes special handling for when the shell only allows for strict Bourne syntax.</li>\n<li>Refactor sam_bitwise_flag_filter tool, simplifying it and making it faster when there are multiple flag criteria</li>\n</ul>\n<h3 id=\"tool-dependency-enhancements\"><a href=\"#tool-dependency-enhancements\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tool Dependency Enhancements</h3>\n<ul>\n<li>Addition of the 'package' type to <requirement> tags in the tool config. 1 Syntax for tool configs is:</li>\n</ul>\n<pre><code>  &#x3C;requirements>\n    &#x3C;requirement type='package' version='X.Y.Z'>NAME&#x3C;/requirement>\n  &#x3C;/requirements>\n</code></pre>\n<p>2 Next, a directory should be created, and the path to that directory should be set in universe_wsgi.ini as 'tool_dependency_dir'.</p>\n<p>3 Galaxy will then source the following file prior to executing the tool's\n<command>:</p>\n<pre><code>  &#x3C;tool_dependency_dir>/&#x3C;NAME>/&#x3C;X.Y.Z>/env.sh\n</code></pre>\n<p>4 The 'version' attribute of the 'requirement' tag is optional and if left\noff, Galaxy will look for the following instead:</p>\n<pre><code>  &#x3C;tool_dependency_dir>/&#x3C;NAME>/default/env.sh\n</code></pre>\n<h3 id=\"data-libraries\"><a href=\"#data-libraries\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Data Libraries</h3>\n<ul>\n<li>UI: new style for dropdown menus.</li>\n<li>Now uses jStore to save folder expansion state.</li>\n<li>Pre-generate and cache variables so that expensive functions like jQuery.siblings, jQuery.filter and jQuery.find only have to be called a minimum amount of times. Provides significant speedup to loading of large data libraries.</li>\n</ul>\n<h3 id=\"genome-indexes\"><a href=\"#genome-indexes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Genome Indexes</h3>\n<ul>\n<li>Add basic support for <strong>Bowtie</strong> indexes as a datatype (bowtie_base_index, bowtie_color_index), available via datatype conversion. Currently, the indexes need to be converted manually from the FASTA file before use in Bowtie, but they can be reused.</li>\n<li>A new sample loc file (tool-data/all_fasta.loc.sample) was added which lists fasta files. A script (scripts/loc_files/create_all_fasta_loc.py) was created that can be used to generate this loc file for local installations.</li>\n</ul>\n<h3 id=\"data-formats\"><a href=\"#data-formats\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Data Formats</h3>\n<ul>\n<li>New <strong>gff2bed</strong> tool to convert GFF3 files to BED.</li>\n<li>Modified Filter and Sort -> <strong>Filter</strong> tool to operate correctly on files with a variable number of columns, such as in SAM files.</li>\n<li>New datatype added: <strong>VCF</strong> (variant call format).</li>\n</ul>\n<h3 id=\"histories\"><a href=\"#histories\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Histories</h3>\n<ul>\n<li>Add descriptive labels to output dataset names for <strong>MACS</strong> peakcalling tool.</li>\n<li>Add name/designation to HDA name for new datasets created in collect_primary_datasets.</li>\n</ul>\n<h3 id=\"workflow-tuning\"><a href=\"#workflow-tuning\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Workflow Tuning</h3>\n<ul>\n<li>Shift management of the interaction between workflow outputs and HideDatasetActions to the front end editor.</li>\n<li>No usability changes, but this resolves the issue with multiple HideDatasetActions being created.</li>\n<li>Existing workflows displaying multiple HideDatasetActions per step on the Run Workflow screen will persist.  These extra HideDatasetActions are harmless, but a simple edit workflow -> save will remove them.</li>\n<li>\n<p>Workflow Inputs change:</p>\n<ul>\n<li>Workflow inputs that aren't a subtype of text, were previously not an option.</li>\n<li>Added 'data' datatype to registry, which will allow both text and binary inputs (and their subtypes) to workflow input steps.</li>\n<li>Note that this will allow a user to change the datatype of something to 'data'.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"user-interface-ui\"><a href=\"#user-interface-ui\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>User Interface (UI)</h3>\n<ul>\n<li>New function for downloading metadata files associated with datasets</li>\n</ul>\n<p>(such as bai indices for bam files). See the Save icon drop-down menu.</p>\n<ul>\n<li>Enable display of unicode characters in history and workflow annotations and when listing and running workflows.</li>\n<li>Dynamicically generated popup-style menus. Greatly improves load</li>\n</ul>\n<p>time, especially for data libraries having potentially large menu.</p>\n<ul>\n<li>Labels next to checkboxes can now be clicked to check the corresponding box.</li>\n<li>Radio boxes in tool forms now also have clickable labels as well.</li>\n<li>New style for search boxes in grids. Grid items will no longer show outline when hovered upon if there are no actions to be performed.</li>\n<li>Refactored refresh_on_change javascript code to run in galaxy.base when the page is loaded.</li>\n<li>Remove the creation of a background element that closes the active menu clicked. Instead, bind an event to close active menus to the document object of current and all other framesets. Tested in IE.</li>\n<li>Make links in split menu buttons \"go through\" instead of popping up the menu options.</li>\n</ul>\n<h3 id=\"general\"><a href=\"#general\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>General</h3>\n<ul>\n<li>Functional Test Framework: new nose plugin that shows a diff between tests failed this time and last time.</li>\n<li>Documentation update to add more options added to the sample config file.</li>\n</ul>\n<h3 id=\"bug-fixes\"><a href=\"#bug-fixes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bug Fixes!</h3>\n<ul>\n<li>Fix for TextToolParameter.get_html_field when provided value is an empty string but default value specified in tool is non-empty string. Fixes issue with rerun button where if a user had input an empty string, the form displayed when rerun would have the default value from the tool and not the actual previously specified value.</li>\n<li>Fix for Integer<a href=\"/archive/dev-news-briefs/2010-11-24/FloatToolParameter/\">/FloatToolParameter</a>.get_html_field() when 'value' is provided as an integer/float. Fixes an issue seen when saving workflows: If an integer or float tool parameter is changed to a value of 0 or 0.0 and saved, the form field would be redisplayed using the default tool value; and not the value that is now saved in the database.</li>\n<li>Fix for setting columns in workflow builder for ColumnListParameter. e.g. allows splitting lists of columns by newlines and commas and strips leading 'c's.</li>\n<li>Fixes for rerun action to recurse grouping options when checking unvalidated values and cloned HDAs. Better selection of corresponding HDAs from cloned histories, when multiple copies exist.</li>\n<li>Have rerun action make use of tool.check_and_update_param_values(). Fixes Server Error issue when trying to rerun updated tools.</li>\n<li>Fix for display framework to work with workflows that contain tools that have been updated.  Previously, this would cause a server error when trying to view a workflow or a page with an embedded workflow that contained an updated tool.</li>\n<li>Fix bug that was causing Page item selection grids to be initialized twice and hence causing grid paging to fail.</li>\n<li>Add some space between adjacent embedded items on Pages.</li>\n<li>Fix path to closebox.png image so screencast close button is shown correctly.</li>\n<li>Fix the Admin -> Manage Jobs interface when using multiple Galaxy processes</li>\n<li>When possible (e.g. Python >= 2.6), don't use tons of memory to handle zipped uploads.</li>\n<li>Fix cluster stdout/stderr handling that could cause excessive memory usage if stdout/stderr were very large.</li>\n<li>Make the PBS runner actually stop jobs when a user deletes output. This would only work before if the Galaxy user was a PBS \"operator\" and only using a single process setup.</li>\n<li>Cause waiting jobs to fail if any of their inputs fail to set metadata correctly.</li>\n<li>Fix 'import from current history' for Data Libraries that was showing metadata files that are not visible. Fix this same issue for 'Copy history items' feature.</li>\n<li>DRMAA runner now uses get_id_tag() in Wrapper instead of job_id directly for creation of .sh .o and .e files, as well as some debugging.</li>\n<li>Prevent Rename Dataset Action from allowing a blank input.</li>\n</ul>\n<hr>\n<h3 id=\"how-to-get-galaxy\"><a href=\"#how-to-get-galaxy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>How to get Galaxy</h3>\n<p><a href=\"http://bitbucket.org/galaxy/galaxy-central/wiki/GetGalaxy\" target=\"_blank\" rel=\"noopener noreferrer\">Get Galaxy!</a></p>\n<p><code>hg clone http://www.bx.psu.edu/hg/galaxy galaxy-dist</code></p>\n<hr>\n<h3 id=\"about-galaxy\"><a href=\"#about-galaxy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>About Galaxy</h3>\n<p><strong>Galaxy</strong> is supported in part by <strong>NSF</strong>, <strong>NHGRI</strong>, the <strong>Huck Institutes of the Life Sciences</strong>, and <strong>The Institute for CyberScience at Penn State</strong>.</p>\n<p><a href=\"/galaxy-team/\">Core Team</a></p>\n<p><a href=\"http://usegalaxy.org\" target=\"_blank\" rel=\"noopener noreferrer\">Use Galaxy!</a></p>\n<h2 id=\"development-home\"><a href=\"#development-home\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><a href=\"http://bitbucket.org/galaxy/galaxy-central\" target=\"_blank\" rel=\"noopener noreferrer\">Development Home</a></h2>\n"}},"context":{}}