{"hash":"c32ecfdb33b075b0057598b5b9118f3554a398cf","data":{"article":{"id":"7618f50992b59d3cee81fa032095c40f","title":"Login to Galaxy with Custos","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<p><em>This page explains how to use this feature, for admin-specific docs, please\nrefer to the <a href=\"/src/authnz/config/oidc/idps/custos/index.md\">configuration page</a>.</em></p>\n<h2 id=\"what-is-custos-and-when-should-i-use-it\"><a href=\"#what-is-custos-and-when-should-i-use-it\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>What is Custos and when should I use it?</h2>\n<p>Custos allows you to login to Galaxy without using a Galaxy username and\npassword but instead use one of your other online identities, such as Google.\nCustos is the recommended way to login to Galaxy. However, before you proceed,\nread the rest of this page.</p>\n<h2 id=\"link-an-existing-galaxy-account\"><a href=\"#link-an-existing-galaxy-account\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Link an existing Galaxy account</h2>\n<p>If you already have a Galaxy account with a username and password and want to\ntransition to using an external identity, <strong>you must first link the existing\nGalaxy account to the desired external identity</strong>.</p>\n<div class=\"alert alert-info\" role=\"alert\">\n    **IMPORTANT:** If you sign in with an external identity that has not been \n    linked to your existing Galaxy account, a new Galaxy account will be created. \n    This may violate the policy of a given Galaxy server and will make it \n    impossible to associate that identity with an existing Galaxy account.\n</div>\n<ol>\n<li>Sign in to Galaxy using your existing username and password;</li>\n<li>Proceed to the User -> Preferences -> Manage Third-Party Identities page;</li>\n<li>\n<p>Click on the <em>Sign in with Custos</em> button and follow through to\nsign in using your desired identity provider. In the process, you will be\nredirected to the identity provider login page before returning to Galaxy.</p>\n<p><img src=\"/src/authnz/use/oidc/idps/custos/user-preferences.png\" alt=\"image\"></p>\n</li>\n</ol>\n<p>Once you have completed these steps, any identity provider linked to your\naccount will be listed on the user preferences page. From now on you can sign\nin to Galaxy using either the user name and password or the external identity\n(as shown below). </p>\n<h2 id=\"sign-in-to-galaxy-via-custos\"><a href=\"#sign-in-to-galaxy-via-custos\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sign in to Galaxy via Custos</h2>\n<p>Regardless if your are logging in for the first time or after you have linked\nyour existing Galaxy account to an external identity, use the following steps\nto sign in.</p>\n<p>Head to the Galaxy login page, select the desired identity provider from the\ndrop down menu, and click <em>Sign in with Custos</em>. You will be redirected to the\nidentity provider's login page and, after authenticating, you will automatically\nreturn to Galaxy as a logged in user.</p>\n<ol>\n<li>\n<p>Click on the <strong>Login or Register</strong> button:</p>\n<p><img src=\"/src/authnz/use/oidc/idps/google/01.png\" alt=\"image\"></p>\n</li>\n<li>\n<p>Choose an identity provider and click the <strong>Sign in with Custos</strong> button.\nYou will then be redirected to the selected identity provider's login screen\nwhere you can login using your credentials. Having logged in the selected\ninstitution, you will be redirected back to Galaxy and you will be logged in\nto Galaxy with your external identity.</p>\n<p> <img src=\"/src/authnz/use/oidc/idps/custos/custos-login-flow.png\" alt=\"image\"></p>\n <div class=\"alert alert-info\" role=\"alert\">\n     **NOTE:**\n<pre><code> If this login option is not displayed, then either OIDC is\n not enabled on the instance of Galaxy you are using, or its Custos\n backend is not configured. Regardless, you would need to contact the\n administrator of that Galaxy instance to enable it.\n</code></pre>\n </div>\n</li>\n</ol>\n<h2 id=\"disconnect-an-account-from-galaxy\"><a href=\"#disconnect-an-account-from-galaxy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Disconnect an account from Galaxy</h2>\n<p>If you have used an external identity to login to Galaxy and would like to\ndisconnect it, you can do so from the User -> Preferences -> Third-party Identity\nManagement page.</p>\n<p>Keep in mind that once disconnected, you will not be able to sign in using that\nidentity. At a minimum, you should know (or reset) your password before\ndisconnecting.</p>\n<p>To disconnect an identity, simply click the <em>Disconnect Custos</em> button from\nthe Third-party identity management preferences page.</p>\n<p><img src=\"/src/authnz/use/oidc/idps/custos/disconnect-idp.png\" alt=\"image\"></p>\n<h2 id=\"about-custos\"><a href=\"#about-custos\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>About Custos</h2>\n<p><a href=\"https://airavata.apache.org/custos/\" target=\"_blank\" rel=\"noopener noreferrer\">Custos</a> is an <a href=\"https://www.nsf.gov/awardsearch/showAward?AWD_ID=1840003&#x26;HistoricalAwards=false\" target=\"_blank\" rel=\"noopener noreferrer\">NSF-funded\nproject</a>,\nbacked by open source software that provides science gateways such as Galaxy\nwith single sign-on, group management, and management of secrets such as access\nkeys and OAuth2 access tokens. With Galaxy, Custos allows users to login to\nGalaxy without having to (explicitly) create a Galaxy user account. When logging\nin via Custos, there are more than 3,000 available Identity Providers (IdPs),\nincluding many academic institutions from around the world, allowing users to\nlink their institutional identities with a Galaxy account.</p>\n"}},"context":{}}