{"hash":"c32ecfdb33b075b0057598b5b9118f3554a398cf","data":{"article":{"id":"e63c146e9c123807c9fba9d1ef0e6d8d","title":"Configure Your Galaxy Instance as a Globus OIDC Client","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<p><em>This page explains how to configure this feature, for user-specific docs, please refer to <a href=\"/src/authnz/use/oidc/idps/globus/index.md\">this</a> page.</em></p>\n<p>Leveraging OpenID Connect (OIDC) protocol, users can login to Galaxy with their\nGlobus account, without having to (explicitly) create a Galaxy user account. To\nenable this feature on your Galaxy instance, you would need to first register\nyou Galaxy instance as an OIDC relying party (RP, or client) with Globus, then\nuse your registration information to configure Galaxy. These steps are described\nin details in the following sections.   </p>\n<h1 id=\"client-registration\"><a href=\"#client-registration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Client Registration</h1>\n<p>Take the following steps in order to register your Galaxy instance as an OIDC RP\non Globus's OAuth2.0 authorization server:</p>\n<ol>\n<li>\n<p>Go to <a href=\"https://developers.globus.org\" target=\"_blank\" rel=\"noopener noreferrer\">Globus Developers</a> page\nand click on the <a href=\"https://auth.globus.org/developers\" target=\"_blank\" rel=\"noopener noreferrer\">Register your app with Globus</a> link:</p>\n<pre><code>![image](/src/authnz/config/oidc/idps/globus/01.png)\n</code></pre>\n</li>\n<li>\n<p>If you are not already logged in, this will take you to Globus\nlogin page, where you would need to login with your preferred method: </p>\n<pre><code>![image](/src/authnz/config/oidc/idps/globus/02.png)\n</code></pre>\n</li>\n<li>\n<p>Having logged in, you will be redirected to the new project creation page (if you\ndo not have any previous projects), fill in all the fields and hit the <em>Create Project</em>\nbutton:</p>\n<pre><code>![image](/src/authnz/config/oidc/idps/globus/03.png)\n</code></pre>\n</li>\n<li>\n<p>Having create a project, you will be redirected to the <strong>Apps and Services</strong> page,\nwhere you would need select the project you just created, and click on the <em>Add...</em> button,\nand then choose <strong>Add new app</strong> option:</p>\n<pre><code>![image](/src/authnz/config/oidc/idps/globus/04.png)\n</code></pre>\n</li>\n<li>\n<p>In the <strong>App Registration</strong> page fill in the fields as shown in the following figure:</p>\n<p><img src=\"/src/authnz/config/oidc/idps/globus/05.png\" alt=\"image\"></p>\n<p>Note that the options we selected as shown in the above figure, are the\nminimum required; however, you may select other options according to your\nsetup requirements. </p>\n</li>\n<li>\n<p>Then you will be taken back to the <strong>Apps and Services</strong> page, where you will\nobtain all the info of you registered Galaxy instance: </p>\n<pre><code>![image](/src/authnz/config/oidc/idps/globus/06.png)\n</code></pre>\n</li>\n<li>\n<p>Scroll down to the bottom of the page and click on the\n<strong>Generate New Client Secret</strong> button, then provide a name for the secret,\nand click on the <strong>Generate</strong> button:</p>\n<pre><code>![image](/src/authnz/config/oidc/idps/globus/07.png)\n</code></pre>\n</li>\n<li>\n<p>Copy the <strong>Client ID</strong> and <strong>Client Secret</strong> from this page, and set the\nrelated setters as explained in the following section. </p>\n<pre><code>    \n</code></pre>\n</li>\n</ol>\n<h1 id=\"galaxy-configuration\"><a href=\"#galaxy-configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Galaxy Configuration</h1>\n<p>You would need to setup you Galaxy instance to leverage OIDC protocol.\nThis setup is common for all OIDC IdPs, and is\n<a href=\"/src/authnz/config/oidc/index.md#configure-oidc-backends\">documented at this page</a>.\nThen you would need to add Globus-specific setters to the <code>config/oidc_backends_config.xml</code> file as the\nthe following: </p>\n<pre><code class=\"language-xml\">&#x3C;?xml version=\"1.0\"?>\n&#x3C;OIDC>\n    &#x3C;provider name=\"Globus\">\n        &#x3C;client_id> ... &#x3C;/client_id>\n        &#x3C;client_secret> ... &#x3C;/client_secret>\n        &#x3C;redirect_uri>http://localhost:8080/authnz/globus/callback&#x3C;/redirect_uri>\n        &#x3C;prompt>consent&#x3C;/prompt>\n    &#x3C;/provider>\n&#x3C;/OIDC>\n</code></pre>\n<p>Set <code>client_id</code> and <code>client_secret</code> setters with the values you\nobtained when registering your Galaxy instance on Globus (see previous\nsection). See <a href=\"/src/authnz/config/oidc/index.md#redirect-uri\">this section</a>\nabout the redirect URI.</p>\n<p>See <a href=\"/src/authnz/config/oidc/index.md#supported-oidc-idps\">this section</a>\nfor more details.</p>\n<p>Having set this configuration, restart Galaxy to have the option of login to\nGalaxy with a Globus account enabled.</p>\n"}},"context":{}}