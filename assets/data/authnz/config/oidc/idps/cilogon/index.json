{"hash":"4f66c62fb6940f4cd6ecf5e4a1e2d62361ec5ff4","data":{"article":{"id":"5600f7106d95acc11a64ee6ef0c33603","title":"Configure Your Galaxy Instance as a CILogon OIDC Client","tease":"","category":null,"date":null,"days":null,"contact":"","contact_url":"","fileInfo":{"path":"build/content-md/authnz/config/oidc/idps/cilogon/index.md"},"authors":"","location":"","location_url":"","source_blog":"","source_blog_url":"","skip_title_render":null,"redirect":"","autotoc":null,"links":[],"image":"","images":{},"external_url":"","content":"<div class=\"toc-wrapper col-md-3\">\n<ul>\n<li><a href=\"#client-registration\">Client Registration</a></li>\n<li><a href=\"#galaxy-configuration\">Galaxy Configuration</a></li>\n</ul>\n</div>\n<div class=\"body-wrapper col-md-9\">\n<p><em>This page explains how to configure this feature, for user-specific docs, please refer to <a href=\"/authnz/use/oidc/idps/cilogon/\">this</a> page.</em></p>\n<p>Leveraging OpenID Connect (OIDC) protocol, users can login to Galaxy with their\nexsiting insitutional login credentials by using <a href=\"https://www.cilogon.org/oidc\" target=\"_blank\" rel=\"noopener noreferrer\">CILogon</a>,\nwithout having to (explicitly) create a Galaxy user account. To\nenable this feature on your Galaxy instance, you would need to first register\nyou a client on the CILogon portal and await approval of your client, then\nuse your registration information to configure Galaxy. These steps are described\nin details in the following sections.</p>\n<h1 id=\"client-registration\"><a href=\"#client-registration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Client Registration</h1>\n<p>Take the following steps in order to register a client with CILogon on its OAuth2.0 authorization server:</p>\n<p>Visit the <a href=\"https://cilogon.org/oauth2/register\" target=\"_blank\" rel=\"noopener noreferrer\">CILogon OIDC/OAuth 2.0 Client Registration page</a>\nand fill out the form with the appropriate information according to\nyour Galaxy instance:</p>\n<ol>\n<li>The <em>Home URL</em> should be the main address that users will use to get to your instance of Galaxy.</li>\n<li>\n<p>For the <em>Callback URLs</em> field, you need to enter\nyour instanceâ€™s OIDC redirect URI, which is in the following template:</p>\n<pre><code>&#x3C;Host URI>/authnz/cilogon/callback\n</code></pre>\n<p>For instance:</p>\n<pre><code>http://localhost:8080/authnz/cilogon/callback\n</code></pre>\n<p>See <a href=\"/authnz/config/oidc/#redirect-uri\">this section</a> for details.</p>\n</li>\n<li>After filling out the form, hit <em>Register Client</em> and wait for approval from the CILogon team.\nUpon approval, the notification email will include your OAuth <code>Client ID</code> and <code>Client Secret</code>;\nnote this info! You will need it for the Galaxy configuration.</li>\n</ol>\n<h1 id=\"galaxy-configuration\"><a href=\"#galaxy-configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Galaxy Configuration</h1>\n<p>You would need to setup you Galaxy instance to leverage OIDC protocol.\nThis setup is common for all OIDC IdPs, and is\n<a href=\"/authnz/config/oidc/#configure-oidc-backends\">documented at this page</a>.\nThen you would need to add CILogon-specific setters to the <code>config/oidc_backends_config.xml</code> file as in the following. Note that the <strong>redirect_uri</strong> must have been included in the list of callback URLs during your CILogon client registration:</p>\n<pre><code class=\"language-xml\">&#x3C;?xml version=\"1.0\"?>\n&#x3C;OIDC>\n    &#x3C;provider name=\"CILogon\">\n        &#x3C;url>https://cilogon.org/authorize&#x3C;/url>\n        &#x3C;client_id> ... &#x3C;/client_id>\n        &#x3C;client_secret> ... &#x3C;/client_secret>\n        &#x3C;redirect_uri>http://localhost:8080/authnz/cilogon/callback&#x3C;/redirect_uri>\n        &#x3C;realm>master&#x3C;/realm>\n    &#x3C;/provider>\n&#x3C;/OIDC>\n</code></pre>\n<p>See <a href=\"/authnz/config/oidc/#supported-oidc-idps\">this section</a>\nfor more details.</p>\n<p>Having set this configuration, restart Galaxy to have the option to login to\nGalaxy using CILogon by selecting your institution from the list and entering the login credentials.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1082 502' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e95a50e72481a245a609da8645ad8f00'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e95a50e72481a245a609da8645ad8f00)' width='1082' height='502' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAeCAIAAAATj48OAAAACXBIWXMAAAsSAAALEgHS3X78AAAIGklEQVRYw82YB3caSRKA%2bf%2b/4e7e3q3tsxyUA0kCBEgw5DCEIScRBwZmyMH3DSNhrezzPntlefv1a2qqq7urqquqqzCtv7%2btVquRqinKaDqjzbf9vk0mU2U4HAzoymK%2b0DRtpKrTybTd6o61CcjRSIUGSlkeDIej6XQG8Ww%2b32zWP9ZMn76/rTebrFQwW5yHR%2bZMtmCxuSxWZzAUD0USwGar4/DYYrt0n19cCYGoy%2b2z2q9PzuxWu%2bvC4gC%2bdHhOz%2byBUOzK6d0/OH/3/qRWu2PbzWbzA8z8iAC01Wq9XK6WyyXq17QxwEpva%2bOXEW46nd54MoGYWVT1QLMCni8WjGhdpxlPPv2FZvr0fO0bGtx8hXjzLIeanon1zY6hzQO7qPjhurgQnQbg/616OQGMI/OFcjiaTCYz8/k8mcq6PUIkKnpvAje3QWDX9W2z2Ykl0ofH5lr9Lp3JYfc%2bXxjf8AlhfDccSVy7/dB7bgKMlUr95XzAOKbTlaVcKRxJDocqLlitNdrtbqFYAa7Xm2JKgu9Wp5tKS3fNtqIMM9k8mFqtkSuUAAqFMmQIBr7eaBLTXtqJ/z7NtFgsiA/zh7bYth38GLmb2uGfwPqjYAA63sB8Bh61L5Ysvq895spkPAdfd8cvgPt3YPuW/cK22T57%2bns6GplQf6FQqNfr5XL57u5OURRZlgF6vd5wOGxuW6lUYoTG%2bJxMJr/KYAxVxmKxVqsFoKqqCYzBlsEfKIBGowFMItDpdBAGaoPGAH6hAEZD8ZjQvQBr/UbWW8n0WL3evpSGrMbUg1ltPt1bl45fLhcPnWE7fsbc4%2bc/p%2bE228de318XoN0b9PpDxnZX752eogO9Qbc/BDY%2bu/IW6OlAu9vv9AYdWYGgu13YlaHUp3RgO%2br0soIqNj%2b56VFIKtbiqZxUquXLdalQzRQqhUoDZEzMZQvVdK6cK9XFbDEllaBhhCxXqkGWzBTAQ5zOl3VMvqLTFGuiVGIqX2kslquXCKMpqfiv39///vbw/cGF2e4%2bNTusV963H07/8duewyMcnV%2b%2b2jt68%2b547%2bPp/rHl36/394%2btjO/2z%2b3O26Ozy9d7x//8z/tXb48%2bHJp/e/WRVW/enUQSmXK9jRm9hADoMhxP2xxeX5C3P0/nQgIRMRLPiFIxns4HomI4nglG00I4GYymQrG0P5QIJzJMwSgYXygRiqUiiSyrfME4QLF6x73NF8tdXP52e2JqOyd8gtyZzWO8SR6oI22qjmeqNhuq48FQpeTQxjosD0Z9RVVGYzAqNNoU2PgcbvsWGLNchzW98wkBTjUYao9fj%2bfKPb9MAU1uj5/cy%2bMV4okUmUm3J0ejSe9tgESF3ObS4S2WKmIqKwRjwVCsUCxHYyKZHJShcFwIRh2uG7dXIOpGIolEIkMuRKJGckbCQzXDDpFoMpcvcQrZnl%2bIgHG4bv2BCJTpTJ7cTghG2DkQjNKdrlsKI78QVlWNJdCTYgmBCIDr2ucXoImB8dwIHAplNJY0FUtVzkiIGThOJDP9gQKLCAOXvV6fsVypwS6Mch4Y8jZ6qVQtFEpJMZNE6myuUW/G4mI6LbXaHZZwBnmbIEQgaLU6cl9hZJNSuUYByXJoSPIajRZHX3v8SMVUKp2TpCJTlHukd2Bi8VSz1QFAccxWq41bX6jV7rI/kpPJspVpOFK5iG1%2bsuBmxuMpzjehVp3OUAMAJSx1E8B0vqp3lb46mS9W8%2bVqMl8CkPOr04WiTfnkCzxdmy2a/dF4tsBsCduqNqYaJqqS%2bBDBjURGG08o5QBUvaBbqZo2UIZMUKCR4cy2WRQPjPHGwI7BCb0/GI4fvaQmUl%2bUQYF75fRwAxSvHz6ekb4fnViSYhZbSmUk6trzc7uYq/iSRbuQugqk35h9h86wkCxeCilnKGP1ie9sAaaShQaYE3fs2BU9dcdiUtXpuqFQZgfKBoCb20A0Lv5378hid52e21F/JJK89YcxCcplDrU7PKKYdTi9VpsLfUv5IqUzNfeVw%2bu89p2ZrzAzSmqu1KhsSSU2Rn5nlEsoo99XHuVtn/M5CCboZak/UD3lPoNfrtbGRihbwZ1ni%2bWuEEP9i8X9o75ec59GJAGD7o2bfxxSdr6%2bCzvLpcGSfgNPQgI3dH8DLuQUwjb7Na527fbZL93ISr%2b88nADGBy3gf4wQUT/sH%2bGx6NUp8sLMQRoiyVnF5f4ks8f8t4EKWKYos4Kh%2bPlSh0Y/4sn0ij7wuJgE/TKteNs7Oy9DVLQ4NPswP0btRveDwOhSILIceMLYSCMeDaxBPfFKPBSPTB4BXRqovbjGHxuNFKlXBE%2b2JEYgsdUqnXsslJt8Nntyow4cbvTMzA4N8Vhu9Mtl2t4FQqGhrWNuxYaQQwCGhgiEvv05H6r1aUQY38W5nJFtMhuuC86wk1xXKaazTbBR0xLBhssx6fHkykw/spCBEBOyHryAG51E9L/n5rO0AfXip/iWzJRQxmyIxFAlgdYG1OkpJxHJYkbERMIJggs9wdGVEEMNkUGyhP4xhG18Zg98V2Q9OlsBjH4yWTW7fVR6t1dGx0Rf//qS4x/YBJmi4OYRSSmKjdbndw4JmS/0v%2bBwtX0OJtMn5zZCKa44MGxhZIcj4QmKxWxloMjs%2b5/V25sgCuOxEQUabt0Z3NFzI%2bXIRiOc4TVdo2yPR7h5NQG2eu3B1D%2b6Wv9DYJnromNv7q%2bOkVYfMbH%2bA838CTTeJR73I9fzPxhytCOUZc%2b0db60WgEtCeJzW7J3%2bWfuT8tBX9G%2bx8E3xcxKtRiFAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"1082\" alt=\"image\" data-srcset=\"/assets/static/cilogon-login-list.82a2fbd.885f4b463b6405feb3c54c4d368dcf45.png 480w, /assets/static/cilogon-login-list.ec49c5e.885f4b463b6405feb3c54c4d368dcf45.png 1082w\" data-sizes=\"(max-width: 1082px) 100vw, 1082px\" data-src=\"/assets/static/cilogon-login-list.ec49c5e.885f4b463b6405feb3c54c4d368dcf45.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/cilogon-login-list.ec49c5e.885f4b463b6405feb3c54c4d368dcf45.png\" width=\"1082\" alt=\"image\"></noscript></p>\n</div>\n"}},"context":{}}