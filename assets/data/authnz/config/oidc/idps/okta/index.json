{"hash":"c32ecfdb33b075b0057598b5b9118f3554a398cf","data":{"article":{"id":"ed71eb3f73274d2d064e89ced85b5a7e","title":"Configure Your Galaxy Instance as an OIDC Client for your organization's Okta Infrastructure","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<p><em>This page explains how to configure this feature, for user-specific docs, please refer to <a href=\"/src/authnz/use/oidc/idps/okta/index.md\">this</a> page.</em></p>\n<p>Leveraging OpenID Connect (OIDC) protocol, users can login to Galaxy using their\nidentity on <a href=\"https://www.okta.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Okta Infrastructure (AAI)</a>,\nwithout having to (explicitly) create a Galaxy user account. To\nenable this feature on your Galaxy instance, you would need to first register\nyou Galaxy instance as an OIDC relying party (RP, or client) with your organization's Okta, and then\nuse your registration information to configure Galaxy. These steps are described\nin details in the following sections.</p>\n<h1 id=\"client-registration\"><a href=\"#client-registration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Client Registration</h1>\n<p>Take the following steps to register your Galaxy instance (RP) to an Okta <strong>dev environment</strong>:</p>\n<ol>\n<li><a href=\"https://developer.okta.com/signup/\" target=\"_blank\" rel=\"noopener noreferrer\">Create a Okta developer account</a>, if you do not already have it.</li>\n<li>\n<p>Login to your Okta developer account's admin panel and register a new application. </p>\n<p><img src=\"/src/authnz/config/oidc/idps/okta/register-a-new-app-1.png\" alt=\"image\"></p>\n</li>\n<li>Set the \"Base URI\", \"Login redirect URIs\", \"Logout redirect URIs\", \"Group assignments\" and \"Grant type allowed.</li>\n<li>Click the green \"Done\" button at the bottom and make a note of all\nthe generated credentials that is made available to you. The <code>Client ID</code> and\n<code>Client Secret</code> fields will be used to configure Galaxy, and <code>Client Configuration URL</code>\nand <code>Registration Access Token</code> will be needed to access the client registration in future.</li>\n<li>Use the returned information to setup Galaxy to receive authentication requests using Okta! </li>\n</ol>\n<h1 id=\"galaxy-configuration\"><a href=\"#galaxy-configuration\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Galaxy Configuration</h1>\n<p>You would need to setup your Galaxy instance to leverage OIDC protocol.\nThis setup is common for all OIDC IdPs, and is\n<a href=\"/src/authnz/config/oidc/index.md#configure-oidc-backends\">documented at this page</a>.\nThen you would need to add Okta-specific setters to the <code>config/oidc_backends_config.xml</code>\nmatching the values you got from the client registration process, as well as the exact same\n<code>redirect_uri</code> you specified (depending on your setup):</p>\n<pre><code class=\"language-xml\">&#x3C;?xml version=\"1.0\"?>\n&#x3C;OIDC>\n    &#x3C;provider name=\"Okta\">\n        &#x3C;client_id> ... &#x3C;/client_id>\n        &#x3C;client_secret> ... &#x3C;/client_secret>\n        &#x3C;redirect_uri>http://localhost:8080/authnz/okta/callback&#x3C;/redirect_uri>\n        &#x3C;api_url>https://organization.okta.com/oauth2&#x3C;/api_url>\n    &#x3C;/provider>\n&#x3C;/OIDC>\n</code></pre>\n<p>Having set this configuration, restart Galaxy to have the option of login to\nGalaxy with your organization's Okta identity:</p>\n<p><img src=\"/src/authnz/config/oidc/idps/okta/login-with-okta.png\" alt=\"image\"></p>\n"}},"context":{}}