{"hash":"ef8aba8bb8a02457efb168ecda8caf9311205534","data":{"article":{"id":"e50fe861d8d5d16bd703040ecd5bb980","title":"","tease":"","category":null,"date":null,"days":null,"contact":"","contact_url":"","authors":"","location":"","location_url":"","source_blog":"","source_blog_url":"","skip_title_render":null,"redirect":"","links":[],"image":"","images":{},"external_url":"","content":"<div class=\"toc-wrapper col-md-3\">\n<ul>\n<li><a href=\"#refgenie-for-local-instances\">refgenie for Local Instances</a></li>\n<li>\n<p><a href=\"#how-it-works\">How it works</a></p>\n<ul>\n<li><a href=\"#inititalize-refgenie\">Inititalize refgenie</a></li>\n<li><a href=\"#configure-galaxy-to-load-refgenie-genomes\">Configure Galaxy to load refgenie genomes</a></li>\n<li><a href=\"#install-a-data-manager-tool-for-refgenie-optional\">Install a Data Manager tool for refgenie (optional)</a></li>\n</ul>\n</li>\n<li><a href=\"#figure-1-extending-galaxys-reference-data-with-refgenie\">Figure 1. Extending Galaxy’s reference data with refgenie.</a></li>\n<li><a href=\"#table-s1-comparison-of-galaxy-refgenie-and-refgeniegalaxy-features\">Table S1. Comparison of Galaxy, refgenie, and refgenie+Galaxy features</a></li>\n</ul>\n</div>\n<div class=\"body-wrapper col-md-9\">\n<h2 id=\"refgenie-for-local-instances\"><a href=\"#refgenie-for-local-instances\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>refgenie for Local Instances</h2>\n<p>Built-in data files are critical for many Galaxy tools. This page will describe how to use <strong><a href=\"http://refgenie.databio.org/\" target=\"_blank\" rel=\"noopener noreferrer\">refgenie</a></strong> with your local instance of Galaxy.</p>\n<p>Please note that \"built-in\" or \"cached\" data can also be managed natively from within the Galaxy admin interface. For details, see: <strong><a href=\"/admin/tools/data-managers/\">Data Managers Overview</a></strong> and our <strong><a href=\"https://github.com/galaxyproject/dagobah-training/blob/2017-montpellier/sessions/05-reference-genomes/ex1-reference-genomes.md\" target=\"_blank\" rel=\"noopener noreferrer\">Data Managers Tutorial</a></strong>.</p>\n<h2 id=\"how-it-works\"><a href=\"#how-it-works\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>How it works</h2>\n<p>There are several steps needed for using refgenie with Galaxy. The first is to initialize a refgenie installation locally, following the standard directions at the <strong><a href=\"http://refgenie.databio.org/\" target=\"_blank\" rel=\"noopener noreferrer\">refgenie</a></strong> website. Next, the galaxy.yml file needs to modified to point to the location of the <code>genomes.yml</code> file. Finally, an optional Data Manager tool can be installed from the ToolShed to enable a Galaxy administrator to populate the configured refgenie installation through the Galaxy interface.</p>\n<h3 id=\"inititalize-refgenie\"><a href=\"#inititalize-refgenie\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Inititalize refgenie</h3>\n<p>Install refgenie and run <code>refgenie init</code>, e.g.:</p>\n<pre><code class=\"language-shell\">/$ mkdir refgenie\n/$ cd refgenie\n/refgenie$ virtualenv -p python3 venv\n  ...\n/refgenie$ source venv/bin/activate\n(venv) /refgenie$ pip install refgenie\n  ...\n(venv) /refgenie$ refgenie init -c genome_config.yaml\nInitialized genome configuration file: /refgenie/genome_config.yaml\n</code></pre>\n<p>List available remote genomes:</p>\n<pre><code class=\"language-shell\">(venv) /refgenie$ refgenie listr -c genome_config.yaml\n  ...\n</code></pre>\n<p>Install a genome:</p>\n<pre><code class=\"language-shell\">(venv) /refgenie$ refgenie pull -c genome_config.yaml -g t7 fasta\n  ...\n</code></pre>\n<h3 id=\"configure-galaxy-to-load-refgenie-genomes\"><a href=\"#configure-galaxy-to-load-refgenie-genomes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Configure Galaxy to load refgenie genomes</h3>\n<p>Edit <code>/$GALAXY_ROOT/config/galaxy.yml</code> to point to the refgenie genome configuration YAML file:</p>\n<pre><code class=\"language-yml\" id=\"\">  # File containing refgenie configuration, e.g.\n  # /path/to/genome_config.yaml. Can be used by refgenie backed tool\n  # data tables.\n  refgenie_config_file: /refgenie/genome_config.yaml\n</code></pre>\n<p>and then restart the Galaxy server.</p>\n<h3 id=\"install-a-data-manager-tool-for-refgenie-optional\"><a href=\"#install-a-data-manager-tool-for-refgenie-optional\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Install a Data Manager tool for refgenie (optional)</h3>\n<p>For information on installing tools from the ToolShed, follow these <a href=\"/admin/tools/add-tool-from-toolshed-tutorial/\">directions</a>. Search for \"refgenie\", to find the relevant tool.</p>\n<p>To access and run Data Manager tools, follow these <a href=\"/admin/tools/data-managers/\">directions</a>.</p>\n<h2 id=\"figure-1-extending-galaxys-reference-data-with-refgenie\"><a href=\"#figure-1-extending-galaxys-reference-data-with-refgenie\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Figure 1. Extending Galaxy’s reference data with refgenie.</h2>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 2463 1310' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-2aabb848aabd833a26f8f2dbff9e6bb3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-2aabb848aabd833a26f8f2dbff9e6bb3)' width='2463' height='1310' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAiCAIAAABgN0jYAAAACXBIWXMAAC4jAAAuIwF4pT92AAALqElEQVRYw8VYWXMU1xXWX8nylKRskAw2NrYBg/GSxDhOSDlJJZVKKnnJa97yZKfAgFNgnEoVWezKg1OxXcYyGCR2DMgsWmY0%2b0xPT%2b/7MjPdPTPdPdM9%2bW63JAQIWVJVyldHV7db3fee/XynRy5evBhF0TAZcRwPBgNcdpPR7/fTy%2bHiwAOYJyYmaJpeukxH%2bhjupO/2ej3ciZMxXDbSx6anp29M3Xz957/ZsWvfa/t/O7pl1ze%2b9d1vfvt733nkqSe2f3/T2O7Hn3rp0dFdjz/50tZtLz46%2btzY1udHt%2bx5dGw3bv5g3y8f2bxz09hzW7e9tOWJ50cMw2gnw3Ec0zRd1xUEQZIkrDHjPh5oNputZOASDOEZy7bxRpvcIPebTVuWZUHgRFFUFRV3VFVWVUWRVVmS8N82ebS1NDzP8/3g/IUrJ8fPfn720scnP//gPx/998NPPv7k9PipcyfHJz79bPKTT89ixuX46XOnPj//2enzWGOeOHcF97E4M3n5o4/HRxiGsW3bSoaiKGCXoqhMJlMoFEqlEsRIBUglBJdY4GYLAjRbdttummDMA4t1mioWS5Vqud6olkrVYr5CVes1ulauVE0DB7Qs0073ScRT4ziCaURZZ3lZUnRWgLCmZtiyaiiaKSlkxtqwWp1e4HV9zG230%2bAkmhVV3aYavGo0wfPIXDabL5erFJUvlQrl8pe3bk1P3xRFjuPoer3qOPZy5wEjsAXE6OeKSrtWjxs1TaEEp5yL2eqwmBlWWTffpmqcWWsMpWaPGda5ti5pQ0EZamYcDaPUi6ApLJqtdoPlWV5kWMGyW72e3%2bn2usm8nLzOArlet%2b24LWjS7eDdTtdXFHVk5ubN62fPTl26dG1y8trkxI1LV%2bbnGV3vum7sOJHjkLnTwSLyvCE8C%2b6imKZzdapUmbgcXb3MzFy4oVyYb5xiZi6Xi%2bcveLNXdLfm%2bvkwmAuCWtCn%2bkE9alGKUy50m1Y86EMXsAAEgFFFKF83ZFnrdLqpmoim7omalUeqUPjCCJ/PRxTVV5SQZftUzVdNXhiKYkzTMcfFLBtJEs4bCgIuhzRttFq2almdTE6jpqfj6WxBmroS59vla8MLt53rM7NO45Yez/R7k73eqV5wMfAv%2b73xXnCr69y2nGuVNiv4gsCzLI73vO58rsSygqoaltU0THhyU9ctCLYoy/0DeSElJBfsAOFHELCO77dct9XpILjanut5tuc1l8h1m46D2cZC1xW4sGTo7tQtKfdFZpjNVdVcLsgHhalwKq/Vc1nfLjhRZRBmwnA67Of74e0gpmKPczvXiqHaGXSDQFUlURwk6SiXL%2bXyZcLxMi6Hw7VagAgQBAF4chGhSZimf%2b%2bjxZttuGkYBDyyU6XickxvEPh%2bGIb9YOD7fT8I%2bmGA3Bvi554x6OOhMOiEfT8axmEcIwaQoMFBJlsASZKCpDRcz0gFQIIZGSyMCL/kqJXp7oAMSJSSrsuaJopQZTqku%2bvkryDcnZeeIZeCKPAC0kBaEOZzxbm5nEgEgPwhNl9edtYkQDabGX5NI/VpjhPrdabB8NUarevmulyICHD9xpd/Ofq3d46fOP7u3w8dPn7w0LGDbx078NZRLA5gcfDogYPH3vzzoTfeOPDGmwfeOnzs8Nt/PXTk%2bOG338XDZD5yHAty5wi5Azp2/MTBQ%2b9gB7x%2bkNDRdLeUDh15F/dP/OPf/cSFEAmSpIJ7huF5Xmq1EI8%2byUPxmmPg%2bo1br7z6s32v/Xr/679/YvvLj4w9t3nLHtCmx/aMbt27ZdsLW7a9uHns2bHHnto8%2buQzO364e%2b9Pn931o90v7N/%2b7Ct7X359156fPLPz1R27XwNt3/HK0zv3/eJXf0D9R/Efe3wvNsFWo1uf3/TY7pR27fnx0ztf3f%2bz34HRtCbIskrTLARQVL27ARfqdLvTM1mWEzXDIqSbqCylSh1JTZK1Wp2haLZaa9RpFkQ3OLrBgxqMgLlOc%2bkdqBAzXJnlJYaVBFHleJkXFFRevDs9O49tTasJFrO5Uma%2bWCjVEu5JzsFb1Spdq9FYgARBVlTNdb21CoA/qHYohF5SStKB8o7dZc24M5vLzJfmssVqnUN55yVVkDXMqD%2bCpPGiCsICQACvKLpVrNAgaDNXpOqMQLLRILKbgB0OSil2RsqazZZx3JIAvCBVqnVQvlC2bWCUFhLjV0bCPVnI9TqdTg9bp4QzUbT9IFQ1AzpTdRMLWdHAIAhFR1ENSdFgIlnVyRp1tNsL%2b4OeH9ylIOj6Pja37CZYbLBQrBaEIbaFMDgxzfhwGJrhwD1Vb8CRkhK27jQalcpUvlCBVrBx2/EANsDQIIotyxZFGUwjzkSR%2bANgciJtBzPWHll3MWOTB6smVIFT4Jy372TgOUBR4D4I%2bzgYkiwJwPEiRTOox0ikUN8aM%2bliEOsjiRFleCpVZzlBSqEVjI78AMDUbDqW1SJFHsZtoaB5rtsBtdvwUojRbbVRA71oJQFSPsC3btoQBtyBf7zFi4phWsSFksdgZOQf2AdswNRIRPCBNWMhiwiA6MzOF%2bfzpXyxAjGKZQoxFxP5TAjDJSIJAimWqLUBqbyouOGCy4GpIFzFZR2n43nwzwGp0%2bEA%2bIdhRQAewkTCB0wJG8KWXWL2aIk5yJ%2b2H6uIgbZpBJEEhyaZmBU0Hfpy8AvEEJHGpQPPgTBAi4BZqVJXHIOVBgTzQ7%2boFe4wd0Cz/GzJLlT0MqOytEEDjyX5Pk7qANdokFIgiDKcFi8uV/NXxAAEQDbMZIvZXLGGNkGU7VYbDoOgBPhOvTYlwJ6HUnA/wUJQttfr3OC/ODU//llmfLJ89qb%2bxU1%2barqamePnBjHxE5yI8EMQw9qoDED6sPL6wBz0hzSSZnpkfRghcfc2OAbIE3lOVxVZEgxd3QBYGER9qSXVFZqS6w2dkVxJQjtkqkpTBfgizfFMdmY2W6No6H4trr%2bCAFhxgszxkogcLypYIPGh2YETZqrWiXHqvTPMv0433j/Dvj%2bpvDehvL9m%2bucZSdA7OArZaACF9yPEAKE%2bsGuYhnihWAGihgMjiBdAxDBerwViVFOon%2bR1pHnNIIlft4BNaaF1/rYIunhHOndTOHmFuZyxr863rmaba6Er2ZbZ9hHn3d7d4pAuEK%2bpAEge5XINaMK2mxu0ADbieRnOIybqR8FHUscZSIyu68qioCmSqauWobZbVvruWikmTQAJngciZAnzQIBKlRJItdHWiENXcKEaxeQKFRDiiRQEmkUY4P%2bARpygAEFoBuqAo5stdNLoXJCj1kJovUniXVUAnFgs1dDQGIYJBLAxC8SirAK40ASQcbppIfnAAlFSYnAHuA0lBj6WGme9iP9B7pcLMDM7DwjEsrymGRvoyBYsgGoPxaMaQOWANwiGXtLg1Rl%2bNluqUKym26ZloyBYRIbBil32fQR1MpyEOt1PHPJhAqCfRE%2bMngY4NNx4DCQKBoiA50DNoLbrwQKG2RQkFSJpGgHDEA%2bYL/38mHxxjFJhHnYGAaJRtLoLzedK5UodNt9AN3e3kMFPsFFSBExSdxOkCQGQT5EfNN0ARkecgWAjVdUlGV2xrigaEBiw1%2bL3nIVN4zSA44VjUgT6MAEKpSoQAC6JtKk94zWN9PW7FoAawJbddADjwDcwaX8RYS4T%2bh5GlzSxvP0PyBeJwRIyX8UCBJP6gWnaAC8wL4xPgHDL6Xb9xbNWoyhKLGCaxAIMJ%2bZLVZaTUJIhBmKaqARQ3mqixNQolgAVVkw7rwaBd2i7RAR32pelxRtMgBeYzkw%2bUekG0QNSO9jtPUDpdziwjNYvkyvBBYC7UgC3rqaefJkL%2b8kHnUFENNdf0Byxu%2b9DPfAZmEkljYuGWkNg4yKhSrie57huguPvH8mXIGwSkM0f%2bE6TCoAUi/IP9a0rgd4vwNf1QQWzrNsXprLTBdpNus34/yHAUiyuq0x%2b5Ug9%2bMts7Y9vf/Cn4x8yor46eF5FgP8BIltioXK4wugAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"2463\" alt=\"Figure 1. Extending Galaxy’s reference data with refgenie\" data-srcset=\"/assets/static/galaxy-refgenie-figure-1.82a2fbd.7455d96fd0908ba8898be69b37d3a486.png 480w, /assets/static/galaxy-refgenie-figure-1.cbab2cf.7455d96fd0908ba8898be69b37d3a486.png 1024w, /assets/static/galaxy-refgenie-figure-1.2665e34.7455d96fd0908ba8898be69b37d3a486.png 1920w, /assets/static/galaxy-refgenie-figure-1.b593540.7455d96fd0908ba8898be69b37d3a486.png 2463w\" data-sizes=\"(max-width: 2463px) 100vw, 2463px\" data-src=\"/assets/static/galaxy-refgenie-figure-1.b593540.7455d96fd0908ba8898be69b37d3a486.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/galaxy-refgenie-figure-1.b593540.7455d96fd0908ba8898be69b37d3a486.png\" width=\"2463\" alt=\"Figure 1. Extending Galaxy’s reference data with refgenie\"></noscript>\n<strong>Figure 1. Extending Galaxy’s reference data with refgenie.</strong> (A) Setting the value of ‘refgenie_config_file’ to the previously chosen genome configuration file path within the primary Galaxy configuration file (e.g. ‘galaxy.yml’). (B) Example data table mapping between refgenie assets and Galaxy data tables for the BWA tool. Cheetah templating language is used to specify mappings between values, with several pre-populated refgenie variables available as shown. (C) refgenie assets are available for users to select and use in the Galaxy BWA tool. In this example, the user is mapping a set of paired-end sequencing reads against the hg38 genome. (D) A dynamically generated list of available remote refgenie assets are listed for an administrator to select in the ‘refgenie pull’ Galaxy Data Manager tool.</p>\n<h2 id=\"table-s1-comparison-of-galaxy-refgenie-and-refgeniegalaxy-features\"><a href=\"#table-s1-comparison-of-galaxy-refgenie-and-refgeniegalaxy-features\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Table S1. Comparison of Galaxy, refgenie, and refgenie+Galaxy features</h2>\n<p>|refgenie | Galaxy | refgenie+Galaxy</p>\n<ul>\n<li>|-------- | ------ | ---------------\nfeatures that refgenie has, but Galaxy does not have | X |   | X\nfeatures that Galaxy has, but refgenie does not have |   | X | X\n<strong>Table S1. Comparison of Galaxy, refgenie, and refgenie+Galaxy features.</strong> As indicated, refgenie+Galaxy contains the union of features of Galaxy and refgenie.</li>\n</ul>\n</div>\n"}},"context":{}}