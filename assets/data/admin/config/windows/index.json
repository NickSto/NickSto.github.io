{"hash":"ef8aba8bb8a02457efb168ecda8caf9311205534","data":{"article":{"id":"e52bfee914e6a1a08f55f1ef498799ce","title":"","tease":"","category":null,"date":null,"days":null,"contact":"","contact_url":"","authors":"","location":"","location_url":"","source_blog":"","source_blog_url":"","skip_title_render":null,"redirect":"","links":[],"image":"","images":{},"external_url":"","content":"<div class=\"toc-wrapper col-md-3\">\n<ul>\n<li>\n<p><a href=\"#running-galaxy-on-windows\">Running Galaxy on Windows</a></p>\n<ul>\n<li><a href=\"#setting-up-your-windows-environment\">Setting up your Windows environment</a></li>\n<li><a href=\"#installing-and-running-galaxy\">Installing and running Galaxy.</a></li>\n<li>\n<p><a href=\"#setting-up-an-ide-on-windows-accessing-linux-files\">Setting up an IDE on Windows accessing Linux files</a></p>\n<ul>\n<li><a href=\"#running-old-galaxy-pre-1601-on-windows\">Running old Galaxy (pre 16.01) on Windows</a></li>\n<li>\n<p><a href=\"#building-eggs\">Building Eggs</a></p>\n<ul>\n<li><a href=\"#an-example-of-building-the-bx-python-egg-in-mingwmsys\">An example of building the bx-python egg in MinGW/MSYS:</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n<div class=\"body-wrapper col-md-9\">\n<h1 id=\"running-galaxy-on-windows\"><a href=\"#running-galaxy-on-windows\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Running Galaxy on Windows</h1>\n<div class=\"well well-sm\">\n<p><strong>Note:</strong> <em>It is again possible to run Galaxy on Windows.  You'll need the <a href=\"https://msdn.microsoft.com/commandline/wsl/about\" target=\"_blank\" rel=\"noopener noreferrer\">Windows Subsystem for Linux</a> on 64-bit Windows 10.  With this shell, you can install and run a Galaxy server on the localhost by using all the command on the Linux/Mac OS tutorial. Watch this space for more information as we explore this option further.  Many thanks to <a href=\"https://github.com/ArnaudBelcour\" target=\"_blank\" rel=\"noopener noreferrer\">Arnaud Belcour</a> for pointing this out.</em></p>\n</div>\n<p>Running Galaxy on Windows requires the use of <a href=\"https://msdn.microsoft.com/commandline/wsl/about\" target=\"_blank\" rel=\"noopener noreferrer\">Windows Subsystem for Linux</a> on 64-bit Windows 10 or running Linux on a Virtual Machine. You can find a tutorial on using Virtual Machines to run Galaxy at <a href=\"https://getgalaxy.org\" target=\"_blank\" rel=\"noopener noreferrer\">https://getgalaxy.org</a> while the below instructions describe running Galaxy on Windows subsystem for Linux.</p>\n<p>There is also a Virtual machine for tools development which comes pre-installed with Galaxy, Planemo and other useful tools: <a href=\"http://planemo.readthedocs.org/en/latest/appliance.html#launching-the-appliance-virtualbox-ova\" target=\"_blank\" rel=\"noopener noreferrer\">http://planemo.readthedocs.org/en/latest/appliance.html#launching-the-appliance-virtualbox-ova</a>. The virtual machine is updated once per year and is suitable for tools development while the below process is more suited for running a local production server or develop the source code for Galaxy.</p>\n<p>To run Galaxy using the <a href=\"https://msdn.microsoft.com/commandline/wsl/about\" target=\"_blank\" rel=\"noopener noreferrer\">Windows Subsystem for Linux</a> you need to set up your Windows environment, install Galaxy in your Linux distribution, and for development you can either use a text editor such as EMACS or use a remote development plugin for an IDE as the Linux distributions on Windows does not support graphical user interfaces. Below we describe how to use Microsoft Visual Studio on Windows as your IDE.</p>\n<h2 id=\"setting-up-your-windows-environment\"><a href=\"#setting-up-your-windows-environment\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setting up your Windows environment</h2>\n<ol>\n<li>Enable Linux Subsystem for Windows.</li>\n<li>Install your preferred Linux Distribution.</li>\n</ol>\n<p><strong>Step 1</strong>\nBefore installing any Linux distros for WSL, you must ensure that the \"Windows Subsystem for Linux\" optional feature is enabled. Open Windows PowerShell and run:</p>\n<pre><code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux\n</code></pre>\n<p>(Hitting the windows button on your keyboard and writing PowerShell in the menu is the quickest way to open it).</p>\n<p><strong>Step 2</strong>\nOpen the Microsoft store and select your desired Linux distribution. <em>This instruction was tested on Ubuntu 18.04 LTS but any distribution known to work with Galaxy should work.</em></p>\n<h2 id=\"installing-and-running-galaxy\"><a href=\"#installing-and-running-galaxy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Installing and running Galaxy.</h2>\n<ol>\n<li>Start your Linux application</li>\n<li>Install git and clone the Galaxy repository from GitHub.</li>\n<li>Start Galaxy for production or development.</li>\n</ol>\n<p><strong>Step 1</strong>\nOpen your Linux distribution from Windows (press windows key and write the name of your installed distribution). This will open a Terminal window which allows you to manage your Linux distribution exactly like on a computer with a Linux operating system installed. The files are stored on your computer and can even be accessed through Windows. Changing Linux files directly from Windows is however something you really <em>should not do</em> due to issues with metadata and corruption.</p>\n<p><strong>Step 2</strong>\nInstall git, if using Ubuntu:</p>\n<pre><code>sudo apt install git.\n</code></pre>\n<p>Clone the Galaxy GitHub repository to a folder of your choice.</p>\n<pre><code>git clone https://github.com/galaxyproject/galaxy.git\n</code></pre>\n<p><strong>Step 3</strong>\nThe Client build system is described in the Galaxy repository <a href=\"https://github.com/galaxyproject/galaxy/blob/dev/client/README.md\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.</p>\n<p>For development purposes the following three commands gives you a Galaxy server which runs and is automatically updated when you make any changes to the galaxy client source files.</p>\n<pre><code>GALAXY_CLIENT_SKIP_BUILD=1 sh run.sh\nsource .venv/bin/activate\nmake client-watch\n</code></pre>\n<p>The first row runs the shell script without building the client, the 2nd row activates the virtual environment and makes the base dependencies accessible and the third row builds the client with the automatic rebuilding activated.</p>\n<p>Just running <code>sh run.sh</code> instead builds a client suitable for local development.</p>\n<p><strong>NOTE</strong>\nDuring the installation of Galaxy we ran into issues with Yarn throwing a \"Error: ENOENT: no such file or directory,\". The cause of this error remains unclear according to <a href=\"https://github.com/yarnpkg/yarn/issues/5275\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub issues</a>. During our first test, installing Yarn in Windows allowed us to install Galaxy successfully in the Ubuntu subsystem (downloadable from the <a href=\"https://yarnpkg.com/lang/en/docs/install/#windows-stable\" target=\"_blank\" rel=\"noopener noreferrer\">Yarn website</a>). It does however seem that this is a random error with different packages failing to install each time, running the <code>GALAXY_CLIENT_SKIP_BUILD=1 sh run.s</code> step again when failing will after a few runs mean that all packages have been installed and the Galaxy server will launch successfully.</p>\n<h2 id=\"setting-up-an-ide-on-windows-accessing-linux-files\"><a href=\"#setting-up-an-ide-on-windows-accessing-linux-files\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setting up an IDE on Windows accessing Linux files</h2>\n<p>All files in the Linux subsystem are accessible on the Windows file system but directly altering them <em>will most likely cause a mess</em>. If you wish to use an IDE such as Microsoft Visual Studio it is therefore necessary to use an extension to connect to the files. The guide for doing it with Microsoft Visual Studio is excellent and can be read in full <a href=\"https://code.visualstudio.com/docs/remote/wsl\" target=\"_blank\" rel=\"noopener noreferrer\">here</a> but summarised below.</p>\n<p>*First install Microsoft Visual studio in Windows.\n*Then install the <a href=\"https://aka.ms/vscode-remote/download/extension\" target=\"_blank\" rel=\"noopener noreferrer\">Remote Development Extension pack</a></p>\n<p>Finally enter the linux environment and write <code>code</code>in the terminal which will launch Visual Student configured to access the files in your Linux file system.</p>\n<h3 id=\"running-old-galaxy-pre-1601-on-windows\"><a href=\"#running-old-galaxy-pre-1601-on-windows\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Running old Galaxy (pre 16.01) on Windows</h3>\n<p><em>These instructions allow you to recreate old Galaxy set ups and should not be used for new projects.</em></p>\n<p>The effort required involves building architecture specific “eggs” (think of these as python’s version of Java’s jar files). Eggs are created using the setuptools package, <a href=\"http://peak.telecommunity.com/DevCenter/setuptools\" target=\"_blank\" rel=\"noopener noreferrer\">http://peak.telecommunity.com/DevCenter/setuptools</a>. Galaxy has been run in Windows using both MinGW/MSYS ( <a href=\"http://www.mingw.org/\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.mingw.org/</a>) and CYGWIN ( <a href=\"http://www.cygwin.com/\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.cygwin.com/</a>).</p>\n<p>Please note, a simple alternative to attempting to build eggs for Windows is to simply run Linux via virtualization software (such as the free <a href=\"http://www.virtualbox.org/\" target=\"_blank\" rel=\"noopener noreferrer\">VirtualBox</a>). For best results, use a lightweight Linux such as <a href=\"http://www.xubuntu.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Xubuntu</a>, or disable X-Windows.</p>\n<p>If you choose to continue, to understand Eggs and how they work in Galaxy, read the <a href=\"/Admin%2FConfig%2FEggs\">Eggs</a> page.</p>\n<h3 id=\"building-eggs\"><a href=\"#building-eggs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Building Eggs</h3>\n<p>Most eggs are platform-agnostic (e.g. Pure Python), and thus you can use the pre-built versions of these (from <a href=\"http://eggs.g2.bx.psu.edu\" target=\"_blank\" rel=\"noopener noreferrer\">http://eggs.g2.bx.psu.edu</a>). Of the remaining eggs, not all are required by the default configuration. You'll need at a minimum:</p>\n<ul>\n<li>bx-python</li>\n<li>Cheetah</li>\n<li>pycrypto</li>\n<li>pysqlite</li>\n<li>numpy</li>\n</ul>\n<p>You'll need to get and build the versions specified in <code>galaxy_dist/eggs.ini</code>, so consult that file for proper versions and download URLs. The remaining eggs are required for a number of tools, as well as for some development/debugging purposes.</p>\n<p>Galaxy's egg building script, <code>scramble.py</code> may or may not work for certain eggs under Windows. If not, scramble's build scripts, located at <code>galaxy_dist/scripts/scramble/scripts/</code> can be used as reference for building eggs.</p>\n<h4 id=\"an-example-of-building-the-bx-python-egg-in-mingwmsys\"><a href=\"#an-example-of-building-the-bx-python-egg-in-mingwmsys\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>An example of building the bx-python egg in MinGW/MSYS:</h4>\n<p>First obtain the source code:</p>\n<pre><code class=\"language-console\">$ hg clone http://bitbucket.org/james_taylor/bx-python/\ndestination directory: bx-python\nrequesting all changes\nadding changesets\nadding manifests\nadding file changes\nadded 482 changesets with 1441 changes to 444 files\nupdating working directory\n272 files updated, 0 files merged, 0 files removed, 0 files unresolved\n</code></pre>\n<p>Change to the source directory:</p>\n<pre><code class=\"language-console\">$ cd bx-python/trunk\n</code></pre>\n<p>Edit setup.cfg and add the following:</p>\n<pre><code class=\"language-ini\">[build]\ncompiler = mingw32\n</code></pre>\n<p>Then build the egg (be sure to include the tag from the <code>[tags]</code> section of <code>galaxy_dist/eggs.ini</code>:</p>\n<pre><code class=\"language-console\">$ python setup.py egg_info -b _dev_r4bf1f32e6b76 bdist_egg\n</code></pre>\n<p>Once built, eggs need to be placed in <code>$GALAXY_ROOT/eggs/&#x26;lt;platform&#x26;gt;</code>, where <platform> is the platform-specific output of <code>$GALAXY_ROOT/scripts/get_platforms.py</code>:</p>\n<pre><code class=\"language-console\">$ cp dist/bx_python-0.5.0_r4bf1f32e6b76-py2.4-win32.egg galaxy_dist/eggs/&#x3C;platform>\n</code></pre>\n<p>Once all the required eggs have been built and copied to the proper egg directory, Galaxy can now be run as normal, see <a href=\"/Admin%2FGetGalaxy\">Admin/GetGalaxy</a> to continue.</p>\n</div>\n"}},"context":{}}