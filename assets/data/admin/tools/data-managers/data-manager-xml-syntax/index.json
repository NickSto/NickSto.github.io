{"hash":"8532f9dede357a757ee182f7a5f5306dccf4d8d2","data":{"article":{"id":"9336916503a2788a355b5649c42c53cc","title":"Galaxy Data Manager XML File","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<p>The XML File for a Galaxy Data Manager, generally referred to as the \"data manager config file\", serves a number of purposes.  It defines the availability of Data Managers to a Galaxy instance. It does this by specifying the id of the Data Manager and the Data Manager tool that is associated with it. It also contains a listing of the Tool Data Tables that can be added to by the Data Manager. It also specifies how to manipulate the raw column values provided by the Data Manager Tool and under what directory structure to place the finalized data values.</p>\n<p>Pay attention to the following when creating a new Data Manager:</p>\n<ol>\n<li><strong>Make sure your XML is valid</strong> - Improper XML will most likely cause Galaxy to not load your Data Managers. The easiest way to validate your XML is just to open the XML file itself in e.g. <a href=\"http://www.mozilla.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Firefox</a>, which will either parse the file and display it, or show the error and its location in large letters.</li>\n<li><strong>Don't forget to restart Galaxy</strong> - Galaxy loads and parses XML at run-time, which means you'll have to restart it after updating any XML files. The same does not apply if you only update an executable.</li>\n<li><strong>Make sure you use an id that is unique within your Galaxy instance</strong> - Galaxy can only load one Data Manager having an the same ID at a single time.</li>\n<li><strong>When completed, make your Data Manager available in a ToolShed and install it from there</strong> - This will avoid any possible collisions due to non-unique IDs, as specialized name-spacing is utilized when Data Managers are installed from a ToolShed.</li>\n</ol>\n<p>A Galaxy Data Manager's config file consists of a subset of the following XML tag sets - each of these is described in detail in the following sections.</p>\n<h2 id=\"details-of-xml-tag-sets\"><a href=\"#details-of-xml-tag-sets\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Details of XML tag sets</h2>\n<hr>\n<h3 id=\"data_managers-tag-set\"><a href=\"#data_managers-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;data_managers></code> tag set</h3>\n<p>The outer-most tag set. It contains no attributes. Any number of <code>&#x3C;data_manager></code> tags can be included within it.</p>\n<hr>\n<h3 id=\"data_manager-tag-set\"><a href=\"#data_manager-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;data_manager></code> tag set</h3>\n<p>This tag defines a particular Data Manager. Any number of <code>&#x3C;data_table></code> tags can be included within it.</p>\n<table>\n<thead>\n<tr>\n<th>attribute</th>\n<th>values</th>\n<th>details</th>\n<th>required</th>\n<th>example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>tool_file</td>\n<td>a string *</td>\n<td>This is the filename of the Data Manager Tool's XML file, relative to the Galaxy Root. Multiple Data Managers can use the same Tool, but doing so would require \"id\" to be declared.</td>\n<td>yes</td>\n<td><code>tool_file=\"data_manager/twobit_builder.xml\"</code></td>\n</tr>\n<tr>\n<td>id</td>\n<td>a string *</td>\n<td>Must be unique across all Data Managers; should be lowercase and contain only letters, numbers, and underscores.  While technically optional, it is a best-practice to specify this value. When not specified, it will use the id of the underlying Data Manager Tool.</td>\n<td>no</td>\n<td><code>id=\"twobit_builder\"</code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"example\"><a href=\"#example\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>The following is an example that contains all of the attributes described above.</p>\n<pre><code class=\"language-xml\" id=\"twobit_builder\">&#x3C;data_manager tool_file=\"data_manager/twobit_builder.xml\" id=\"twobit_builder\">\n</code></pre>\n<br />\n<hr>\n<h3 id=\"data_table-tag-set\"><a href=\"#data_table-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;data_table></code> tag set</h3>\n<p>This tag defines a Tool Data Table to add entries to. Any number of <code>&#x3C;data_table></code> tags can be used. Each <code>&#x3C;data_table></code> tag will contain an <code>&#x3C;output></code> tagset.</p>\n<table>\n<thead>\n<tr>\n<th>attribute</th>\n<th>values</th>\n<th>details</th>\n<th>required</th>\n<th>example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>a string *</td>\n<td>This is the name of the Tool Data Table.</td>\n<td>yes</td>\n<td><code>name=\"twobit\"</code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"example-1\"><a href=\"#example-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>The following is an example that contains all of the attributes described above.</p>\n<pre><code class=\"language-xml\">&#x3C;data_table name=\"twobit\">\n</code></pre>\n<br />\n<hr>\n<h3 id=\"output-tag-set\"><a href=\"#output-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;output></code> tag set</h3>\n<p>This tag defines how to handle the output of the Data Manager Tool. It has no attributes, but contains one or more <code>&#x3C;column></code> tag sets.</p>\n<h4 id=\"example-2\"><a href=\"#example-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>The following is an example that contains all of the attributes described above.</p>\n<pre><code class=\"language-xml\">&#x3C;output>\n</code></pre>\n<br />\n<hr>\n<h3 id=\"column-tag-set\"><a href=\"#column-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;column></code> tag set</h3>\n<p>This tag defines a particular Tool Data Table column that will be set. Any number of <code>&#x3C;column></code> tags can be used. Each <code>&#x3C;column></code> tag may contain <code>&#x3C;move></code> and / or <code>&#x3C;value_translation></code> tagsets, which are optional.</p>\n<table>\n<thead>\n<tr>\n<th>attribute</th>\n<th>values</th>\n<th>details</th>\n<th>required</th>\n<th>example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>a string *</td>\n<td>This is the name of Tool Data Table column.</td>\n<td>yes</td>\n<td><code>name=\"value\"</code></td>\n</tr>\n<tr>\n<td>output_ref</td>\n<td>a string *</td>\n<td>Name of the Data Manager Tool's output file to use for additional processing within e.. a <move> tag.</td>\n<td>no</td>\n<td><code>output_ref=\"out_file\"</code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"example-3\"><a href=\"#example-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>The following is an example that contains all of the attributes described above.</p>\n<pre><code class=\"language-xml\">&#x3C;column name=\"path\" output_ref=\"out_file\" >\n</code></pre>\n<br />\n<hr>\n<h3 id=\"move-tag-set\"><a href=\"#move-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;move></code> tag set</h3>\n<p>This tag defines how to handle moving files from within the Data Manager Tool output's extra_files_path into the final storage location used for the Tool Data Table entry. Individual files or the entire directory contents can be moved. Move tag sets contain a <code>&#x3C;source></code> and a <code>&#x3C;target></code> tag set.</p>\n<table>\n<thead>\n<tr>\n<th>attribute</th>\n<th>values</th>\n<th>details</th>\n<th>required</th>\n<th>example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>type</td>\n<td>a string *</td>\n<td>This can be either 'file' or 'directory'. Default is 'directory'.</td>\n<td>no</td>\n<td><code>&#x3C;move type=\"file\"></code></td>\n</tr>\n<tr>\n<td>relativize_symlinks</td>\n<td>True or False</td>\n<td>Whether or not to relativize created existing symlinks in moved target. Default is False.</td>\n<td>no</td>\n<td><code>relativize_symlinks=\"True\"</code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"example-4\"><a href=\"#example-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>The following is an example that contains all of the attributes described above.</p>\n<pre><code class=\"language-xml\">&#x3C;move type=\"file\" relativize_symlinks=\"False\">\n</code></pre>\n<br />\n<hr>\n<h3 id=\"source-tag-set\"><a href=\"#source-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;source></code> tag set</h3>\n<p>This tag defines the source location within a <code>&#x3C;move></code> tag set. When not specified, it defaults to the entire extra_files_path of the output reference dataset. Both the <code>base</code> attribute and the text of the <code>&#x3C;source></code> tag are treated as <a href=\"https://pythonhosted.org/Cheetah/\" target=\"_blank\" rel=\"noopener noreferrer\">Cheetah</a> templates, with the columns names specified in the <code>&#x3C;column></code> tagsets available as variables (with values taken from the corresponding data table entries. The strings produced for the <code>base</code> attribute and the tag text\nshould resolve to a single line.</p>\n<table>\n<thead>\n<tr>\n<th>attribute</th>\n<th>values</th>\n<th>details</th>\n<th>required</th>\n<th>example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>base</td>\n<td>a string Template</td>\n<td>The base/root path to use for the source. When not provided, it defaults to the extra_files_path of the output dataset.</td>\n<td>no</td>\n<td><code>&#x3C;move type=\"file\"></code></td>\n</tr>\n<tr>\n<td>TEXT</td>\n<td>a string Template</td>\n<td>This defines the value of the source, relative to the <em>base</em></td>\n<td>no</td>\n<td><code>&#x3C;source>${path}&#x3C;/source></code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"example-5\"><a href=\"#example-5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>The following is an example that contains the most common usage, where the value provided by the Data Manager Tool, relative to the extra_files_path, is used as the source.</p>\n<pre><code class=\"language-xml\">&#x3C;source>${path}&#x3C;/source>\n</code></pre>\n<br />\n<hr>\n<h3 id=\"target-tag-set\"><a href=\"#target-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;target></code> tag set</h3>\n<p>This tag defines the target location within a <code>&#x3C;move></code> tag set. When not specified, it defaults to the <em>galaxy_data_manager_data_path</em> configuration value. The values of the <code>base</code> and the tag text are treated as\ntemplates as with the <code>&#x3C;source></code> tag. In addition the variables from the <code>&#x3C;column></code> tagset the value of <code>galaxy_data_manager_data_path</code> configuration value is available using the <code>${GALAXY_DATA_MANAGER_DATA_PATH}</code>\nvariable.</p>\n<table>\n<thead>\n<tr>\n<th>attribute</th>\n<th>values</th>\n<th>details</th>\n<th>required</th>\n<th>example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>base</td>\n<td>a string Template</td>\n<td>The base/root path to use for the target. When not specified, it defaults to the <em>galaxy_data_manager_data_path</em> configuration value.</td>\n<td>no</td>\n<td><code>&#x3C;move type=\"file\"></code></td>\n</tr>\n<tr>\n<td>TEXT</td>\n<td>a string Template</td>\n<td>This defines the value of the target (destination), relative to the <em>base</em></td>\n<td>no</td>\n<td><code>&#x3C;target base=\"${GALAXY_DATA_MANAGER_DATA_PATH}\">${dbkey}/seq/${path}&#x3C;/target></code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"example-6\"><a href=\"#example-6\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>The following is an example that contains a common usage, where a target value is constructed using several of the values provided by the Data Manager Tool, relative to the <em>galaxy_data_manager_data_path</em>, is used as the source.</p>\n<pre><code class=\"language-xml\">&#x3C;target base=\"${GALAXY_DATA_MANAGER_DATA_PATH}\">${dbkey}/seq/${path}&#x3C;/target>\n</code></pre>\n<br />\n<hr>\n<h3 id=\"value_translation-tag-set\"><a href=\"#value_translation-tag-set\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>&#x3C;value_translation></code> tag set</h3>\n<p>This tag allows using templating to modify the value provided by the Data Manager Tool into the actual value that should be stored within the Tool Data Table. There can be any number of value translations provided for an output. The value translations are performed in the order presented in the XML. It is important to note that a move will occur before the value translations are performed.</p>\n<table>\n<thead>\n<tr>\n<th>attribute</th>\n<th>values</th>\n<th>details</th>\n<th>required</th>\n<th>example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>type</td>\n<td>a string</td>\n<td>The type of value translation to perform. Currently \"template\" and \"function\" are supported.</td>\n<td>no</td>\n<td><code>type=\"template\"</code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"example-7\"><a href=\"#example-7\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h4>\n<p>The following is an example that contains a common usage, where a value is constructed using several of the values provided by the Data Manager Tool and that value is then turned into an absolute path. If <code>&#x3C;value_translation></code> is a string (not a function)\nit is treated as a template, much like <code>&#x3C;source></code> and <code>&#x3C;target></code>, and must return a single line string.</p>\n<pre><code class=\"language-xml\">&#x3C;value_translation>${GALAXY_DATA_MANAGER_DATA_PATH}/${value}/seq/${path}&#x3C;/value_translation>\n&#x3C;value_translation type=\"function\">abspath&#x3C;/value_translation>\n</code></pre>\n<br />\n<hr>\n<h1 id=\"bringing-it-all-together-an-example\"><a href=\"#bringing-it-all-together-an-example\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bringing it all Together, an example</h1>\n<p>Assume that we have a Data Manager Tool that provides the following named values:</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>sacCer2</td>\n</tr>\n<tr>\n<td>path</td>\n<td>sacCer2.2bit</td>\n</tr>\n</tbody>\n</table>\n<p>and creates an output named \"out_file\", with an extra_files_path containing a file 'sacCer2.2bit'. (The primary dataset file contains <a href=\"/admin/tools/data-managers/data-manager-json-syntax/\">JSON</a> that provides the above values)</p>\n<p>and has a Data Manager configuration defined as:</p>\n<pre><code class=\"language-xml\" id=\"twobit_builder\">&#x3C;data_managers>\n    &#x3C;data_manager tool_file=\"data_manager/twobit_builder.xml\" id=\"twobit_builder\">\n        &#x3C;data_table name=\"twobit\">\n            &#x3C;output>\n                &#x3C;column name=\"value\" />\n                &#x3C;column name=\"path\" output_ref=\"out_file\" >\n                    &#x3C;move type=\"file\">\n                        &#x3C;source>${path}&#x3C;/source>\n                        &#x3C;target base=\"${GALAXY_DATA_MANAGER_DATA_PATH}\">${value}/seq/${path}&#x3C;/target>\n                    &#x3C;/move>\n                    &#x3C;value_translation>${GALAXY_DATA_MANAGER_DATA_PATH}/${value}/seq/${path}&#x3C;/value_translation>\n                    &#x3C;value_translation type=\"function\">abspath&#x3C;/value_translation>\n                &#x3C;/column>\n            &#x3C;/output>\n        &#x3C;/data_table>\n    &#x3C;/data_manager>\n&#x3C;data_managers>\n</code></pre>\n<p>The result is:</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>sacCer2</td>\n</tr>\n<tr>\n<td>path</td>\n<td>${ABSOLUTE_PATH_OF_CONFIGURED_GALAXY_DATA_MANAGER_DATA_PATH}/sacCer2/seq/sacCer2.2bit</td>\n</tr>\n</tbody>\n</table>\n<p>and the \"sacCer2.2bit\" file has been moved into the location specified by path.</p>\n<hr>\n<p><a href=\"/admin/tools/data-managers/\">Admin/Tools/DataManagers</a></p>\n"}},"context":{}}