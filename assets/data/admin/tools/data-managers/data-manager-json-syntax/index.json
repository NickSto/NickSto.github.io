{"hash":"6a87f55bb3e5a997903b2c87cff72c00cc3c86c4","data":{"article":{"id":"95f9756498d501c89abd552e40e2185c","title":"Data Manager JSON Syntax","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<p>Data Manager Tools are required to use JSON to communicate the new Tool Data Table values back to the Data Manager. JSON can also optionally be used to provide the input parameter values to the Data Manager Tool, but this is not required.</p>\n<h1 id=\"returning-values-to-the-data-manager\"><a href=\"#returning-values-to-the-data-manager\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Returning Values to the Data Manager</h1>\n<p>A Data Manager Tool must provide the new values for the Tool Data Table Entries via a JSON dictionary.</p>\n<ol>\n<li>A single dictionary, with the key <em>data_tables</em> is required to be present within the root JSON dictionary.</li>\n<li>The <em>data_tables</em> dictionary is keyed by the <strong>name</strong> of the Tool Data Table receiving new entries. Any number of named tables can be specified.</li>\n<li>The value for the named Tool Data Table is a list of dictionaries.</li>\n<li>Each of these dictionaries contains the values that will be provided to the Data Manager and modified as per the configuration defined within the <a href=\"/admin/tools/data-managers/data-manager-xml-syntax/\">Data Manager XML Syntax</a></li>\n</ol>\n<h2 id=\"example-json-output-from-data-manager-tool-to-galaxy\"><a href=\"#example-json-output-from-data-manager-tool-to-galaxy\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example JSON Output from Data Manager Tool to Galaxy</h2>\n<p>Here, the <em>all_fasta</em> table is having a single entry added to it</p>\n<pre><code class=\"language-javascript\">{\n   \"data_tables\":{\n      \"all_fasta\":[\n         {\n            \"path\":\"sacCer2.fa\",\n            \"dbkey\":\"sacCer2\",\n            \"name\":\"S. cerevisiae June 2008 (SGD/sacCer2) (sacCer2)\",\n            \"value\":\"sacCer2\"\n         }\n      ]\n   }\n}\n</code></pre>\n<p>This creates a new entry in the Tool Data Table:</p>\n<pre><code class=\"language-text\">#&#x3C;unique_build_id>  &#x3C;dbkey>     &#x3C;display_name>  &#x3C;file_path>\nsacCer2 sacCer2 S. cerevisiae June 2008 (SGD/sacCer2) (sacCer2) /Users/dan/galaxy-central/tool-data/sacCer2/seq/sacCer2.fa\n</code></pre>\n<h1 id=\"returning-values-to-the-data-manager-1\"><a href=\"#returning-values-to-the-data-manager-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Returning Values to the Data Manager</h1>\n<p>Taking the input values of a Data Manager Tool and converting it into a usable set of command-line arguments and options can be quite complicated in many cases, especially when considering that the underlying Data Manager Tool Executable will likely take those options and convert them into a set of valued objects within the executable/script itself before performing its operations.</p>\n<p>To simplify this process, Data Manager Tools will automatically have their parameter values JSONified and provided as the content of the output dataset. This will allow the executable / script to simply read and parse the JSON data and have a complete collection of the Tool and Job parameters to use within the tool. Using this methodology is not required, however, and a Data Manager Tool developer is free to explicitly declare any number of the Tool parameters explicitly to the command-line.</p>\n<h2 id=\"example-json-input-to-tool\"><a href=\"#example-json-input-to-tool\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example JSON input to tool</h2>\n<pre><code class=\"language-javascript\">{\n   \"param_dict\":{\n      \"__datatypes_config__\":\"/Users/dan/galaxy-central/database/tmp/tmphyQRH3\",\n      \"__get_data_table_entry__\":\"&#x3C;function get_data_table_entry at 0x10d435b90>\",\n      \"userId\":\"1\",\n      \"userEmail\":\"dan@bx.psu.edu\",\n      \"dbkey\":\"sacCer2\",\n      \"sequence_desc\":\"\",\n      \"GALAXY_DATA_INDEX_DIR\":\"/Users/dan/galaxy-central/tool-data\",\n      \"__admin_users__\":\"dan@bx.psu.edu\",\n      \"__app__\":\"galaxy.app:UniverseApplication\",\n      \"__user_email__\":\"dan@bx.psu.edu\",\n      \"sequence_name\":\"\",\n      \"GALAXY_DATATYPES_CONF_FILE\":\"/Users/dan/galaxy-central/database/tmp/tmphyQRH3\",\n      \"__user_name__\":\"danb\",\n      \"sequence_id\":\"\",\n      \"reference_source\":{\n         \"reference_source_selector\":\"ncbi\",\n         \"requested_identifier\":\"sacCer2\",\n         \"__current_case__\":\"1\"\n      },\n      \"__new_file_path__\":\"/Users/dan/galaxy-central/database/tmp\",\n      \"__user_id__\":\"1\",\n      \"out_file\":\"/Users/dan/galaxy-central/database/files/000/dataset_200.dat\",\n      \"GALAXY_ROOT_DIR\":\"/Users/dan/galaxy-central\",\n      \"__tool_data_path__\":\"/Users/dan/galaxy-central/tool-data\",\n      \"__root_dir__\":\"/Users/dan/galaxy-central\",\n      \"chromInfo\":\"/Users/dan/galaxy-central/tool-data/shared/ucsc/chrom/sacCer2.len\"\n   },\n   \"output_data\":[\n      {\n         \"extra_files_path\":\"/Users/dan/galaxy-central/database/job_working_directory/000/202/dataset_200_files\",\n         \"file_name\":\"/Users/dan/galaxy-central/database/files/000/dataset_200.dat\",\n         \"ext\":\"data_manager_json\",\n         \"out_data_name\":\"out_file\",\n         \"hda_id\":201,\n         \"dataset_id\":200\n      }\n   ],\n   \"job_config\":{\n      \"GALAXY_ROOT_DIR\":\"/Users/dan/galaxy-central\",\n      \"GALAXY_DATATYPES_CONF_FILE\":\"/Users/dan/galaxy-central/database/tmp/tmphyQRH3\",\n      \"TOOL_PROVIDED_JOB_METADATA_FILE\":\"galaxy.json\"\n   }\n}\n</code></pre>\n"}},"context":{}}