{"hash":"8532f9dede357a757ee182f7a5f5306dccf4d8d2","data":{"article":{"id":"6e498035760f32160d18ae0cb177a93a","title":"Getting Started with Galaxy CloudMan","tease":"","skip_title_render":null,"image":"","images":{},"contact":"","inserts":[{"name":"/cloudman/header","content":"<div class='center'><img src=\"/images/galaxy-logos/cloudman-logo.jpg\" alt=\"CloudMan Logo\" width=\"50%\" /></div>\n<br />\n"},{"name":"/cloudman/aws/linkbox","content":"<p>↑ <a href=\"/CloudMan\">/CloudMan</a><br /></p>\n</div>\n"}],"date":null,"content":"\n<slot name=\"/cloudman/header\" />\n\nThis is an old and currently outdated guide only kept for historical reasons. Do not use the instructions on this page. Use the new getting started guide available here: https://wiki.galaxyproject.org/CloudMan/GettingStarted\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n<slot name=\"/cloudman/aws/linkbox\" />\n\nThis page provides a step-by-step instructions on how to start your own instance of Galaxy on [Amazon Web Services (AWS)](http://aws.amazon.com/) [Elastic Compute Cloud (EC2)](http://aws.amazon.com/ec2/). More general information and instructions about Galaxy CloudMan can be found [here](/cloudman/).\n\nScreencast\n----------\n\n[Here's a screencast](http://screencast.g2.bx.psu.edu/cloud/) that walks through the process of setting up your own Galaxy cloud cluster. Note, the screencast skips one step, detailed setting up of the Inbound TCP rules. See \"Inbound Rules\" below.\n\nStep 1: One Time Amazon Setup\n-----------------------------\n\n<div class='right'><div class='solid'>\n<table>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <strong>Step 1 Screenshots</strong> </td>\n  </tr>\n</table>\n\n<table>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSSetRegion.png\"><img src=\"./AWSSetRegion.png\" alt=\"Set region; click to enlarge\" width=\"200\" /></a><br />1.2. Set region </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSConsoleKeyPairs.png\"><img src=\"./AWSConsoleKeyPairs.png\" alt=\"Click on key pairs; click to enlarge\" width=\"200\" /></a><br />1.3. Click on key pairs </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSDefaultSecurityGroups.png\"><img src=\"./AWSDefaultSecurityGroups.png\" alt=\"Create security group; click to enlarge\" width=\"200\" /></a><br />1.5. Create security group </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSApplyRuleChanges.png\"><img src=\"./AWSApplyRuleChanges.png\" alt=\"Create security group; click to enlarge\" width=\"200\" /></a><br />1.7. Add inbound rules </td>\n  </tr>\n</table>\n\n</div></div>\n\n1. Because AWS services implement pay-as-you-go access model for compute resources, it is necessary for every user of the service to *[register with Amazon](http://aws.amazon.com/)*. <span class='red'>You will need a credit card to register.</span>  (You can apply for a [AWS Education Grant](http://aws.amazon.com/education) after you register).\n\n2. Once your account has been approved by Amazon (note that this may take up to one business day), *log into the [EC2 AWS Management Console](http://console.aws.amazon.com/ec2)* and set your AWS Region to *US East (Virginia)*. This is the only region Galaxy CloudMan is fully supported in at this time (see [screenshot 1.2](/cloudman/aws/getting-started/AWSSetRegion.png)).\n\n3. Click **Network & Security → Key Pairs** or **My Resources → *n* Key Pairs** (see [screenshot 1.3](/cloudman/aws/getting-started/AWSConsoleKeyPairs.png) - if it does not look like this, then try using the Chrome browser) and then click **Create Key Pair**.  Enter a memorable name for the key pair, e.g., `GalaxyCloud` and click **Create**.\n\n4. *Save your private key!* The previous step creates the key pair and downloads a copy to your machine with the name *`MemorableName`*`.pem`.  Save this file and protect it like you would your password. The key pair can be used to access started instances from the command line.\n\n5. *Create a Security Group* by clicking **Network & Security → Security Groups → Create Security Group** (see [screenshot 1.5](/cloudman/aws/getting-started/AWSDefaultSecurityGroups.png)). Specify a name (e.g., `GalaxyGroup`) and provide a brief description.  **VPC** should be **No VPC**.  Click the **Yes, Create** button.  The new group now appears in the list and details about the group are listed at the bottom of the page.\n\n6. *Add Inbound Rules* to the new group by clicking the **Inbound** tab.  For each new rule you will need to select the protocol (the rule type) from the **Create a new rule:** pulldown, fill in the fields for that rule, and then click **Add Rule**. Define these rules:\n\n7. Protocol: HTTP<br />Source: `0.0.0.0/0` <div class='indent'>Unless you want to restrict access based on [the source IP](http://en.wikipedia.org/wiki/CIDR_notation)</div>\n\n8. Protocol: SSH<br />Source: `0.0.0.0/0`\n\n9. Protocol: Custom TCP rule<br />Port range: `42284`<br />Source: `0.0.0.0/0`<div class='indent'>This rule opens a port on the remote instance allowing access to the cloud controller web interface.</div>\n\n10. Protocol: Custom TCP rule<br />Port range: `20-21`<br />Source: `0.0.0.0/0`<div class='indent'>This rule opens ports required for FTP file transfer.</div>\n\n11. Protocol: Custom TCP rule<br />Port range: `30000-30100`<br />Source: `0.0.0.0/0`<div class='indent'>This rule opens ports required for passive FTP file transfer.</div>\n\n12. Protocol: All TCP<br />Source: *name of group, e.g. `GalaxyGroup`*<div class='indent'>The Source will automatically change to the security group ID. This action will enable multiple instances in the same security group to communicate with each other on Amazon EC2's internal network.</div>\n\n13. Click **Apply Rule Changes**.  The window should look like the [screenshot 1.7](/cloudman/aws/getting-started/AWSApplyRuleChanges.png).\n\nAll of these inbound rules are necessary for proper functioning of CloudMan and Galaxy.\n\nStep 2: Starting a Master Instance\n----------------------------------\n\n<div class='right'><div class='solid'>\n<table>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <strong>Step 2 Screenshots</strong> </td>\n  </tr>\n</table>\n\n<table>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSAMISearch.png\"><img src=\"./AWSAMISearch.png\" alt=\"Find & Select AMI; click to enlarge\" width=\"200\" /></a><br />2.3. Find & Select AMI </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSRequestInstanceDetails.png\"><img src=\"./AWSRequestInstanceDetails.png\" alt=\"Set instance details; click to enlarge\" width=\"200\" /></a><br />2.4. Instance details </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSUserData.png\"><img src=\"./AWSUserData.png\" alt=\"set user data; click to enlarge\" width=\"200\" /></a><br />2.5. Set User Data. </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSCredentialsLink.png\"><img src=\"./AWSCredentialsLink.png\" alt=\"Get to credentials; click to enlarge\" width=\"200\" /></a><br />2.5.3. Get to credentials. </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSCredentials.png\"><img src=\"./AWSCredentials.png\" alt=\"Credentials; click to enlarge\" width=\"200\" /></a><br />2.5.4. Credentials. </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSPreLaunchReview.png\"><img src=\"./AWSPreLaunchReview.png\" alt=\"Review & launch; click to enlarge\" width=\"200\" /></a><br />2.9. Review & Launch! </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/AWSInstanceList.png\"><img src=\"./AWSInstanceList.png\" alt=\"AWS EC2 instances list; click to enlarge\" width=\"200\" /></a><br />2.10. AWS instance is up </td>\n  </tr>\n  <tr>\n    <td style=\" text-align: center; border: none;\"> <a href=\"/cloudman/aws/getting-started/GalaxyNotRunning.png\"><img src=\"./GalaxyNotRunning.png\" alt=\"Galaxy not running yet; click to enlarge\" width=\"200\" /></a><br />2.11. Galaxy CloudMan is<br />ready to configure </td>\n  </tr>\n</table>\n\n</div></div>\n\n\\*\\* This step is required every time a new cloud instance of Galaxy is desired.\\*\\*\n\n[CloudMan](/cloudman/) works in a master-worker fashion: the master is used to control all of the needed services as well as worker instances. Worker instances are needed to run analysis jobs submitted through Galaxy that runs on the master instance (for a more detailed description of running Galaxy in cluster environments, see the [cluster performance page](/admin/config/performance/cluster/)). So, in order to start a Galaxy CloudMan cluster, we need to start a master instance.\n\n1. Go to the [AWS Management Console for EC2](https://console.aws.amazon.com/ec2/home) and click **Launch Instance**\n\n2. Select the **Classic Wizard** in the popup window.\n"}},"context":{}}