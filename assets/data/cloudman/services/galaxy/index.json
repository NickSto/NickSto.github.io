{"hash":"14e186fd360947c1255e65c919a062692f477385","data":{"article":{"id":"7a86186565365c3a1aed7c9a1d1cd2de","title":"Galaxy in CloudMan","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<p>The Galaxy application is the flagship service within CloudMan. Usage and general configuration information for the Galaxy application is available throughout this wiki. This page focuses on service features available within CloudMan as they affect the Galaxy application.</p>\n<h3 id=\"becoming-a-galaxy-admin-user\"><a href=\"#becoming-a-galaxy-admin-user\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Becoming a Galaxy Admin user</h3>\n<p>A Galaxy Administrator user has additional privileges and can install/manage tools from the Tool Shed, manage users, libraries, set quotas, etc. Complete documentation on the Galaxy Admin Interface is available <a href=\"https://wiki.galaxyproject.org/Admin/Interface\" target=\"_blank\" rel=\"noopener noreferrer\">here</a>.</p>\n<p>In order to become an Admin user on the CloudMan instance, head to the CloudMan Admin page and type comma-separated email addresses for users you would like to become Admins (see screenshot below). Note that those emails should be registered users with this Galaxy instance. Then, click <em>Set admin users</em> and wait for Galaxy application to restart; refresh your Galaxy window and an <em>Admin</em> tab will become visible in the masthead.</p>\n<div class=\"img-sizer\" style=\"width: 500px\">\n<p><img src=\"http://i.imgur.com/lMh7ahV.png\"></p>\n</div>\n<h3 id=\"changing-galaxy-configuration-files\"><a href=\"#changing-galaxy-configuration-files\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Changing Galaxy configuration files</h3>\n<p>To ensure proper operation of the Galaxy application, CloudMan manages many of the Galaxy configuration options (e.g., file paths). In the future, we plan on providing a method for a user to update some of those settings in a more interactive fashion but for the time being, those settings are coded within CloudMan. If you need to permanently change those settings, it will be necessary to change <em>populate_galaxy_paths</em> method in <a href=\"https://github.com/galaxyproject/cloudman/blob/master/cm/util/galaxy_conf.py\" target=\"_blank\" rel=\"noopener noreferrer\">this file</a> and use your custom version of CloudMan when starting your cluster. See <a href=\"/cloudman/customizing/#customizing-your-galaxy-cloudman-cluster\">this page</a> for more details on how to do this.</p>\n<p>If you need to change the configuration values on a running cluster, you can do so manually as well. Galaxy configuration files are stored in <em>/mnt/galaxy/galaxy-app/config</em> and can be updated as desired. If you do this, you need to restart Galaxy by hand vs. using CloudMan Admin panel (because CloudMan will overwrite the config file). The following is a set of commands to use for restarting Galaxy manually:</p>\n<pre><code class=\"language-sh\">sudo su galaxy\ncd /mnt/galaxy/galaxy-app\nsh run.sh --pid-file=main.pid --log-file=main.log --stop-daemon\nsh run.sh --pid-file=main.pid --log-file=main.log --daemon\n</code></pre>\n<p>Additional Galaxy configuration options can be found on the <a href=\"/admin/\">Galaxy Admin page</a>.</p>\n<h4 id=\"adding-a-custom-tool-shed\"><a href=\"#adding-a-custom-tool-shed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Adding a custom Tool Shed</h4>\n<p>By default, CloudMan is configured with the Main and Test Tool Sheds. If you would like to add another Tool Shed, it is necessary to edit file <em>/mnt/galaxy/galaxy-app/config/tool_sheds_conf.xml</em> and restart Galaxy (via CloudMan Admin). The newly added Tool Shed will become available on the <em>Galaxy Admin</em> -> <em>Search and browse tool sheds</em> page.</p>\n<h3 id=\"updating-galaxy-source\"><a href=\"#updating-galaxy-source\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Updating Galaxy source</h3>\n<p>Galaxy application installed within CloudMan can be updated to a newer version via git. To do so</p>\n<ol>\n<li>Stop Galaxy service via CloudMan Admin by clicking on the 'Stop' button next to the Galaxy service name</li>\n</ol>\n<img src=\"http://i.imgur.com/SV3gHFA.jpg\" alt=\"\" width=500 />\n2. ssh to the instance, change to *galaxy* user (with *sudo su galaxy*) and change to */mnt/galaxy/galaxy-app* directory\n3. Issue *git pull* command (note that it may also be necessary to run *sh manage_db.sh upgrade* command if database migrations were introduced since the initial version of Galaxy)\n4. Start Galaxy from CloudMan Admin\n<p>By default, the installed Galaxy application is on <em>release_<version></em> branch so updating it will update that particular release. If you would like to update to a different release, it is necessary to also change to the desired git branch.</p>\n"}},"context":{}}