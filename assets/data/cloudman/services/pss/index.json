{"hash":"c32ecfdb33b075b0057598b5b9118f3554a398cf","data":{"article":{"id":"a319d03f34f3df1fcfa758acd2165326","title":"","tease":"","image":"","images":{},"category":null,"contact":"","date":null,"content":"<p>Occasionally, it is necessary to perform additional initialization steps after a cluster is launched. This can be done in an automated fashion by capturing the required actions in a bash script, uploading it to a publicly available URL and feeding it to CloudMan as a Post Start Script (PSS) via <a href=\"/src/cloudman/userdata/index.md\">user data</a>. The PSS script will be downloaded from the provided URL, executed, and then stored in the cluster's bucket. </p>\n<p>PSS are resolved in the following order:</p>\n<ol>\n<li>If a <code>post_start_script_url</code> (for master) or <code>worker_post_start_script_url</code> (for worker) is defined in user_data, it is processed first. These can be semi-colon separated lists, in which case they are executed one at a time, and can contain http paths, filenames or local file paths. For example: <code>http://domain.org/scripts/myscript.sh;/opt/app/start.d;bucket_script.sh;/opt/app/poststart.d;</code> <code>file:///opt/app/mystartup.d;hello</code>. For each url found, the following rules apply:</li>\n<li>If the url is an http url, the file is downloaded and executed</li>\n<li>If it's a filename only (no path), the cluster bucket will be first checked for the filename, and if it exists, downloaded and executed. Otherwise, the script will be assumed to be local and executed from the system path.</li>\n<li>If the path refers to a local directory, all scripts in that directory will be executed using the run-parts utility. (Refer to Ubuntu man pages for documentation on run-parts). Note that by default, run-parts does not execute files with extensions, and therefore, scripts should be marked as executable but should not contain an extension such as .sh</li>\n<li>If it's a file in a local filesystem path, the script will be directly executed.</li>\n<li>If these URL's are not defined in the user data, execution falls back to legacy behaviour,\nby checking if files <code>post_start_script</code> or <code>worker_post_start_script</code>, for master\nand worker respectively, exist in the cluster bucket. If available, they are downloaded\nand executed.</li>\n</ol>\n"}},"context":{}}